var _l=Object.defineProperty;var gl=(t,i,n)=>i in t?_l(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n;var w=(t,i,n)=>gl(t,typeof i!="symbol"?i+"":i,n);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Yn=Object.defineProperty,pl=(t,i,n)=>i in t?Yn(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,Hn=(t,i)=>{for(var n in i)Yn(t,n,{get:i[n],enumerable:!0})},y=(t,i,n)=>(pl(t,typeof i!="symbol"?i+"":i,n),n),G={move:"M",line:"L",curve:"C",arc:"A",close:"Z"},qn={};Hn(qn,{HALF_PI:()=>Kt,NumArray:()=>Oe,TWO_PI:()=>ie,decomposeMatrix:()=>hi,getComputedMatrix:()=>Kn,getPoT:()=>Jn,lerp:()=>ce,mod:()=>_e,setMatrix:()=>$n,toFixed:()=>Ut});var Vt;typeof window<"u"?Vt=window:typeof global<"u"?Vt=global:typeof self<"u"&&(Vt=self);var Gn,ie=Math.PI*2,Kt=Math.PI*.5;function hi(t,i,n,l,o,u){let f;return arguments.length<=1?(f=t.a,i=t.b,n=t.c,l=t.d,o=t.e,u=t.f):f=t,{translateX:o,translateY:u,scaleX:Math.sqrt(f*f+i*i),scaleY:Math.sqrt(n*n+l*l),rotation:180*Math.atan2(i,f)/Math.PI}}function $n(t){Gn=t}function Kn(t,i){i=i&&i.identity()||new Gn;let n=t;const l=[];for(;n&&n._matrix;)l.push(n._matrix),n=n.parent;l.reverse();for(let o=0;o<l.length;o++){const f=l[o].elements;i.multiply(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9])}return i}function ce(t,i,n){return n*(i-t)+t}var Xs=[2,4,8,16,32,64,128,256,512,1024,2048,4096];function Jn(t){let i=0;for(;Xs[i]&&Xs[i]<t;)i++;return Xs[i]}function _e(t,i){for(;t<0;)t+=i;return t%i}var Oe=Vt.Float32Array||Array,ml=Math.floor;function Ut(t){return ml(t*1e6)/1e6}var Zn={};Hn(Zn,{Curve:()=>ci,getAnchorsFromArcData:()=>bl,getComponentOnCubicBezier:()=>Ri,getControlPoints:()=>sa,getCurveBoundingBox:()=>ta,getCurveFromPoints:()=>ia,getCurveLength:()=>Qn,getReflection:()=>Zs,integrate:()=>ea,subdivide:()=>rr});var U=class{constructor(){y(this,"_events",{}),y(this,"_bound",!1)}addEventListener(t,i){return(this._events[t]||(this._events[t]=[])).push(i),this._bound=!0,this}on(){return this.addEventListener.apply(this,arguments)}bind(){return this.addEventListener.apply(this,arguments)}removeEventListener(t,i){if(!this._events)return this;if(!t&&!i)return this._events={},this._bound=!1,this;const n=t?[t]:Object.keys(this._events);for(let l=0,o=n.length;l<o;l++){t=n[l];let u=this._events[t];if(u){let f=[];if(i)for(let g=0,b=u.length;g<b;g++){let m=u[g];m=m.handler?m.handler:m,i!==m&&f.push(m)}this._events[t]=f}}return this}off(){return this.removeEventListener.apply(this,arguments)}unbind(){return this.removeEventListener.apply(this,arguments)}dispatchEvent(t){if(!this._events)return this;const i=Array.prototype.slice.call(arguments,1),n=this._events[t];if(n)for(let l=0;l<n.length;l++)n[l].call(this,...i);return this}trigger(){return this.dispatchEvent.apply(this,arguments)}listen(t,i,n){const l=this;t&&(o.obj=t,o.name=i,o.handler=n,t.on(i,o));function o(){n.apply(l,arguments)}return l}ignore(t,i,n){return t.off(i,n),this}};y(U,"Types",{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"});y(U,"Methods",["addEventListener","on","removeEventListener","off","unbind","dispatchEvent","trigger","listen","ignore"]);var on={x:{enumerable:!0,get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this._bound&&this.dispatchEvent(U.Types.change))}},y:{enumerable:!0,get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this._bound&&this.dispatchEvent(U.Types.change))}}},Te=class extends U{constructor(t=0,i=0){super(),y(this,"_x",0),y(this,"_y",0);for(let n in on)Object.defineProperty(this,n,on[n]);this.x=t,this.y=i}static add(t,i){return new Te(t.x+i.x,t.y+i.y)}static sub(t,i){return new Te(t.x-i.x,t.y-i.y)}static subtract(t,i){return Te.sub(t,i)}static ratioBetween(t,i){return(t.x*i.x+t.y*i.y)/(t.length()*i.length())}static angleBetween(t,i){if(arguments.length>=4){const o=arguments[0]-arguments[2],u=arguments[1]-arguments[3];return Math.atan2(u,o)}const n=t.x-i.x,l=t.y-i.y;return Math.atan2(l,n)}static distanceBetween(t,i){return Math.sqrt(Te.distanceBetweenSquared(t,i))}static distanceBetweenSquared(t,i){const n=t.x-i.x,l=t.y-i.y;return n*n+l*l}set(t,i){return this.x=t,this.y=i,this}copy(t){return this.x=t.x,this.y=t.y,this}clear(){return this.x=0,this.y=0,this}clone(){return new Te(this.x,this.y)}add(t,i){return arguments.length<=0?this:(arguments.length<=1?typeof t=="number"?(this.x+=t,this.y+=t):t&&typeof t.x=="number"&&typeof t.y=="number"&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=i),this)}addSelf(t){return this.add.apply(this,arguments)}sub(t,i){return arguments.length<=0?this:(arguments.length<=1?typeof t=="number"?(this.x-=t,this.y-=t):t&&typeof t.x=="number"&&typeof t.y=="number"&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=i),this)}subtract(){return this.sub.apply(this,arguments)}subSelf(t){return this.sub.apply(this,arguments)}subtractSelf(t){return this.sub.apply(this,arguments)}multiply(t,i){return arguments.length<=0?this:(arguments.length<=1?typeof t=="number"?(this.x*=t,this.y*=t):t&&typeof t.x=="number"&&typeof t.y=="number"&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=i),this)}multiplySelf(t){return this.multiply.apply(this,arguments)}multiplyScalar(t){return this.multiply(t)}divide(t,i){return arguments.length<=0?this:(arguments.length<=1?typeof t=="number"?(this.x/=t,this.y/=t):t&&typeof t.x=="number"&&typeof t.y=="number"&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=i),isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0),this)}divideSelf(t){return this.divide.apply(this,arguments)}divideScalar(t){return this.divide(t)}negate(){return this.multiply(-1)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.divideScalar(this.length())}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,n=this.y-t.y;return i*i+n*n}setLength(t){return this.normalize().multiplyScalar(t)}equals(t,i){return i=typeof i>"u"?1e-4:i,this.distanceTo(t)<i}lerp(t,i){const n=(t.x-this.x)*i+this.x,l=(t.y-this.y)*i+this.y;return this.set(n,l)}isZero(t){return t=typeof t>"u"?1e-4:t,this.length()<t}toString(){return this.x+", "+this.y}toObject(){return{x:this.x,y:this.y}}rotate(t){const i=this.x,n=this.y,l=Math.cos(t),o=Math.sin(t);return this.x=i*l-n*o,this.y=i*o+n*l,this}},K=Te;y(K,"zero",new Te);y(K,"left",new Te(-1,0));y(K,"right",new Te(1,0));y(K,"up",new Te(0,-1));y(K,"down",new Te(0,1));var xt=class extends K{constructor(t=0,i=0,n=0,l=0,o=0,u=0,f=G.move){super(t,i),y(this,"controls",{left:new K,right:new K}),y(this,"_command",G.move),y(this,"_relative",!0),y(this,"_rx",0),y(this,"_ry",0),y(this,"_xAxisRotation",0),y(this,"_largeArcFlag",0),y(this,"_sweepFlag",1);for(let b in hn)Object.defineProperty(this,b,hn[b]);this.command=f,this.relative=!0;const g=xt.makeBroadcast(this);this.controls.left.set(n,l).addEventListener(U.Types.change,g),this.controls.right.set(o,u).addEventListener(U.Types.change,g)}static makeBroadcast(t){return i;function i(){t._bound&&t.dispatchEvent(U.Types.change)}}copy(t){return this.x=t.x,this.y=t.y,typeof t.command=="string"&&(this.command=t.command),t.controls&&(t.controls.left&&this.controls.left.copy(t.controls.left),t.controls.right&&this.controls.right.copy(t.controls.right)),typeof t.relative=="boolean"&&(this.relative=t.relative),typeof t.rx=="number"&&(this.rx=t.rx),typeof t.ry=="number"&&(this.ry=t.ry),typeof t.xAxisRotation=="number"&&(this.xAxisRotation=t.xAxisRotation),typeof t.largeArcFlag=="number"&&(this.largeArcFlag=t.largeArcFlag),typeof t.sweepFlag=="number"&&(this.sweepFlag=t.sweepFlag),this}clone(){return new xt().copy(this)}toObject(){return{x:this.x,y:this.y,command:this.command,relative:this.relative,controls:{left:this.controls.left.toObject(),right:this.controls.right.toObject()},rx:this.rx,ry:this.ry,xAxisRotation:this.xAxisRotation,largeArcFlag:this.largeArcFlag,sweepFlag:this.sweepFlag}}toString(){return JSON.stringify(this.toObject())}},hn={command:{enumerable:!0,get:function(){return this._command},set:function(t){this._command!==t&&(this._command=t,this._bound&&this.dispatchEvent(U.Types.change))}},relative:{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!==!!t&&(this._relative=!!t,this._bound&&this.dispatchEvent(U.Types.change))}},rx:{enumerable:!0,get:function(){return this._rx},set:function(t){this._rx!==t&&(this._rx=t,this._bound&&this.dispatchEvent(U.Types.change))}},ry:{enumerable:!0,get:function(){return this._ry},set:function(t){this._ry!==t&&(this._ry=t,this._bound&&this.dispatchEvent(U.Types.change))}},xAxisRotation:{enumerable:!0,get:function(){return this._xAxisRotation},set:function(t){this._xAxisRotation!==t&&(this._xAxisRotation=t,this._bound&&this.dispatchEvent(U.Types.change))}},largeArcFlag:{enumerable:!0,get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag!==t&&(this._largeArcFlag=t,this._bound&&this.dispatchEvent(U.Types.change))}},sweepFlag:{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag!==t&&(this._sweepFlag=t,this._bound&&this.dispatchEvent(U.Types.change))}}},yl=0,Jt={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.8.14",PublishDate:"2024-06-11T02:06:29.216Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return yl++}},ci={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]};function Ri(t,i,n,l,o){const u=1-t;return u*u*u*i+3*u*u*t*n+3*u*t*t*l+t*t*t*o}function rr(t,i,n,l,o,u,f,g,b){b=b||ci.RecursionLimit;const m=b+1;if(Math.abs(t-f)<.001&&Math.abs(i-g)<.001)return[new xt(f,g)];const S=[];for(let k=0;k<m;k++){const T=k/m,v=Ri(T,t,n,o,f),L=Ri(T,i,l,u,g);S.push(new xt(v,L))}return S}function Qn(t,i,n,l,o,u,f,g,b){if(t===n&&i===l&&o===f&&u===g){const z=f-t,I=g-i;return Math.sqrt(z*z+I*I)}const m=9*(n-o)+3*(f-t),S=6*(t+o)-12*n,k=3*(n-t),T=9*(l-u)+3*(g-i),v=6*(i+u)-12*l,L=3*(l-i);function B(z){const I=(m*z+S)*z+k,M=(T*z+v)*z+L;return Math.sqrt(I*I+M*M)}return ea(B,0,1,b||ci.RecursionLimit)}function ta(t,i,n,l,o,u,f,g){const b=[],m=[[],[]];let S,k,T,v,L,B,z,I;for(let W=0;W<2;++W){if(W==0?(k=6*t-12*n+6*o,S=-3*t+9*n-9*o+3*f,T=3*n-3*t):(k=6*i-12*l+6*u,S=-3*i+9*l-9*u+3*g,T=3*l-3*i),Math.abs(S)<1e-12){if(Math.abs(k)<1e-12)continue;v=-T/k,0<v&&v<1&&b.push(v);continue}z=k*k-4*T*S,I=Math.sqrt(z),!(z<0)&&(L=(-k+I)/(2*S),0<L&&L<1&&b.push(L),B=(-k-I)/(2*S),0<B&&B<1&&b.push(B))}let M=b.length,X=M,Y;for(;M--;)v=b[M],Y=1-v,m[0][M]=Y*Y*Y*t+3*Y*Y*v*n+3*Y*v*v*o+v*v*v*f,m[1][M]=Y*Y*Y*i+3*Y*Y*v*l+3*Y*v*v*u+v*v*v*g;return m[0][X]=t,m[1][X]=i,m[0][X+1]=f,m[1][X+1]=g,m[0].length=m[1].length=X+2,{min:{x:Math.min.apply(0,m[0]),y:Math.min.apply(0,m[1])},max:{x:Math.max.apply(0,m[0]),y:Math.max.apply(0,m[1])}}}function ea(t,i,n,l){let o=ci.abscissas[l-2],u=ci.weights[l-2],f=.5*(n-i),g=f+i,b=0,m=l+1>>1,S=l&1?u[b++]*t(g):0;for(;b<m;){const k=f*o[b];S+=u[b++]*(t(g+k)+t(g-k))}return f*S}function ia(t,i){const n=t.length,l=n-1;for(let o=0;o<n;o++){const u=t[o],f=i?_e(o-1,n):Math.max(o-1,0),g=i?_e(o+1,n):Math.min(o+1,l),b=t[f],m=u,S=t[g];sa(b,m,S),m.command=o===0?G.move:G.curve}}function sa(t,i,n){const l=K.angleBetween(t,i),o=K.angleBetween(n,i);let u=K.distanceBetween(t,i),f=K.distanceBetween(n,i),g=(l+o)/2;return u<1e-4||f<1e-4?(typeof i.relative=="boolean"&&!i.relative&&(i.controls.left.copy(i),i.controls.right.copy(i)),i):(u*=.33,f*=.33,o<l?g+=Kt:g-=Kt,i.controls.left.x=Math.cos(g)*u,i.controls.left.y=Math.sin(g)*u,g-=Math.PI,i.controls.right.x=Math.cos(g)*f,i.controls.right.y=Math.sin(g)*f,typeof i.relative=="boolean"&&!i.relative&&(i.controls.left.x+=i.x,i.controls.left.y+=i.y,i.controls.right.x+=i.x,i.controls.right.y+=i.y),i)}function Zs(t,i,n){return new K(2*t.x-(i.x+t.x)-(n?t.x:0),2*t.y-(i.y+t.y)-(n?t.y:0))}function bl(t,i,n,l,o,u,f){const g=Jt.Resolution;for(let b=0;b<g;b++){let m=(b+1)/g;f&&(m=1-m);const S=m*u+o,k=n*Math.cos(S),T=l*Math.sin(S),v=new xt(k,T);v.command=G.line}}var xl=Vt.devicePixelRatio||1;function vl(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}function nr(t){return xl/vl(t)}var cn=Array.prototype.slice;function wl(t){if(t==null)return!1;const i=t.length;return typeof i=="number"&&i>=0&&i<4294967296}var nt={isNaN:function(t){return typeof t=="number"&&t!==+t},isElement:function(t){return!!(t&&t.nodeType===1)},isObject:function(t){const i=typeof t;return i==="function"||i==="object"&&!!t},extend:function(t){const i=cn.call(arguments,1);for(let n=0;n<i.length;n++){const l=i[n];for(let o in l)t[o]=l[o]}return t},defaults:function(t){const i=cn.call(arguments,1);for(let n=0;n<i.length;n++){const l=i[n];for(let o in l)t[o]===void 0&&(t[o]=l[o])}return t},each:function(t,i,n){const l=n||this,o=!wl(t)&&Object.keys(t),u=(o||t).length;for(let f=0;f<u;f++){const g=o?o[f]:f;i.call(l,t[g],g,t)}return t},performance:Vt.performance&&Vt.performance.now?Vt.performance:Date},bs=class extends U{constructor(){super(),y(this,"_flagId",!1),y(this,"_flagClassName",!1),y(this,"_renderer",{}),y(this,"_id",""),y(this,"_className",""),y(this,"classList",[]);for(let t in fn)Object.defineProperty(this,t,fn[t])}flagReset(){this._flagId=this._flagClassName=!1}},fn={renderer:{enumerable:!1,get:function(){return this._renderer}},id:{enumerable:!0,get:function(){return this._id},set:function(t){const i=this._id;t!==this._id&&(this._id=t,this._flagId=!0,this.parent&&(delete this.parent.children.ids[i],this.parent.children.ids[this._id]=this))}},className:{enumerable:!0,get:function(){return this._className},set:function(t){this._className!==t&&(this._flagClassName=!0,this.classList=t.split(/\s+?/),this._className=t)}}},kl=Math.cos,Al=Math.sin,un=Math.tan,Ys=[],we=class extends U{constructor(t,i,n,l,o,u){super(),y(this,"elements",new Oe(9)),y(this,"manual",!1);let f=t;Array.isArray(f)||(f=Array.prototype.slice.call(arguments)),this.identity(),f.length>0&&this.set(f)}static Multiply(t,i,n){if(i.length<=3){const W=t;let Z,Q,ft;const et=i[0]||0,it=i[1]||0,yt=i[2]||0;return Z=W[0]*et+W[1]*it+W[2]*yt,Q=W[3]*et+W[4]*it+W[5]*yt,ft=W[6]*et+W[7]*it+W[8]*yt,[Z,Q,ft]}const l=t[0],o=t[1],u=t[2],f=t[3],g=t[4],b=t[5],m=t[6],S=t[7],k=t[8],T=i[0],v=i[1],L=i[2],B=i[3],z=i[4],I=i[5],M=i[6],X=i[7],Y=i[8];return n=n||new Oe(9),n[0]=l*T+o*B+u*M,n[1]=l*v+o*z+u*X,n[2]=l*L+o*I+u*Y,n[3]=f*T+g*B+b*M,n[4]=f*v+g*z+b*X,n[5]=f*L+g*I+b*Y,n[6]=m*T+S*B+k*M,n[7]=m*v+S*z+k*X,n[8]=m*L+S*I+k*Y,n}set(t,i,n,l,o,u,f,g,b){if(typeof i>"u"){const m=t;t=m[0],i=m[1],n=m[2],l=m[3],o=m[4],u=m[5],f=m[6],g=m[7],b=m[8]}return this.elements[0]=t,this.elements[1]=i,this.elements[2]=n,this.elements[3]=l,this.elements[4]=o,this.elements[5]=u,this.elements[6]=f,this.elements[7]=g,this.elements[8]=b,this.trigger(U.Types.change)}copy(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(U.Types.change)}identity(){return this.elements[0]=we.Identity[0],this.elements[1]=we.Identity[1],this.elements[2]=we.Identity[2],this.elements[3]=we.Identity[3],this.elements[4]=we.Identity[4],this.elements[5]=we.Identity[5],this.elements[6]=we.Identity[6],this.elements[7]=we.Identity[7],this.elements[8]=we.Identity[8],this.trigger(U.Types.change)}multiply(t,i,n,l,o,u,f,g,b){if(typeof i>"u")return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(U.Types.change);if(typeof n>"u"&&(n=1),typeof l>"u"){t=t||0,i=i||0,n=n||0,o=this.elements;const Rt=o[0]*t+o[1]*i+o[2]*n,F=o[3]*t+o[4]*i+o[5]*n,wt=o[6]*t+o[7]*i+o[8]*n;return[Rt,F,wt]}const m=this.elements,S=[t,i,n,l,o,u,f,g,b],k=m[0],T=m[1],v=m[2],L=m[3],B=m[4],z=m[5],I=m[6],M=m[7],X=m[8],Y=S[0],W=S[1],Z=S[2],Q=S[3],ft=S[4],et=S[5],it=S[6],yt=S[7],st=S[8];return this.elements[0]=k*Y+T*Q+v*it,this.elements[1]=k*W+T*ft+v*yt,this.elements[2]=k*Z+T*et+v*st,this.elements[3]=L*Y+B*Q+z*it,this.elements[4]=L*W+B*ft+z*yt,this.elements[5]=L*Z+B*et+z*st,this.elements[6]=I*Y+M*Q+X*it,this.elements[7]=I*W+M*ft+X*yt,this.elements[8]=I*Z+M*et+X*st,this.trigger(U.Types.change)}inverse(t){const i=this.elements;t=t||new we;const n=i[0],l=i[1],o=i[2],u=i[3],f=i[4],g=i[5],b=i[6],m=i[7],S=i[8],k=S*f-g*m,T=-S*u+g*b,v=m*u-f*b;let L=n*k+l*T+o*v;return L?(L=1/L,t.elements[0]=k*L,t.elements[1]=(-S*l+o*m)*L,t.elements[2]=(g*l-o*f)*L,t.elements[3]=T*L,t.elements[4]=(S*n-o*b)*L,t.elements[5]=(-g*n+o*u)*L,t.elements[6]=v*L,t.elements[7]=(-m*n+l*b)*L,t.elements[8]=(f*n-l*u)*L,t):null}scale(t,i){return arguments.length<=1&&(i=t),this.multiply(t,0,0,0,i,0,0,0,1)}rotate(t){const i=kl(t),n=Al(t);return this.multiply(i,-n,0,n,i,0,0,0,1)}translate(t,i){return this.multiply(1,0,t,0,1,i,0,0,1)}skewX(t){const i=un(t);return this.multiply(1,i,0,0,1,0,0,0,1)}skewY(t){const i=un(t);return this.multiply(1,0,0,i,1,0,0,0,1)}toString(t){return Ys.length=0,this.toTransformArray(t,Ys),Ys.map(Ut).join(" ")}toTransformArray(t,i){const n=this.elements,l=!!i,o=n[0],u=n[1],f=n[2],g=n[3],b=n[4],m=n[5];if(t){const S=n[6],k=n[7],T=n[8];if(l){i[0]=o,i[1]=g,i[2]=S,i[3]=u,i[4]=b,i[5]=k,i[6]=f,i[7]=m,i[8]=T;return}return[o,g,S,u,b,k,f,m,T]}if(l){i[0]=o,i[1]=g,i[2]=u,i[3]=b,i[4]=f,i[5]=m;return}return[o,g,u,b,f,m]}toArray(t,i){const n=this.elements,l=!!i,o=n[0],u=n[1],f=n[2],g=n[3],b=n[4],m=n[5];if(t){const S=n[6],k=n[7],T=n[8];if(l){i[0]=o,i[1]=u,i[2]=f,i[3]=g,i[4]=b,i[5]=m,i[6]=S,i[7]=k,i[8]=T;return}return[o,u,f,g,b,m,S,k,T]}if(l){i[0]=o,i[1]=u,i[2]=f,i[3]=g,i[4]=b,i[5]=m;return}return[o,u,f,g,b,m]}toObject(){return{elements:this.toArray(!0),manual:!!this.manual}}clone(){return new we().copy(this)}},Qe=we;y(Qe,"Identity",[1,0,0,0,1,0,0,0,1]);$n(Qe);var He=class extends bs{constructor(){super(),y(this,"_flagMatrix",!0),y(this,"_flagScale",!1),y(this,"_matrix",null),y(this,"_worldMatrix",null),y(this,"_position",null),y(this,"_rotation",0),y(this,"_scale",1),y(this,"_skewX",0),y(this,"_skewY",0);for(let t in ts)Object.defineProperty(this,t,ts[t]);this._renderer.flagMatrix=ra.bind(this),this.isShape=!0,this.id=Jt.Identifier+Jt.uniqueId(),this.matrix=new Qe,this.worldMatrix=new Qe,this.position=new K,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}get renderer(){return this._renderer}set renderer(t){this._renderer=t}get translation(){return ts.position.get.apply(this,arguments)}set translation(t){ts.position.set.apply(this,arguments)}addTo(t){return t.add(this),this}remove(){return this.parent?(this.parent.remove(this),this):this}clone(t){const i=new He;return i.position.copy(this.position),i.rotation=this.rotation,i.scale=this.scale,i.skewX=this.skewX,i.skewY=this.skewY,this.matrix.manual&&i.matrix.copy(this.matrix),t&&t.add(i),i._update()}_update(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.position.x,this.position.y),this._scale instanceof K?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),t&&this.parent&&this.parent._update&&this.parent._update(),this}flagReset(){return this._flagMatrix=this._flagScale=!1,super.flagReset.call(this),this}},ts={position:{enumerable:!0,get:function(){return this._position},set:function(t){this._position&&this._position.unbind(U.Types.change,this._renderer.flagMatrix),this._position=t,this._position.bind(U.Types.change,this._renderer.flagMatrix),ra.call(this)}},rotation:{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof K&&this._scale.unbind(U.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof K&&this._scale.bind(U.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}},skewX:{enumerable:!0,get:function(){return this._skewX},set:function(t){this._skewX=t,this._flagMatrix=!0}},skewY:{enumerable:!0,get:function(){return this._skewY},set:function(t){this._skewY=t,this._flagMatrix=!0}},matrix:{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}},worldMatrix:{enumerable:!0,get:function(){return Kn(this,this._worldMatrix),this._worldMatrix},set:function(t){this._worldMatrix=t}}};function ra(){this._flagMatrix=!0}var qe=class extends Array{constructor(){super(),y(this,"_events",new U),arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&this.push.apply(this,arguments[0]):arguments.length>0&&this.push.apply(this,arguments)}get _bound(){return this._events._bound}set _bound(t){this._events._bound=t}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.on.apply(this,arguments)}bind(){return this._events.bind.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.off.apply(this,arguments)}unbind(){return this._events.unbind.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.trigger.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}pop(){const t=super.pop.apply(this,arguments);return this.trigger(U.Types.remove,[t]),t}shift(){const t=super.shift.apply(this,arguments);return this.trigger(U.Types.remove,[t]),t}push(){const t=super.push.apply(this,arguments);return this.trigger(U.Types.insert,arguments),t}unshift(){const t=super.unshift.apply(this,arguments);return this.trigger(U.Types.insert,arguments),t}splice(){const t=super.splice.apply(this,arguments);if(this.trigger(U.Types.remove,t),arguments.length>2){const i=this.slice(arguments[0],arguments[0]+arguments.length-2);this.trigger(U.Types.insert,i),this.trigger(U.Types.order)}return t}sort(){return super.sort.apply(this,arguments),this.trigger(U.Types.order),this}reverse(){return super.reverse.apply(this,arguments),this.trigger(U.Types.order),this}indexOf(){return super.indexOf.apply(this,arguments)}map(t,i){const n=[];for(let l=0;l<this.length;l++){const o=this[l];let u;i?u=t.call(i,o,l):u=t(o,l),n.push(u)}return n}},na=class extends qe{constructor(t){t=Array.isArray(t)?t:Array.prototype.slice.call(arguments),super(t),y(this,"ids",{}),this.attach(t),this.on(U.Types.insert,this.attach),this.on(U.Types.remove,this.detach)}attach(t){for(let i=0;i<t.length;i++){const n=t[i];n&&n.id&&(this.ids[n.id]=n)}return this}detach(t){for(let i=0;i<t.length;i++)delete this.ids[t[i].id];return this}},es=Math.min,is=Math.max,aa=class extends He{constructor(t){super(),y(this,"_flagAdditions",!1),y(this,"_flagSubtractions",!1),y(this,"_flagOrder",!1),y(this,"_flagOpacity",!0),y(this,"_flagBeginning",!1),y(this,"_flagEnding",!1),y(this,"_flagLength",!1),y(this,"_flagMask",!1),y(this,"_fill","#fff"),y(this,"_stroke","#000"),y(this,"_linewidth",1),y(this,"_opacity",1),y(this,"_visible",!0),y(this,"_cap","round"),y(this,"_join","round"),y(this,"_miter",4),y(this,"_closed",!0),y(this,"_curved",!1),y(this,"_automatic",!0),y(this,"_beginning",0),y(this,"_ending",1),y(this,"_length",0),y(this,"_mask",null);for(let i in dn)Object.defineProperty(this,i,dn[i]);this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)}static InsertChildren(t){for(let i=0;i<t.length;i++)_n.call(this,t[i],this)}static RemoveChildren(t){for(let i=0;i<t.length;i++)_n.call(this,t[i])}static OrderChildren(t){this._flagOrder=!0}clone(t){const i=new aa,n=this.children.map(function(l){return l.clone()});return i.add(n),i.opacity=this.opacity,this.mask&&(i.mask=this.mask),i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,i.className=this.className,this.matrix.manual&&i.matrix.copy(this.matrix),t&&t.add(i),i._update()}toObject(){const t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof K?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),nt.each(this.children,function(i,n){t.children[n]=i.toObject()},this),t}corner(){const t=this.getBoundingClientRect(!0);for(let i=0;i<this.children.length;i++){const n=this.children[i];n.translation.x-=t.left,n.translation.y-=t.top}return this.mask&&(this.mask.translation.x-=t.left,this.mask.translation.y-=t.top),this}center(){const t=this.getBoundingClientRect(!0),i=t.left+t.width/2-this.translation.x,n=t.top+t.height/2-this.translation.y;for(let l=0;l<this.children.length;l++){const o=this.children[l];o.isShape&&(o.translation.x-=i,o.translation.y-=n)}return this.mask&&(this.mask.translation.x-=i,this.mask.translation.y-=n),this}getById(t){let i=null;function n(l){if(l.id===t)return l;if(l.children){for(let o=0;o<l.children.length;o++)if(i=n(l.children[o]),i)return i}return null}return n(this)}getByClassName(t){const i=[];function n(l){if(Array.prototype.indexOf.call(l.classList,t)>=0&&i.push(l),l.children)for(let o=0;o<l.children.length;o++){const u=l.children[o];n(u)}return i}return n(this)}getByType(t){const i=[];function n(l){if(l instanceof t&&i.push(l),l.children)for(let o=0;o<l.children.length;o++){const u=l.children[o];n(u)}return i}return n(this)}add(t){t instanceof Array?t=t.slice():t=Array.prototype.slice.call(arguments);for(let i=0;i<t.length;i++){const n=t[i];if(!(n&&n.id))continue;const l=Array.prototype.indexOf.call(this.children,n);l>=0&&this.children.splice(l,1),this.children.push(n)}return this}remove(t){const i=arguments.length,n=this.parent;if(i<=0&&n)return n.remove(this),this;t instanceof Array?t=t.slice():t=Array.prototype.slice.call(arguments);for(let l=0;l<t.length;l++){const o=t[l];if(!o||!this.children.ids[o.id])continue;const u=this.children.indexOf(o);u>=0&&this.children.splice(u,1)}return this}getBoundingClientRect(t){let i,n,l,o,u,f;this._update(!0);let g=1/0,b=-1/0,m=1/0,S=-1/0;const k=/texture|gradient/i;n=t?this.matrix:this.worldMatrix;for(let T=0;T<this.children.length;T++){const v=this.children[T];if(!(!v.visible||k.test(v._renderer.type))&&(i=v.getBoundingClientRect(t),l=typeof i.top!="number"||nt.isNaN(i.top)||!isFinite(i.top),o=typeof i.left!="number"||nt.isNaN(i.left)||!isFinite(i.left),u=typeof i.right!="number"||nt.isNaN(i.right)||!isFinite(i.right),f=typeof i.bottom!="number"||nt.isNaN(i.bottom)||!isFinite(i.bottom),!(l||o||u||f)))if(t){const[L,B]=n.multiply(i.left,i.top),[z,I]=n.multiply(i.right,i.top),[M,X]=n.multiply(i.left,i.bottom),[Y,W]=n.multiply(i.right,i.bottom);m=es(B,I,X,W),g=es(L,z,M,Y),b=is(L,z,M,Y),S=is(B,I,X,W)}else m=es(i.top,m),g=es(i.left,g),b=is(i.right,b),S=is(i.bottom,S)}return{top:m,left:g,right:b,bottom:S,width:b-g,height:S-m}}noFill(){return this.children.forEach(function(t){t.noFill()}),this}noStroke(){return this.children.forEach(function(t){t.noStroke()}),this}subdivide(){const t=arguments;return this.children.forEach(function(i){i.subdivide.apply(i,t)}),this}_update(){let t,i,n;if(this._flagBeginning||this._flagEnding){const l=Math.min(this._beginning,this._ending),o=Math.max(this._beginning,this._ending),u=this.length;let f=0;const g=l*u,b=o*u;for(t=0;t<this.children.length;t++)n=this.children[t],i=n.length,g>f+i?(n.beginning=1,n.ending=1):b<f?(n.beginning=0,n.ending=0):g>f&&g<f+i?(n.beginning=(g-f)/i,n.ending=1):b>f&&b<f+i?(n.beginning=0,n.ending=(b-f)/i):(n.beginning=0,n.ending=1),f+=i}return super._update.apply(this,arguments)}flagReset(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,super.flagReset.call(this),this}},Gt=aa;y(Gt,"Children",na);y(Gt,"Properties",["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"]);var dn={visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._flagVisible=this._visible!==t||this._flagVisible,this._visible=t}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t||this._flagOpacity,this._opacity=t}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t||this._flagBeginning,this._beginning=t}},ending:{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t||this._flagEnding,this._ending=t}},length:{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(let t=0;t<this.children.length;t++){const i=this.children[t];this._length+=i.length}}return this._length}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){this._fill=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.fill=t}}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){this._stroke=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.stroke=t}}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.linewidth=t}}},join:{enumerable:!0,get:function(){return this._join},set:function(t){this._join=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.join=t}}},miter:{enumerable:!0,get:function(){return this._miter},set:function(t){this._miter=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.miter=t}}},cap:{enumerable:!0,get:function(){return this._cap},set:function(t){this._cap=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.cap=t}}},closed:{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.closed=t}}},curved:{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.curved=t}}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(t){this._automatic=t;for(let i=0;i<this.children.length;i++){const n=this.children[i];n.automatic=t}}},children:{enumerable:!0,get:function(){return this._children},set:function(t){const i=Gt.InsertChildren.bind(this),n=Gt.RemoveChildren.bind(this),l=Gt.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&n(this._children)),this._children=new na(t),this._children.bind(U.Types.insert,i),this._children.bind(U.Types.remove,n),this._children.bind(U.Types.order,l),t.length>0&&i(t)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,nt.isObject(t)&&!t.clip&&(t.clip=!0)}}};function _n(t,i){const n=t.parent;let l;if(n===i){o();return}if(n&&n.children.ids[t.id]&&(l=Array.prototype.indexOf.call(n.children,t),n.children.splice(l,1),u()),i){o();return}u(),n._flagAdditions&&n.additions.length===0&&(n._flagAdditions=!1),n._flagSubtractions&&n.subtractions.length===0&&(n._flagSubtractions=!1),delete t.parent;function o(){i.subtractions.length>0&&(l=Array.prototype.indexOf.call(i.subtractions,t),l>=0&&i.subtractions.splice(l,1)),i.additions.length>0&&(l=Array.prototype.indexOf.call(i.additions,t),l>=0&&i.additions.splice(l,1)),t.parent=i,i.additions.push(t),i._flagAdditions=!0}function u(){l=Array.prototype.indexOf.call(n.additions,t),l>=0&&n.additions.splice(l,1),l=Array.prototype.indexOf.call(n.subtractions,t),l<0&&(n.subtractions.push(t),n._flagSubtractions=!0)}}var Hs=[],Qs=Math.max,Sl=Math.min,gn=Math.abs,ss=Math.sin,rs=Math.cos,Rl=Math.acos,ms=Math.sqrt,Wt={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},baselines:{top:"top",middle:"middle",bottom:"bottom",baseline:"alphabetic"},shim:function(t,i){return t.tagName=t.nodeName=i||"canvas",t.nodeType=1,t.getAttribute=function(n){return this[n]},t.setAttribute=function(n,l){return this[n]=l,this},t},group:{renderChild:function(t){Wt[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){if(!this._visible)return this;this._update();const i=this._matrix.elements,n=this.parent;this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1);const l=this._mask,o=ns(i),u=!o||!!l;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,u&&(t.save(),o||t.transform(i[0],i[3],i[1],i[4],i[2],i[5])),l&&Wt[l._renderer.type].render.call(l,t,!0),this._opacity>0&&this._scale!==0)for(let f=0;f<this.children.length;f++){const g=this.children[f];Wt[g._renderer.type].render.call(g,t)}return u&&t.restore(),this.flagReset()}},path:{render:function(t,i,n){let l,o,u,f,g,b,m,S,k,T,v,L,B,z,I,M,X,Y,W,Z,Q,ft,et,it,yt,st,Rt,F,wt,lt,V,tt,Lt,ee;if(ee=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,wt=this._mask,lt=this._clip,g=this._opacity*(ee||1),b=this._visible,!i&&(!b||lt||g===0))return this;this._update(),l=this._matrix.elements,o=this._stroke,u=this._linewidth,f=this._fill,m=this._cap,S=this._join,k=this._miter,T=this._closed,v=this._renderer.vertices,L=v.length,B=L-1,V=ns(l),Lt=this.dashes,V||(t.save(),t.transform(l[0],l[3],l[1],l[4],l[2],l[5])),wt&&Wt[wt._renderer.type].render.call(wt,t,!0),f&&(typeof f=="string"?t.fillStyle=f:(Wt[f._renderer.type].render.call(f,t,this),t.fillStyle=f._renderer.effect)),o&&(typeof o=="string"?t.strokeStyle=o:(Wt[o._renderer.type].render.call(o,t,this),t.strokeStyle=o._renderer.effect),u&&(t.lineWidth=u),k&&(t.miterLimit=k),S&&(t.lineJoin=S),!T&&m&&(t.lineCap=m)),typeof g=="number"&&(t.globalAlpha=g),Lt&&Lt.length>0&&(t.lineDashOffset=Lt.offset||0,t.setLineDash(Lt)),t.beginPath();let Ct,ge,ke,Le,Be,Ne,re;for(let Ft=0;Ft<L;Ft++)switch(M=v[Ft],Rt=M.x,F=M.y,M.command){case G.close:t.closePath();break;case G.arc:Ct=M.rx,ge=M.ry,ke=M.xAxisRotation,Le=M.largeArcFlag,Be=M.sweepFlag,z=T?_e(Ft-1,L):Qs(Ft-1,0),I=v[z],Ne=I.x,re=I.y,Wt.renderSvgArcCommand(t,Ne,re,Ct,ge,Le,Be,ke,Rt,F);break;case G.curve:z=T?_e(Ft-1,L):Math.max(Ft-1,0),I=v[z],et=I.controls&&I.controls.right||K.zero,it=M.controls&&M.controls.left||K.zero,I._relative?(Q=et.x+I.x,ft=et.y+I.y):(Q=et.x,ft=et.y),M._relative?(W=it.x+M.x,Z=it.y+M.y):(W=it.x,Z=it.y),t.bezierCurveTo(Q,ft,W,Z,Rt,F),Ft>=B&&T&&(X=Y,yt=M.controls&&M.controls.right||K.zero,st=X.controls&&X.controls.left||K.zero,M._relative?(Q=yt.x+M.x,ft=yt.y+M.y):(Q=yt.x,ft=yt.y),X._relative?(W=st.x+X.x,Z=st.y+X.y):(W=st.x,Z=st.y),Rt=X.x,F=X.y,t.bezierCurveTo(Q,ft,W,Z,Rt,F));break;case G.line:t.lineTo(Rt,F);break;case G.move:Y=M,t.moveTo(Rt,F);break}return T&&t.closePath(),!lt&&!n&&(Wt.isHidden.test(f)||(tt=f._renderer&&f._renderer.offset,tt&&(t.save(),t.translate(-f._renderer.offset.x,-f._renderer.offset.y),t.scale(f._renderer.scale.x,f._renderer.scale.y)),t.fill(),tt&&t.restore()),Wt.isHidden.test(o)||(tt=o._renderer&&o._renderer.offset,tt&&(t.save(),t.translate(-o._renderer.offset.x,-o._renderer.offset.y),t.scale(o._renderer.scale.x,o._renderer.scale.y),t.lineWidth=u/o._renderer.scale.x),t.stroke(),tt&&t.restore())),V||t.restore(),lt&&!n&&t.clip(),Lt&&Lt.length>0&&t.setLineDash(Hs),this.flagReset()}},points:{render:function(t,i,n){let l,o,u,f,g,b,m,S,k,T,v,L,B,z,I,M;if(M=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,g=this._opacity*(M||1),b=this._visible,!i&&(!b||g===0))return this;this._update(),l=this._matrix.elements,o=this._stroke,u=this._linewidth,f=this._fill,S=this._renderer.collection,k=S.length,B=ns(l),I=this.dashes,m=this._size,B||(t.save(),t.transform(l[0],l[3],l[1],l[4],l[2],l[5])),f&&(typeof f=="string"?t.fillStyle=f:(Wt[f._renderer.type].render.call(f,t,this),t.fillStyle=f._renderer.effect)),o&&(typeof o=="string"?t.strokeStyle=o:(Wt[o._renderer.type].render.call(o,t,this),t.strokeStyle=o._renderer.effect),u&&(t.lineWidth=u)),typeof g=="number"&&(t.globalAlpha=g),I&&I.length>0&&(t.lineDashOffset=I.offset||0,t.setLineDash(I)),t.beginPath();let X=m*.5,Y;this._sizeAttenuation||(Y=this.worldMatrix.elements,Y=hi(Y[0],Y[3],Y[1],Y[4],Y[2],Y[5]),X/=Math.max(Y.scaleX,Y.scaleY));for(let W=0;W<k;W++)T=S[W],v=T.x,L=T.y,t.moveTo(v+X,L),t.arc(v,L,X,0,ie);return n||(Wt.isHidden.test(f)||(z=f._renderer&&f._renderer.offset,z&&(t.save(),t.translate(-f._renderer.offset.x,-f._renderer.offset.y),t.scale(f._renderer.scale.x,f._renderer.scale.y)),t.fill(),z&&t.restore()),Wt.isHidden.test(o)||(z=o._renderer&&o._renderer.offset,z&&(t.save(),t.translate(-o._renderer.offset.x,-o._renderer.offset.y),t.scale(o._renderer.scale.x,o._renderer.scale.y),t.lineWidth=u/o._renderer.scale.x),t.stroke(),z&&t.restore())),B||t.restore(),I&&I.length>0&&t.setLineDash(Hs),this.flagReset()}},text:{render:function(t,i,n){const l=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,o=this._opacity*l,u=this._visible,f=this._mask,g=this._clip;if(!i&&(!u||g||o===0))return this;this._update();const b=this._matrix.elements,m=this._stroke,S=this._linewidth,k=this._fill,T=this._decoration,v=this._direction,L=ns(b),B=k._renderer&&k._renderer.offset&&m._renderer&&m._renderer.offset,z=this.dashes,I=Wt.alignments[this._alignment]||this._alignment,M=Wt.baselines[this._baseline]||this._baseline;let X,Y,W,Z,Q,ft,et,it,yt,st,Rt;if(L||(t.save(),t.transform(b[0],b[3],b[1],b[4],b[2],b[5])),f&&Wt[f._renderer.type].render.call(f,t,!0),B||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=I,t.textBaseline=M,t.direction=v,k&&(typeof k=="string"?t.fillStyle=k:(Wt[k._renderer.type].render.call(k,t,this),t.fillStyle=k._renderer.effect)),m&&(typeof m=="string"?t.strokeStyle=m:(Wt[m._renderer.type].render.call(m,t,this),t.strokeStyle=m._renderer.effect),S&&(t.lineWidth=S)),typeof o=="number"&&(t.globalAlpha=o),z&&z.length>0&&(t.lineDashOffset=z.offset||0,t.setLineDash(z)),!g&&!n&&(Wt.isHidden.test(k)||(k._renderer&&k._renderer.offset?(ft=k._renderer.scale.x,et=k._renderer.scale.y,t.save(),t.translate(-k._renderer.offset.x,-k._renderer.offset.y),t.scale(ft,et),X=this._size/k._renderer.scale.y,Y=this._leading/k._renderer.scale.y,t.font=[this._style,this._weight,X+"px/",Y+"px",this._family].join(" "),W=k._renderer.offset.x/k._renderer.scale.x,Z=k._renderer.offset.y/k._renderer.scale.y,t.fillText(this.value,W,Z),t.restore()):t.fillText(this.value,0,0)),Wt.isHidden.test(m)||(m._renderer&&m._renderer.offset?(ft=m._renderer.scale.x,et=m._renderer.scale.y,t.save(),t.translate(-m._renderer.offset.x,-m._renderer.offset.y),t.scale(ft,et),X=this._size/m._renderer.scale.y,Y=this._leading/m._renderer.scale.y,t.font=[this._style,this._weight,X+"px/",Y+"px",this._family].join(" "),W=m._renderer.offset.x/m._renderer.scale.x,Z=m._renderer.offset.y/m._renderer.scale.y,Q=S/m._renderer.scale.x,t.lineWidth=Q,t.strokeText(this.value,W,Z),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(T)){const F=t.measureText(this.value);let wt=1;switch(T){case"underline":yt=F.actualBoundingBoxDescent,Rt=F.actualBoundingBoxDescent;break;case"strikethrough":yt=0,Rt=0,wt=.5;break}switch(M){case"top":yt+=this._size*wt,Rt+=this._size*wt;break;case"baseline":case"bottom":yt-=this._size*wt,Rt-=this._size*wt;break}switch(I){case"left":case"start":it=0,st=F.width;break;case"right":case"end":it=-F.width,st=0;break;default:it=-F.width/2,st=F.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(it,yt),t.lineTo(st,Rt),t.stroke()}return L||t.restore(),g&&!n&&t.clip(),z&&z.length>0&&t.setLineDash(Hs),this.flagReset()}},"linear-gradient":{render:function(t,i){if(i){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let n,l=this.left._x,o=this.left._y,u=this.right._x,f=this.right._y;/objectBoundingBox/i.test(this._units)&&(n=i.getBoundingClientRect(!0),l=(l-.5)*n.width,o=(o-.5)*n.height,u=(u-.5)*n.width,f=(f-.5)*n.height),this._renderer.effect=t.createLinearGradient(l,o,u,f);for(let g=0;g<this.stops.length;g++){const b=this.stops[g];this._renderer.effect.addColorStop(b._offset,b._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,i){if(i){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let n,l=this.center._x,o=this.center._y,u=this.focal._x,f=this.focal._y,g=this._radius;/objectBoundingBox/i.test(this._units)&&(n=i.getBoundingClientRect(!0),l=(l-.5)*n.width*.5,o=(o-.5)*n.height*.5,u=(u-.5)*n.width*.5,f=(f-.5)*n.height*.5,g*=Math.min(n.width,n.height)),this._renderer.effect=t.createRadialGradient(l,o,0,u,f,g);for(let b=0;b<this.stops.length;b++){const m=this.stops[b];this._renderer.effect.addColorStop(m._offset,m._color)}}return this.flagReset()}}},texture:{render:function(t){this._update();const i=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof K||(this._renderer.offset=new K),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof K?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,i,n,l,o,u,f,g,b,m){g=g*Math.PI/180,l=gn(l),o=gn(o);const S=(i-b)/2,k=(n-m)/2,T=rs(g)*S+ss(g)*k,v=-ss(g)*S+rs(g)*k,L=T*T,B=v*v;let z=l*l,I=o*o;const M=L/z+B/I;if(M>1){const F=ms(M);l=F*l,o=F*o,z=l*l,I=o*o}const X=z*B+I*L,Y=(z*I-X)/X;let W=ms(Qs(0,Y));u===f&&(W=-W);const Z=W*l*v/o,Q=-W*o*T/l,ft=rs(g)*Z-ss(g)*Q+(i+b)/2,et=ss(g)*Z+rs(g)*Q+(n+m)/2,it=pn(1,0,(T-Z)/l,(v-Q)/o),yt=pn((T-Z)/l,(v-Q)/o,(-T-Z)/l,(-v-Q)/o)%ie,st=it+yt;Tl(t,ft,et,l,o,it,st,f===0,g)}},fi=class extends U{constructor(t){super();const i=t.smoothing!==!1;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,typeof this.ctx.imageSmoothingEnabled<"u"&&(this.ctx.imageSmoothingEnabled=i),this.scene=new Gt,this.scene.parent=this}setSize(t,i,n){return this.width=t,this.height=i,this.ratio=typeof n>"u"?nr(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=i*this.ratio,this.domElement.style&&nt.extend(this.domElement.style,{width:t+"px",height:i+"px"}),this.trigger(U.Types.resize,t,i,n)}render(){const t=this.ratio===1;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),Wt.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}};y(fi,"Utils",Wt);function Tl(t,i,n,l,o,u,f,g,b){const m=f-u,S=ci.Tolerance.epsilon,k=Math.abs(m)<S;let T=_e(m,ie);T<S&&(k?T=0:T=ie),g===!0&&!k&&(T===ie?T=-ie:T=T-ie);for(let v=0;v<Jt.Resolution;v++){const L=v/(Jt.Resolution-1),B=u+L*T;let z=i+l*Math.cos(B),I=n+o*Math.sin(B);if(b!==0){const M=Math.cos(b),X=Math.sin(b),Y=z-i,W=I-n;z=Y*M-W*X+i,I=Y*X+W*M+n}t.lineTo(z,I)}}function pn(t,i,n,l){const o=t*n+i*l,u=ms(t*t+i*i)*ms(n*n+l*l);let f=Rl(Qs(-1,Sl(1,o/u)));return t*l-i*n<0&&(f=-f),f}function ns(t){return t[0]==1&&t[3]==0&&t[1]==0&&t[4]==1&&t[2]==0&&t[5]==0}var ue={Image:null,isHeadless:!1,shim:function(t,i){return fi.Utils.shim(t),typeof i<"u"&&(ue.Image=i),ue.isHeadless=!0,t}},fe={hasEventListeners:typeof Vt.addEventListener=="function",bind:function(t,i,n,l){return this.hasEventListeners?t.addEventListener(i,n,!!l):t.attachEvent("on"+i,n),fe},unbind:function(t,i,n,l){return fe.hasEventListeners?t.removeEventListeners(i,n,!!l):t.detachEvent("on"+i,n),fe},getRequestAnimationFrame:function(){const t=["ms","moz","webkit","o"];let i=0,n=Vt.requestAnimationFrame;if(!n){for(let o=0;o<t.length;o++)n=Vt[t[o]+"RequestAnimationFrame"]||n;n=n||l}function l(o,u){const f=new Date().getTime(),g=Math.max(0,16-(f-i)),b=Vt.setTimeout(m,g);i=f+g;function m(){o(f+g)}return b}return n}},oi=Vt.document?Vt.document.createElement("div"):{};oi.id="help-two-load";Object.defineProperty(fe,"temp",{enumerable:!0,get:function(){return nt.isElement(oi)&&!Vt.document.head.contains(oi)&&(oi.style.display="none",Vt.document.head.appendChild(oi)),oi}});var de=class extends Error{constructor(t){super(),y(this,"name","Two.js"),y(this,"message"),this.message=t}},xs=class{constructor(){y(this,"map",{})}add(t,i){return this.map[t]=i,this}remove(t){return delete this.map[t],this}get(t){return this.map[t]}contains(t){return t in this.map}};function mn(t,i){if(i===0||i===1)return!0;const l=t._length*i;let o=0;for(let u=0;u<t._lengths.length;u++){const f=t._lengths[u];if(o>=l)return l-o>=0;o+=f}return!1}function ys(t,i){const n=t._length;if(i<=0)return 0;if(i>=n)return t._lengths.length-1;for(let l=0,o=0;l<t._lengths.length;l++){if(o+t._lengths[l]>=i)return i-=o,Math.max(l-1,0)+i/t._lengths[l];o+=t._lengths[l]}return-1}function tr(t,i,n){let l,o,u,f,g,b,m,S;const k=i.controls&&i.controls.right,T=t.controls&&t.controls.left;return l=i.x,g=i.y,o=(k||i).x,b=(k||i).y,u=(T||t).x,m=(T||t).y,f=t.x,S=t.y,k&&i._relative&&(o+=i.x,b+=i.y),T&&t._relative&&(u+=t.x,m+=t.y),Qn(l,g,o,b,u,m,f,S,n)}function yn(t,i,n){let l,o,u,f,g,b,m,S;const k=i.controls&&i.controls.right,T=t.controls&&t.controls.left;return l=i.x,g=i.y,o=(k||i).x,b=(k||i).y,u=(T||t).x,m=(T||t).y,f=t.x,S=t.y,k&&i._relative&&(o+=i.x,b+=i.y),T&&t._relative&&(u+=t.x,m+=t.y),rr(l,g,o,b,u,m,f,S,n)}var Ye=class extends bs{constructor(t,i,n){super(),y(this,"_flagOffset",!0),y(this,"_flagOpacity",!0),y(this,"_flagColor",!0),y(this,"_offset",0),y(this,"_opacity",1),y(this,"_color","#fff");for(let l in bn)Object.defineProperty(this,l,bn[l]);this._renderer.type="stop",this.offset=typeof t=="number"?t:Ye.Index<=0?0:1,this.opacity=typeof n=="number"?n:1,this.color=typeof i=="string"?i:Ye.Index<=0?"#fff":"#000",Ye.Index=(Ye.Index+1)%2}clone(t){const i=new Ye;return nt.each(Ye.Properties,function(n){i[n]=this[n]},this),t&&t.stops&&t.stops.push(i),i}toObject(){const t={};return nt.each(Ye.Properties,function(i){t[i]=this[i]},this),t}flagReset(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,super.flagReset.call(this),this}},Ge=Ye;y(Ge,"Index",0);y(Ge,"Properties",["offset","opacity","color"]);var bn={offset:{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset=t,this._flagOffset=!0,this.parent&&(this.parent._flagStops=!0)}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0,this.parent&&(this.parent._flagStops=!0)}},color:{enumerable:!0,get:function(){return this._color},set:function(t){this._color=t,this._flagColor=!0,this.parent&&(this.parent._flagStops=!0)}}},os=class extends bs{constructor(t){super(),y(this,"_flagStops",!1),y(this,"_flagSpread",!1),y(this,"_flagUnits",!1),y(this,"_spread",""),y(this,"_units","");for(let i in xn)Object.defineProperty(this,i,xn[i]);this._renderer.type="gradient",this.id=Jt.Identifier+Jt.uniqueId(),this.classList=[],this._renderer.flagStops=El.bind(this),this._renderer.bindStops=Fl.bind(this),this._renderer.unbindStops=Ml.bind(this),this.spread="pad",this.units="objectBoundingBox",t&&(this.stops=t)}clone(t){const i=this.stops.map(function(l){return l.clone()}),n=new os(i);return nt.each(os.Properties,function(l){n[l]=this[l]},this),t&&t.add(n),n}toObject(){const t={stops:this.stops.map(function(i){return i.toObject()})};return nt.each(os.Properties,function(i){t[i]=this[i]},this),t}_update(){return(this._flagSpread||this._flagStops)&&this.trigger(U.Types.change),this}flagReset(){return this._flagSpread=this._flagUnits=this._flagStops=!1,super.flagReset.call(this),this}},$t=os;y($t,"Stop",Ge);y($t,"Properties",["spread","stops","renderer","units"]);var xn={spread:{enumerable:!0,get:function(){return this._spread},set:function(t){this._spread=t,this._flagSpread=!0}},units:{enumerable:!0,get:function(){return this._units},set:function(t){this._units=t,this._flagUnits=!0}},stops:{enumerable:!0,get:function(){return this._stops},set:function(t){const i=this._renderer.bindStops,n=this._renderer.unbindStops;this._stops&&this._stops.unbind(U.Types.insert,i).unbind(U.Types.remove,n),this._stops=new qe((t||[]).slice(0)),this._stops.bind(U.Types.insert,i).bind(U.Types.remove,n),i(this._stops)}}};function El(){this._flagStops=!0}function Fl(t){let i=t.length;for(;i--;)t[i].bind(U.Types.change,this._renderer.flagStops),t[i].parent=this;this._renderer.flagStops()}function Ml(t){let i=t.length;for(;i--;)t[i].unbind(U.Types.change,this._renderer.flagStops),delete t[i].parent;this._renderer.flagStops()}var la=class extends $t{constructor(t,i,n,l,o){super(o),y(this,"_flagEndPoints",!1),y(this,"_left",null),y(this,"_right",null);for(let u in vn)Object.defineProperty(this,u,vn[u]);this._renderer.type="linear-gradient",this._renderer.flagEndPoints=Cl.bind(this),this.left=new K,this.right=new K,typeof t=="number"&&(this.left.x=t),typeof i=="number"&&(this.left.y=i),typeof n=="number"&&(this.right.x=n),typeof l=="number"&&(this.right.y=l)}clone(t){const i=this.stops.map(function(l){return l.clone()}),n=new la(this.left._x,this.left._y,this.right._x,this.right._y,i);return nt.each($t.Properties,function(l){n[l]=this[l]},this),t&&t.add(n),n}toObject(){const t=super.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t}_update(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(U.Types.change),this}flagReset(){return this._flagEndPoints=!1,super.flagReset.call(this),this}},jt=la;y(jt,"Properties",["left","right"]);y(jt,"Stop",Ge);var vn={left:{enumerable:!0,get:function(){return this._left},set:function(t){this._left instanceof K&&this._left.unbind(U.Types.change,this._renderer.flagEndPoints),this._left=t,this._left.bind(U.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}},right:{enumerable:!0,get:function(){return this._right},set:function(t){this._right instanceof K&&this._right.unbind(U.Types.change,this._renderer.flagEndPoints),this._right=t,this._right.bind(U.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}}};function Cl(){this._flagEndPoints=!0}var hs=class extends $t{constructor(t,i,n,l,o,u){super(l),y(this,"_flagRadius",!1),y(this,"_flagCenter",!1),y(this,"_flagFocal",!1),y(this,"_radius",0),y(this,"_center",null),y(this,"_focal",null);for(let f in wn)Object.defineProperty(this,f,wn[f]);this._renderer.type="radial-gradient",this._renderer.flagCenter=Ol.bind(this),this._renderer.flagFocal=Ll.bind(this),this.center=new K,this.radius=typeof n=="number"?n:1,this.focal=new K,typeof t=="number"&&(this.center.x=t),typeof i=="number"&&(this.center.y=i),this.focal.copy(this.center),typeof o=="number"&&(this.focal.x=o),typeof u=="number"&&(this.focal.y=u)}clone(t){const i=this.stops.map(function(l){return l.clone()}),n=new hs(this.center._x,this.center._y,this._radius,i,this.focal._x,this.focal._y);return nt.each($t.Properties.concat(hs.Properties),function(l){n[l]=this[l]},this),t&&t.add(n),n}toObject(){const t=super.toObject.call(this);return nt.each(hs.Properties,function(i){t[i]=this[i]},this),t.center=this.center.toObject(),t.focal=this.focal.toObject(),t}_update(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(U.Types.change),this}flagReset(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,super.flagReset.call(this),this}},zt=hs;y(zt,"Stop",Ge);y(zt,"Properties",["center","radius","focal"]);var wn={radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius=t,this._flagRadius=!0}},center:{enumerable:!0,get:function(){return this._center},set:function(t){this._center&&this._center.unbind(U.Types.change,this._renderer.flagCenter),this._center=t,this._center.bind(U.Types.change,this._renderer.flagCenter),this._flagCenter=!0}},focal:{enumerable:!0,get:function(){return this._focal},set:function(t){this._focal&&this._focal.unbind(U.Types.change,this._renderer.flagFocal),this._focal=t,this._focal.bind(U.Types.change,this._renderer.flagFocal),this._flagFocal=!0}}};function Ol(){this._flagCenter=!0}function Ll(){this._flagFocal=!0}var cs,oa={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};Vt.document&&(cs=document.createElement("a"));var Qt=class extends bs{constructor(t,i){super(),y(this,"_flagSrc",!1),y(this,"_flagImage",!1),y(this,"_flagVideo",!1),y(this,"_flagLoaded",!1),y(this,"_flagRepeat",!1),y(this,"_flagOffset",!1),y(this,"_flagScale",!1),y(this,"_src",""),y(this,"_image",null),y(this,"_loaded",!1),y(this,"_repeat","no-repeat"),y(this,"_scale",1),y(this,"_offset",null),this._renderer={};for(let n in kn)Object.defineProperty(this,n,kn[n]);if(this._renderer.type="texture",this._renderer.flagOffset=Pl.bind(this),this._renderer.flagScale=Il.bind(this),this.id=Jt.Identifier+Jt.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new K,typeof i=="function"){const n=(function(){this.unbind(U.Types.load,n),typeof i=="function"&&i()}).bind(this);this.bind(U.Types.load,n)}if(typeof t=="string")this.src=t;else if(typeof t=="object"){const n=Object.prototype.toString.call(t);(n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]"||n==="[object HTMLVideoElement]"||n==="[object Image]")&&(this.image=t)}this._update()}static getAbsoluteURL(t){return cs?(cs.href=t,cs.href):t}static loadHeadlessBuffer(t,i){t.image.onload=i,t.image.src=t.src}static getTag(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"}static getImage(t){const i=Qt.getAbsoluteURL(t);if(Qt.ImageRegistry.contains(i))return Qt.ImageRegistry.get(i);let n;return ue.Image?(n=new ue.Image,fi.Utils.shim(n,"img")):Vt.document?oa.video.test(i)?n=document.createElement("video"):n=document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),n.crossOrigin="anonymous",n.referrerPolicy="no-referrer",n}static load(t,i){let n=t.image,l=Qt.getTag(n);t._flagImage&&(/canvas/i.test(l)?Qt.Register.canvas(t,i):(t._src=!ue.isHeadless&&n.getAttribute("two-src")||n.src,Qt.Register[l](t,i))),t._flagSrc&&(n||(n=Qt.getImage(t.src),t.image=n),l=Qt.getTag(n),Qt.Register[l](t,i))}clone(){const t=new Qt(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t}toObject(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:typeof this.scale=="number"?this.scale:this.scale.toObject()}}_update(){return(this._flagSrc||this._flagImage)&&(this.trigger(U.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,Qt.load(this,(function(){this.loaded=!0,this.trigger(U.Types.change).trigger(U.Types.load)}).bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this}flagReset(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagRepeat=this._flagVideo=this._flagScale=this._flagOffset=!1,super.flagReset.call(this),this}},Et=Qt;y(Et,"Properties",["src","loaded","repeat","scale","offset","image"]);y(Et,"RegularExpressions",oa);y(Et,"ImageRegistry",new xs);y(Et,"Register",{canvas:function(t,i){t._src="#"+t.id,Qt.ImageRegistry.add(t.src,t.image),typeof i=="function"&&i()},img:function(t,i){const n=t.image,l=function(u){!ue.isHeadless&&n.removeEventListener&&typeof n.removeEventListener=="function"&&(n.removeEventListener("load",l,!1),n.removeEventListener("error",o,!1)),typeof i=="function"&&i()},o=function(u){throw!ue.isHeadless&&typeof n.removeEventListener=="function"&&(n.removeEventListener("load",l,!1),n.removeEventListener("error",o,!1)),new de("unable to load "+t.src)};typeof n.width=="number"&&n.width>0&&typeof n.height=="number"&&n.height>0?l():!ue.isHeadless&&typeof n.addEventListener=="function"&&(n.addEventListener("load",l,!1),n.addEventListener("error",o,!1)),t._src=Qt.getAbsoluteURL(t._src),!(!ue.isHeadless&&n&&n.getAttribute("two-src"))&&(ue.isHeadless||n.setAttribute("two-src",t.src),Qt.ImageRegistry.add(t.src,n),ue.isHeadless?Qt.loadHeadlessBuffer(t,l):t.image.src=t.src)},video:function(t,i){if(ue.isHeadless)throw new de("video textures are not implemented in headless environments.");const n=function(o){t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",l,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,typeof i=="function"&&i()},l=function(o){throw t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",l,!1),new de("unable to load "+t.src)};t._src=Qt.getAbsoluteURL(t._src),t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),Qt.ImageRegistry.add(t.src,t.image)),t.image.readyState>=4?n():(t.image.addEventListener("canplaythrough",n,!1),t.image.addEventListener("error",l,!1),t.image.src=t.src,t.image.load())}});var kn={src:{enumerable:!0,get:function(){return this._src},set:function(t){this._src=t,this._flagSrc=!0}},loaded:{enumerable:!0,get:function(){return this._loaded},set:function(t){this._loaded=t,this._flagLoaded=!0}},repeat:{enumerable:!0,get:function(){return this._repeat},set:function(t){this._repeat=t,this._flagRepeat=!0}},image:{enumerable:!0,get:function(){return this._image},set:function(t){const i=Et.getTag(t);let n;switch(i){case"canvas":n="#"+t.id;break;default:n=t.src}Et.ImageRegistry.contains(n)?this._image=Et.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}},offset:{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(U.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(U.Types.change,this._renderer.flagOffset),this._flagOffset=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof K&&this._scale.unbind(U.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof K&&this._scale.bind(U.Types.change,this._renderer.flagScale),this._flagScale=!0}}};function Pl(){this._flagOffset=!0}function Il(){this._flagScale=!0}var ni=Math.min,ai=Math.max,Bl=Math.ceil,Nl=Math.floor,jl=new K,ki=class extends He{constructor(t,i,n,l){super(),y(this,"_flagVertices",!0),y(this,"_flagLength",!0),y(this,"_flagFill",!0),y(this,"_flagStroke",!0),y(this,"_flagLinewidth",!0),y(this,"_flagOpacity",!0),y(this,"_flagVisible",!0),y(this,"_flagCap",!0),y(this,"_flagJoin",!0),y(this,"_flagMiter",!0),y(this,"_flagMask",!1),y(this,"_flagClip",!1),y(this,"_length",0),y(this,"_fill","#fff"),y(this,"_stroke","#000"),y(this,"_linewidth",1),y(this,"_opacity",1),y(this,"_visible",!0),y(this,"_cap","round"),y(this,"_join","round"),y(this,"_miter",4),y(this,"_closed",!0),y(this,"_curved",!1),y(this,"_automatic",!0),y(this,"_beginning",0),y(this,"_ending",1),y(this,"_mask",null),y(this,"_clip",!1),y(this,"_dashes",null);for(let o in An)Object.defineProperty(this,o,An[o]);this._renderer.type="path",this._renderer.flagVertices=ha.bind(this),this._renderer.bindVertices=ca.bind(this),this._renderer.unbindVertices=fa.bind(this),this._renderer.flagFill=ua.bind(this),this._renderer.flagStroke=da.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this.closed=!!i,this.curved=!!n,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!l,this.dashes=[],this.dashes.offset=0}clone(t){const i=new ki;for(let n=0;n<this.vertices.length;n++)i.vertices.push(this.vertices[n].clone());for(let n=0;n<ki.Properties.length;n++){const l=ki.Properties[n];i[l]=this[l]}return i.className=this.className,i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,i.skewX=this.skewX,i.skewY=this.skewY,this.matrix.manual&&i.matrix.copy(this.matrix),t&&t.add(i),i._update()}toObject(){const t={vertices:this.vertices.map(function(i){return i.toObject()})};return nt.each(ki.Properties,function(i){typeof this[i]<"u"&&(this[i].toObject?t[i]=this[i].toObject():t[i]=this[i])},this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof K?this.scale.toObject():this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t}noFill(){return this.fill="none",this}noStroke(){return this.stroke="none",this}corner(){const t=this.getBoundingClientRect(!0),i=t.width/2,n=t.height/2,l=t.left+t.width/2,o=t.top+t.height/2;for(let u=0;u<this.vertices.length;u++){const f=this.vertices[u];f.x-=l,f.y-=o,f.x+=i,f.y+=n}return this.mask&&(this.mask.translation.x-=l,this.mask.translation.x+=i,this.mask.translation.y-=o,this.mask.translation.y+=n),this}center(){const t=this.getBoundingClientRect(!0),i=t.left+t.width/2-this.translation.x,n=t.top+t.height/2-this.translation.y;for(let l=0;l<this.vertices.length;l++){const o=this.vertices[l];o.x-=i,o.y-=n}return this.mask&&(this.mask.translation.x-=i,this.mask.translation.y-=n),this}getBoundingClientRect(t){let i,n,l,o,u,f,g=1/0,b=-1/0,m=1/0,S=-1/0;if(this._update(!0),i=t?this.matrix:this.worldMatrix,n=(this.linewidth||0)/2,l=this._renderer.vertices.length,this.linewidth>0||this.stroke&&!/(transparent|none)/i.test(this.stroke))if(this.matrix.manual){const{scaleX:k,scaleY:T}=hi(i.elements[0],i.elements[3],i.elements[1],i.elements[4],i.elements[2],i.elements[5]);typeof k=="number"&&typeof T=="number"&&(n=Math.max(k,T)*(this.linewidth||0)/2)}else n*=typeof this.scale=="number"?this.scale:Math.max(this.scale.x,this.scale.y);if(l<=0)return{width:0,height:0};for(o=0;o<l;o++){f=this._renderer.vertices[o],u=this._renderer.vertices[(o+l-1)%l];const[k,T]=i.multiply(u.x,u.y),[v,L]=i.multiply(f.x,f.y);if(u.controls&&f.controls){let B=u.controls.right.x,z=u.controls.right.y;u.relative&&(B+=u.x,z+=u.y);let[I,M]=i.multiply(B,z),X=f.controls.left.x,Y=f.controls.left.y;f.relative&&(X+=f.x,Y+=f.y);let[W,Z]=i.multiply(X,Y);const Q=ta(k,T,I,M,W,Z,v,L);m=ni(Q.min.y-n,m),g=ni(Q.min.x-n,g),b=ai(Q.max.x+n,b),S=ai(Q.max.y+n,S)}else o<=1&&(m=ni(T-n,m),g=ni(k-n,g),b=ai(k+n,b),S=ai(T+n,S)),m=ni(L-n,m),g=ni(v-n,g),b=ai(v+n,b),S=ai(L+n,S)}return{top:m,left:g,right:b,bottom:S,width:b-g,height:S-m}}getPointAt(t,i){let n,l,o,u,f,g,b,m,S,k,T,v,L,B,z,I=this.length*Math.min(Math.max(t,0),1);const M=this.vertices.length,X=M-1;let Y=null,W=null;for(let lt=0,V=this._lengths.length,tt=0;lt<V;lt++){if(tt+this._lengths[lt]>=I){this._closed?(n=_e(lt,M),l=_e(lt-1,M),lt===0&&(n=l,l=lt)):(n=lt,l=Math.min(Math.max(lt-1,0),X)),Y=this.vertices[n],W=this.vertices[l],I-=tt,this._lengths[lt]!==0?t=I/this._lengths[lt]:t=0;break}tt+=this._lengths[lt]}if(Y===null||W===null)return null;if(Y){if(!W)return Y}else return W;z=W.controls&&W.controls.right,B=Y.controls&&Y.controls.left,f=W.x,k=W.y,g=(z||W).x,T=(z||W).y,b=(B||Y).x,v=(B||Y).y,m=Y.x,L=Y.y,z&&W.relative&&(g+=W.x,T+=W.y),B&&Y.relative&&(b+=Y.x,v+=Y.y),u=Ri(t,f,g,b,m),S=Ri(t,k,T,v,L);const Z=ce(f,g,t),Q=ce(k,T,t),ft=ce(g,b,t),et=ce(T,v,t),it=ce(b,m,t),yt=ce(v,L,t),st=ce(Z,ft,t),Rt=ce(Q,et,t),F=ce(ft,it,t),wt=ce(et,yt,t);return nt.isObject(i)?(i.x=u,i.y=S,i instanceof xt&&(i.controls.left.x=st,i.controls.left.y=Rt,i.controls.right.x=F,i.controls.right.y=wt,(typeof i.relative!="boolean"||i.relative)&&(i.controls.left.x-=u,i.controls.left.y-=S,i.controls.right.x-=u,i.controls.right.y-=S)),i.t=t,i):(o=new xt(u,S,st-u,Rt-S,F-u,wt-S,this._curved?G.curve:G.line),o.t=t,o)}plot(){if(this.curved)return ia(this._collection,this.closed),this;for(let t=0;t<this._collection.length;t++)this._collection[t].command=t===0?G.move:G.line;return this}subdivide(t){this._update();const i=this.vertices.length-1,n=this._closed||this.vertices[i]._command===G.close;let l=this.vertices[i],o=[],u;return nt.each(this.vertices,function(f,g){if(g<=0&&!n){l=f;return}if(f.command===G.move){o.push(new xt(l.x,l.y)),g>0&&(o[o.length-1].command=G.line),l=f;return}u=yn(f,l,t),o=o.concat(u),nt.each(u,function(b,m){m<=0&&l.command===G.move?b.command=G.move:b.command=G.line}),g>=i&&(this._closed&&this._automatic?(l=f,u=yn(f,l,t),o=o.concat(u),nt.each(u,function(b,m){m<=0&&l.command===G.move?b.command=G.move:b.command=G.line})):n&&o.push(new xt(f.x,f.y)),o[o.length-1].command=n?G.close:G.line),l=f},this),this._automatic=!1,this._curved=!1,this.vertices=o,this}_updateLength(t,i){i||this._update();const n=this.vertices.length,l=n-1,o=!1;let u=this.vertices[l],f=0;return typeof this._lengths>"u"&&(this._lengths=[]),nt.each(this.vertices,function(g,b){if(b<=0&&!o||g.command===G.move){u=g,this._lengths[b]=0;return}this._lengths[b]=tr(g,u,t),f+=this._lengths[b],b>=l&&o&&(u=this.vertices[(b+1)%n],this._lengths[b+1]=tr(g,u,t),f+=this._lengths[b+1]),u=g},this),this._length=f,this._flagLength=!1,this}_update(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);const t=this._collection.length,i=this._closed,n=Math.min(this._beginning,this._ending),l=Math.max(this._beginning,this._ending),o=ys(this,n*this._length),u=ys(this,l*this._length),f=Bl(o),g=Nl(u);let b,m,S,k,T,v;for(this._renderer.vertices.length=0,v=0;v<t;v++)this._renderer.collection.length<=v&&this._renderer.collection.push(new xt),v>g&&!m?(T=this._renderer.collection[v].copy(this._collection[v]),this.getPointAt(l,T),T.command=this._renderer.collection[v].command,this._renderer.vertices.push(T),m=T,S=this._collection[v-1],S&&S.controls&&(T.relative?T.controls.right.clear():T.controls.right.copy(T),S.relative?this._renderer.collection[v-1].controls.right.copy(S.controls.right).lerp(K.zero,1-T.t):this._renderer.collection[v-1].controls.right.copy(S.controls.right).lerp(S,1-T.t))):v>=f&&v<=g&&(T=this._renderer.collection[v].copy(this._collection[v]),this._renderer.vertices.push(T),v===g&&mn(this,l)?(m=T,!i&&m.controls&&(m.relative?m.controls.right.clear():m.controls.right.copy(m))):v===f&&mn(this,n)&&(b=T,b.command=G.move,!i&&b.controls&&(b.relative?b.controls.left.clear():b.controls.left.copy(b))));f>0&&!b&&(v=f-1,T=this._renderer.collection[v].copy(this._collection[v]),this.getPointAt(n,T),T.command=G.move,this._renderer.vertices.unshift(T),k=this._collection[v+1],k&&k.controls&&(T.controls.left.clear(),k.relative?this._renderer.collection[v+1].controls.left.copy(k.controls.left).lerp(K.zero,T.t):(jl.copy(k),this._renderer.collection[v+1].controls.left.copy(k.controls.left).lerp(k,T.t))))}return He.prototype._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,He.prototype.flagReset.call(this),this}},St=ki;y(St,"Properties",["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"]);y(St,"Utils",{getCurveLength:tr});var An={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._visible=t,this._flagVisible=!0}},cap:{enumerable:!0,get:function(){return this._cap},set:function(t){this._cap=t,this._flagCap=!0}},join:{enumerable:!0,get:function(){return this._join},set:function(t){this._join=t,this._flagJoin=!0}},miter:{enumerable:!0,get:function(){return this._miter},set:function(t){this._miter=t,this._flagMiter=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof $t||this._fill instanceof jt||this._fill instanceof zt||this._fill instanceof Et)&&this._fill.unbind(U.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof $t||this._fill instanceof jt||this._fill instanceof zt||this._fill instanceof Et)&&this._fill.bind(U.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof $t||this._stroke instanceof jt||this._stroke instanceof zt||this._stroke instanceof Et)&&this._stroke.unbind(U.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof $t||this._stroke instanceof jt||this._stroke instanceof zt||this._stroke instanceof Et)&&this._stroke.bind(U.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},closed:{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}},curved:{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t===this._automatic)return;this._automatic=!!t;const i=this._automatic?"ignore":"listen";nt.each(this.vertices,function(n){n[i]()})}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(t){const i=this._renderer.bindVertices,n=this._renderer.unbindVertices;this._collection&&this._collection.unbind(U.Types.insert,i).unbind(U.Types.remove,n),t instanceof qe?this._collection=t:this._collection=new qe(t||[]),this._collection.bind(U.Types.insert,i).bind(U.Types.remove,n),i(this._collection)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,nt.isObject(t)&&!t.clip&&(t.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(t){typeof t.offset!="number"&&(t.offset=this.dashes&&this._dashes.offset||0),this._dashes=t}}};function ha(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)}function ca(t){let i=t.length;for(;i--;)t[i].bind(U.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function fa(t){let i=t.length;for(;i--;)t[i].unbind(U.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function ua(){this._flagFill=!0}function da(){this._flagStroke=!0}var _a=class extends St{constructor(t,i,n,l){const o=[new xt,new xt,new xt,new xt];super(o,!0,!1,!0),y(this,"_flagWidth",0),y(this,"_flagHeight",0),y(this,"_width",0),y(this,"_height",0),y(this,"_origin",null);for(let u in Sn)Object.defineProperty(this,u,Sn[u]);this.width=typeof n=="number"?n:1,this.height=typeof l=="number"?l:1,this.origin=new K,typeof t=="number"&&(this.translation.x=t),typeof i=="number"&&(this.translation.y=i),this._update()}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){const t=this._width/2,i=this._height/2;!this._closed&&this.vertices.length===4&&this.vertices.push(new xt),this.vertices[0].set(-t,-i).sub(this._origin).command=G.move,this.vertices[1].set(t,-i).sub(this._origin).command=G.line,this.vertices[2].set(t,i).sub(this._origin).command=G.line,this.vertices[3].set(-t,i).sub(this._origin).command=G.line,this.vertices[4]&&(this.vertices[4].set(-t,-i).sub(this._origin).command=G.line)}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(t){const i=new _a(0,0,this.width,this.height);i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,i.skewX=this.skewX,i.skewY=this.skewY,this.matrix.manual&&i.matrix.copy(this.matrix);for(let n=0;n<St.Properties.length;n++){const l=St.Properties[n];i[l]=this[l]}return t&&t.add(i),i}toObject(){const t=super.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}},ti=_a;y(ti,"Properties",["width","height"]);var Sn={width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0}},origin:{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(U.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(U.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}}},ga=class extends ti{constructor(t,i,n,l,o,u){super(i,n,0,0),y(this,"_flagTexture",!1),y(this,"_flagColumns",!1),y(this,"_flagRows",!1),y(this,"_flagFrameRate",!1),y(this,"_flagIndex",!1),y(this,"_amount",1),y(this,"_duration",0),y(this,"_startTime",0),y(this,"_playing",!1),y(this,"_firstFrame",0),y(this,"_lastFrame",0),y(this,"_loop",!0),y(this,"_texture",null),y(this,"_columns",1),y(this,"_rows",1),y(this,"_frameRate",0),y(this,"_index",0),y(this,"_origin",null);for(let f in Rn)Object.defineProperty(this,f,Rn[f]);this.noStroke(),this.noFill(),t instanceof Et?this.texture=t:typeof t=="string"&&(this.texture=new Et(t)),this.origin=new K,this._update(),typeof l=="number"&&(this.columns=l),typeof o=="number"&&(this.rows=o),typeof u=="number"&&(this.frameRate=u),this.index=0}play(t,i,n){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=nt.performance.now(),typeof t=="number"&&(this._firstFrame=t),typeof i=="number"&&(this._lastFrame=i),typeof n=="function"?this._onLastFrame=n:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=0,this}clone(t){const i=new ga(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(i.play(this._firstFrame,this._lastFrame),i._loop=this._loop),t&&t.add(i),i}toObject(){const t=super.toObject.call(this);return t.texture=this.texture.toObject(),t.columns=this.columns,t.rows=this.rows,t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t}_update(){const t=this._texture,i=this._columns,n=this._rows;let l,o,u,f,g,b,m,S,k;if(t&&((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=t),t.loaded)){m=t.image.width,S=t.image.height,l=m/i,o=S/n,f=this._amount,this.width!==l&&(this.width=l),this.height!==o&&(this.height=o),this._playing&&this._frameRate>0&&(nt.isNaN(this._lastFrame)&&(this._lastFrame=f-1),u=nt.performance.now()-this._startTime,k=this._lastFrame+1,g=1e3*(k-this._firstFrame)/this._frameRate,this._loop?u=u%g:u=Math.min(u,g),b=ce(this._firstFrame,k,u/g),b=Math.floor(b),b!==this._index&&(this._index=b,b>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));const T=this._index%i,v=Math.floor(this._index/i),L=-l*T+(m-l)/2,B=-o*v+(S-o)/2;L!==t.offset.x&&(t.offset.x=L),B!==t.offset.y&&(t.offset.y=B)}return super._update.call(this),this}flagReset(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,super.flagReset.call(this),this}},vs=ga;y(vs,"Properties",["texture","columns","rows","frameRate","index"]);var Rn={texture:{enumerable:!0,get:function(){return this._texture},set:function(t){this._texture=t,this._flagTexture=!0}},columns:{enumerable:!0,get:function(){return this._columns},set:function(t){this._columns=t,this._flagColumns=!0}},rows:{enumerable:!0,get:function(){return this._rows},set:function(t){this._rows=t,this._flagRows=!0}},frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(t){this._frameRate=t,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(t){this._index=t,this._flagIndex=!0}}},qs=Math.cos,Gs=Math.sin,fs=class extends St{constructor(t,i,n,l){const o=l?Math.max(l,2):4,u=[];for(let f=0;f<o;f++)u.push(new xt(0,0,0,0,0,0));super(u,!0,!0,!0),y(this,"_flagRadius",!1),y(this,"_radius",0);for(let f in Tn)Object.defineProperty(this,f,Tn[f]);typeof n=="number"&&(this.radius=n),this._update(),typeof t=="number"&&(this.translation.x=t),typeof i=="number"&&(this.translation.y=i)}_update(){if(this._flagVertices||this._flagRadius){let t=this.vertices.length;!this._closed&&t>2&&(t-=1);const i=4/3*Math.tan(Math.PI/(t*2)),n=this._radius,l=n*i;for(let o=0;o<this.vertices.length;o++){const f=o/t*ie,g=n*qs(f),b=n*Gs(f),m=l*qs(f-Kt),S=l*Gs(f-Kt),k=l*qs(f+Kt),T=l*Gs(f+Kt),v=this.vertices[o];v.command=o===0?G.move:G.curve,v.set(g,b),v.controls.left.set(m,S),v.controls.right.set(k,T)}}return super._update.call(this),this}flagReset(){return this._flagRadius=!1,super.flagReset.call(this),this}clone(t){const i=new fs(0,0,this.radius,this.vertices.length);i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,i.skewX=this.skewX,i.skewY=this.skewY,this.matrix.manual&&i.matrix.copy(this.matrix);for(let n=0;n<St.Properties.length;n++){const l=St.Properties[n];i[l]=this[l]}return t&&t.add(i),i}toObject(){const t=super.toObject.call(this);for(let i=0;i<fs.Properties.length;i++){const n=fs.Properties[i];t[n]=this[n]}return t}},ws=fs;y(ws,"Properties",["radius"]);var Tn={radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius=t,this._flagRadius=!0}}},$s=Math.cos,Ks=Math.sin,us=class extends St{constructor(t,i,n,l,o){typeof l!="number"&&typeof n=="number"&&(l=n);const u=o?Math.max(o,2):4,f=[];for(let g=0;g<u;g++)f.push(new xt);super(f,!0,!0,!0),y(this,"_flagWidth",!1),y(this,"_flagHeight",!1),y(this,"_width",0),y(this,"_height",0);for(let g in En)Object.defineProperty(this,g,En[g]);typeof n=="number"&&(this.width=n*2),typeof l=="number"&&(this.height=l*2),this._update(),typeof t=="number"&&(this.translation.x=t),typeof i=="number"&&(this.translation.y=i)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){let t=this.vertices.length;!this._closed&&t>2&&(t-=1);const i=4/3*Math.tan(Math.PI/(this.vertices.length*2)),n=this._width/2,l=this._height/2;for(let o=0;o<this.vertices.length;o++){const f=o/t*ie,g=n*$s(f),b=l*Ks(f),m=n*i*$s(f-Kt),S=l*i*Ks(f-Kt),k=n*i*$s(f+Kt),T=l*i*Ks(f+Kt),v=this.vertices[o];v.command=o===0?G.move:G.curve,v.set(g,b),v.controls.left.set(m,S),v.controls.right.set(k,T)}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(t){const i=this.width/2,n=this.height/2,l=this.vertices.length,o=new us(0,0,i,n,l);o.translation.copy(this.translation),o.rotation=this.rotation,o.scale=this.scale,o.skewX=this.skewX,o.skewY=this.skewY,this.matrix.manual&&o.matrix.copy(this.matrix);for(let u=0;u<St.Properties.length;u++){const f=St.Properties[u];o[f]=this[f]}return t&&t.add(o),o}toObject(){const t=super.toObject.call(this);for(let i=0;i<us.Properties.length;i++){const n=us.Properties[i];t[n]=this[n]}return t}},ks=us;y(ks,"Properties",["width","height"]);var En={width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0}}},ar=class extends St{constructor(t,i,n,l){const o=[new xt(t,i),new xt(n,l)];super(o);for(let u in Fn)Object.defineProperty(this,u,Fn[u]);this.vertices[0].command=G.move,this.vertices[1].command=G.line,this.automatic=!1}},Fn={left:{enumerable:!0,get:function(){return this.vertices[0]},set:function(t){if(nt.isObject(t))this.vertices.splice(0,1,t);else{const i=new de("Two.Line.x argument is not an object.");console.warn(i.name,i.message)}}},right:{enumerable:!0,get:function(){return this.vertices[1]},set:function(t){if(nt.isObject(t))this.vertices.splice(1,1,t);else{const i=new de("Two.Line.y argument is not an object.");console.warn(i.name,i.message)}}}},ds=class extends St{constructor(t,i,n,l,o){typeof o>"u"&&typeof n=="number"&&typeof l=="number"&&(o=Math.floor(Math.min(n,l)/12));const u=[];for(let f=0;f<10;f++)u.push(new xt(0,0,0,0,0,0,f===0?G.move:G.curve));super(u),y(this,"_flagWidth",!1),y(this,"_flagHeight",!1),y(this,"_flagRadius",!1),y(this,"_width",0),y(this,"_height",0),y(this,"_radius",12);for(let f in Mn)Object.defineProperty(this,f,Mn[f]);this.closed=!0,this.automatic=!1,this._renderer.flagRadius=zl.bind(this),typeof n=="number"&&(this.width=n),typeof l=="number"&&(this.height=l),typeof o=="number"&&(this.radius=o),this._update(),typeof t=="number"&&(this.translation.x=t),typeof i=="number"&&(this.translation.y=i)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagRadius){const t=this._width,i=this._height;let n,l;this._radius instanceof K?(n=this._radius.x,l=this._radius.y):(n=this._radius,l=this._radius);let o,u=t/2,f=i/2;o=this.vertices[0],o.x=-(u-n),o.y=-f,o=this.vertices[1],o.x=u-n,o.y=-f,o.controls.left.clear(),o.controls.right.x=n,o.controls.right.y=0,o=this.vertices[2],o.x=u,o.y=-(f-l),o.controls.right.clear(),o.controls.left.clear(),o=this.vertices[3],o.x=u,o.y=f-l,o.controls.left.clear(),o.controls.right.x=0,o.controls.right.y=l,o=this.vertices[4],o.x=u-n,o.y=f,o.controls.right.clear(),o.controls.left.clear(),o=this.vertices[5],o.x=-(u-n),o.y=f,o.controls.left.clear(),o.controls.right.x=-n,o.controls.right.y=0,o=this.vertices[6],o.x=-u,o.y=f-l,o.controls.left.clear(),o.controls.right.clear(),o=this.vertices[7],o.x=-u,o.y=-(f-l),o.controls.left.clear(),o.controls.right.x=0,o.controls.right.y=-l,o=this.vertices[8],o.x=-(u-n),o.y=-f,o.controls.left.clear(),o.controls.right.clear(),o=this.vertices[9],o.copy(this.vertices[8])}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,super.flagReset.call(this),this}clone(t){const i=this.width,n=this.height,l=this.radius,o=new ds(0,0,i,n,l);o.translation.copy(this.translation),o.rotation=this.rotation,o.scale=this.scale,o.skewX=this.skewX,o.skewY=this.skewY,this.matrix.manual&&o.matrix.copy(this.matrix);for(let u=0;u<St.Properties.length;u++){const f=St.Properties[u];o[f]=this[f]}return t&&t.add(o),o}toObject(){const t=super.toObject.call(this);for(let i=0;i<ds.Properties.length;i++){const n=ds.Properties[i];t[n]=this[n]}return t.radius=typeof this.radius=="number"?this.radius:this.radius.toObject(),t}},As=ds;y(As,"Properties",["width","height","radius"]);var Mn={width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0}},radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof K&&this._radius.unbind(U.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof K&&this._radius.bind(U.Types.change,this._renderer.flagRadius),this._flagRadius=!0}}};function zl(){this._flagRadius=!0}var er,Cn=Math.min,On=Math.max;Vt.document&&(er=document.createElement("canvas"));var Me=class extends He{constructor(t,i,n,l){super(),y(this,"_flagValue",!0),y(this,"_flagFamily",!0),y(this,"_flagSize",!0),y(this,"_flagLeading",!0),y(this,"_flagAlignment",!0),y(this,"_flagBaseline",!0),y(this,"_flagStyle",!0),y(this,"_flagWeight",!0),y(this,"_flagDecoration",!0),y(this,"_flagFill",!0),y(this,"_flagStroke",!0),y(this,"_flagLinewidth",!0),y(this,"_flagOpacity",!0),y(this,"_flagVisible",!0),y(this,"_flagMask",!1),y(this,"_flagClip",!1),y(this,"_flagDirection",!0),y(this,"_value",""),y(this,"_family","sans-serif"),y(this,"_size",13),y(this,"_leading",17),y(this,"_alignment","center"),y(this,"_baseline","middle"),y(this,"_style","normal"),y(this,"_weight",500),y(this,"_decoration","none"),y(this,"_direction","ltr"),y(this,"_fill","#000"),y(this,"_stroke","none"),y(this,"_linewidth",1),y(this,"_opacity",1),y(this,"_visible",!0),y(this,"_mask",null),y(this,"_clip",!1),y(this,"_dashes",null);for(let o in Ln)Object.defineProperty(this,o,Ln[o]);if(this._renderer.type="text",this._renderer.flagFill=Vl.bind(this),this._renderer.flagStroke=Dl.bind(this),this.value=t,typeof i=="number"&&(this.translation.x=i),typeof n=="number"&&(this.translation.y=n),this.dashes=[],this.dashes.offset=0,!nt.isObject(l))return this;for(let o=0;o<Me.Properties.length;o++){const u=Me.Properties[o];u in l&&(this[u]=l[u])}}static Measure(t){if(er){const i=er.getContext("2d");i.font=[t._style,t._weight,`${t._size}px/${t._leading}px`,t._family].join(" ");const n=i.measureText(t.value,0,0),l=n.actualBoundingBoxDescent+n.actualBoundingBoxAscent;return{width:n.width,height:l}}else{const i=this.value.length*this.size*Me.Ratio,n=this.leading;return console.warn("Two.Text: unable to accurately measure text, so using an approximation."),{width:i,height:n}}}clone(t){const i=new Me(this.value);i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale;for(let n=0;n<Me.Properties.length;n++){const l=Me.Properties[n];i[l]=this[l]}return this.matrix.manual&&i.matrix.copy(this.matrix),t&&t.add(i),i._update()}toObject(){const t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};this.matrix.manual&&(t.matrix=this.matrix.toObject());for(let i=0;i<Me.Properties.length;i++){const n=Me.Properties[i];t[n]=this[n]}return t}noFill(){return this.fill="none",this}noStroke(){return this.stroke="none",this.linewidth=0,this}getBoundingClientRect(t){let i,n,l,o,u;this._update(!0),i=t?this.matrix:this.worldMatrix;const{width:f,height:g}=Me.Measure(this),b=(this._linewidth||0)/2;switch(this.alignment){case"left":n=-b,l=f+b;break;case"right":n=-(f+b),l=b;break;default:n=-(f/2+b),l=f/2+b}switch(this.baseline){case"middle":o=-(g/2+b),u=g/2+b;break;default:o=-(g+b),u=b}const[m,S]=i.multiply(n,o),[k,T]=i.multiply(n,u),[v,L]=i.multiply(l,o),[B,z]=i.multiply(l,u);return o=Cn(S,T,L,z),n=Cn(m,k,v,B),l=On(m,k,v,B),u=On(S,T,L,z),{top:o,left:n,right:l,bottom:u,width:l-n,height:u-o}}flagReset(){return super.flagReset.call(this),this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=this._flagDirection=!1,this}},Re=Me;y(Re,"Ratio",.6);y(Re,"Properties",["value","family","size","leading","alignment","linewidth","style","weight","decoration","direction","baseline","opacity","visible","fill","stroke"]);var Ln={value:{enumerable:!0,get:function(){return this._value},set:function(t){this._value=t,this._flagValue=!0}},family:{enumerable:!0,get:function(){return this._family},set:function(t){this._family=t,this._flagFamily=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(t){this._size=t,this._flagSize=!0}},leading:{enumerable:!0,get:function(){return this._leading},set:function(t){this._leading=t,this._flagLeading=!0}},alignment:{enumerable:!0,get:function(){return this._alignment},set:function(t){this._alignment=t,this._flagAlignment=!0}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t,this._flagLinewidth=!0}},style:{enumerable:!0,get:function(){return this._style},set:function(t){this._style=t,this._flagStyle=!0}},weight:{enumerable:!0,get:function(){return this._weight},set:function(t){this._weight=t,this._flagWeight=!0}},decoration:{enumerable:!0,get:function(){return this._decoration},set:function(t){this._decoration=t,this._flagDecoration=!0}},direction:{enumerable:!0,get:function(){return this._direction},set:function(t){this._direction=t,this._flagDirection=!0}},baseline:{enumerable:!0,get:function(){return this._baseline},set:function(t){this._baseline=t,this._flagBaseline=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._visible=t,this._flagVisible=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof $t||this._fill instanceof jt||this._fill instanceof zt||this._fill instanceof Et)&&this._fill.unbind(U.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof $t||this._fill instanceof jt||this._fill instanceof zt||this._fill instanceof Et)&&this._fill.bind(U.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof $t||this._stroke instanceof jt||this._stroke instanceof zt||this._stroke instanceof Et)&&this._stroke.unbind(U.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof $t||this._stroke instanceof jt||this._stroke instanceof zt||this._stroke instanceof Et)&&this._stroke.bind(U.Types.change,this._renderer.flagStroke)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,nt.isObject(t)&&!t.clip&&(t.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(t){typeof t.offset!="number"&&(t.offset=this.dashes&&this._dashes.offset||0),this._dashes=t}}};function Vl(){this._flagFill=!0}function Dl(){this._flagStroke=!0}var Ce={path:/[+-]?(?:\d*\.\d+|\d+)(?:[eE][+-]\d+)?/g,cssBackgroundImage:/url\(['"]?#([\w\d-_]*)['"]?\)/i,unitSuffix:/[a-zA-Z%]*/i},Ul={start:"left",middle:"center",end:"right"},Pn=["id","class","transform","xmlns","viewBox"],Wl=["x","y","width","height","href","xlink:href"];function Xl(t){return Ul[t]}function Yl(t){const i=t.getAttribute("dominant-baseline"),n=t.getAttribute("alignment-baseline");return i||n}function Ti(t){return t.replace(/svg:/ig,"").toLowerCase()}function In(t,i){if(i.x+=t.translateX,i.y+=t.translateY,i.x*=t.scaleX,i.y*=t.scaleY,t.rotation!==0){const n=i.length();i.x=n*Math.cos(t.rotation),i.y=n*Math.sin(t.rotation)}}function Hl(t,i){i||(i={});const n=t.split(";");for(let l=0;l<n.length;l++){const o=n[l].split(":"),u=o[0],f=o[1];typeof u>"u"||typeof f>"u"||(i[u]=f.replace(/\s/,""))}return i}function ql(t){const i={},n=Gl(t),l=Math.max(n.length,t.style.length);for(let o=0;o<l;o++){const u=t.style[o],f=n[o];u&&(i[u]=t.style[u]),f&&(i[f]=t.getAttribute(f))}return i}function Gl(t){const i=t.getAttributeNames();for(let n=0;n<Pn.length;n++){const l=Pn[n],o=Array.prototype.indexOf.call(i,l);o>=0&&i.splice(o,1)}return i}function $l(t,i){const n=i.split(/[\s,]/),l=-parseFloat(n[0]),o=-parseFloat(n[1]),u=parseFloat(n[2]),f=parseFloat(n[3]);if(l&&o)for(let k=0;k<t.children.length;k++){const T=t.children[k];"translation"in T?T.translation.add(l,o):"x"in T?T.x=l:"y"in T&&(T.y=o)}const g=typeof t.x=="number",b=typeof t.y=="number",m=typeof t.width=="number",S=typeof t.height=="number";return g&&(t.translation.x+=t.x),b&&(t.translation.y+=t.y),(m||S)&&(t.scale=new K(1,1)),m&&(t.scale.x=t.width/u),S&&(t.scale.y=t.height/f),t.mask=new ti(0,0,u,f),t.mask.origin.set(-u/2,-f/2),t}function be(t,i,n){const l={},o={},u={};let f,g,b,m,S,k,T,v,L,B,z,I,M,X,Y,W,Z;if(t===null)return l;if(Vt.getComputedStyle){const Q=Vt.getComputedStyle(t);for(f=Q.length;f--;)b=Q[f],m=Q[b],typeof m<"u"&&(l[b]=m)}for(f=0;f<t.attributes.length;f++)k=t.attributes[f],/style/i.test(k.nodeName)?Hl(k.value,u):o[k.nodeName]=k.value;typeof l.opacity<"u"&&(l["stroke-opacity"]=l.opacity,l["fill-opacity"]=l.opacity,delete l.opacity),n&&nt.defaults(l,n),nt.extend(l,u,o),l.visible=!(typeof l.display>"u"&&/none/i.test(l.display))||typeof l.visibility>"u"&&/hidden/i.test(l.visibility);for(b in l)switch(m=l[b],b){case"gradientTransform":if(/none/i.test(m)||(g=t.gradientTransform&&t.gradientTransform.baseVal&&t.gradientTransform.baseVal.length>0?t.gradientTransform.baseVal[0].matrix:t.getCTM?t.getCTM():null,g===null))break;switch(T=hi(g),i._renderer.type){case"linear-gradient":In(T,i.left),In(T,i.right);break;case"radial-gradient":i.center.x+=T.translateX,i.center.y+=T.translateY,i.focal.x+=T.translateX,i.focal.y+=T.translateY,i.radius*=Math.max(T.scaleX,T.scaleY);break}break;case"transform":if(/none/i.test(m)||(g=t.transform&&t.transform.baseVal&&t.transform.baseVal.length>0?t.transform.baseVal[0].matrix:t.getCTM?t.getCTM():null,g===null))break;T=hi(g),i.translation.set(T.translateX,T.translateY),i.rotation=Math.PI*(T.rotation/180),i.scale=new K(T.scaleX,T.scaleY),v=parseFloat((l.x+"").replace("px")),L=parseFloat((l.y+"").replace("px")),v&&(i.translation.x=v),L&&(i.translation.y=L);break;case"visible":if(i instanceof Gt){i._visible=m;break}i.visible=m;break;case"stroke-linecap":if(i instanceof Gt){i._cap=m;break}i.cap=m;break;case"stroke-linejoin":if(i instanceof Gt){i._join=m;break}i.join=m;break;case"stroke-miterlimit":if(i instanceof Gt){i._miter=m;break}i.miter=m;break;case"stroke-width":if(i instanceof Gt){i._linewidth=parseFloat(m);break}i.linewidth=parseFloat(m);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(i instanceof Gt){i._opacity=parseFloat(m);break}i.opacity=parseFloat(m);break;case"clip-path":if(Ce.cssBackgroundImage.test(m)&&(B=m.replace(Ce.cssBackgroundImage,"$1"),Nt.defs.current&&Nt.defs.current.contains(B)&&(I=Nt.defs.current.get(B),I&&I.childNodes.length>0)))switch(I=I.childNodes[0],M=Ti(I.nodeName),i.mask=Nt[M].call(this,I,{}),i._renderer.type){case"text":case"path":i.position.add(i.mask.position),i.mask.position.clear();break}break;case"fill":case"stroke":S=(i instanceof Gt?"_":"")+b,Ce.cssBackgroundImage.test(m)?(B=m.replace(Ce.cssBackgroundImage,"$1"),Nt.defs.current&&Nt.defs.current.contains(B)?(I=Nt.defs.current.get(B),I.object||(M=Ti(I.nodeName),I.object=Nt[M].call(this,I,{})),I=I.object):(z=Jl(this),I=z.getById(B)),i[S]=I):i[S]=m;break;case"id":i.id=m;break;case"class":case"className":i.classList=m.split(" "),i._flagClassName=!0;break;case"x":case"y":if(X=i instanceof $t,Y=i instanceof jt,W=i instanceof zt,X||Y||W)break;m.match("[a-z%]$")&&!m.endsWith("px")&&(Z=new de("only pixel values are supported with the "+b+" attribute."),console.warn(Z.name,Z.message)),i.translation[b]=parseFloat(m);break;case"font-family":i instanceof Re&&(i.family=m);break;case"font-size":i instanceof Re&&(i.size=m);break;case"font-weight":i instanceof Re&&(i.weight=m);break;case"font-style":i instanceof Re&&(i.style=m);break;case"text-decoration":i instanceof Re&&(i.decoration=m);break;case"line-height":i instanceof Re&&(i.leading=m);break}return Object.keys(t.dataset).length&&(i.dataset=t.dataset),l}function Kl(t,i){for(let n=0,l=t.childNodes.length;n<l;n++){const o=t.childNodes[n];!o.id||Ti(t.nodeName)==="#text"||i.add(o.id,o)}}function Jl(t){for(;t.parent;)t=t.parent;return t.scene}var Nt={svg:function(t){const i=Nt.defs.current=new xs,n=t.getElementsByTagName("defs");for(let L=0;L<n.length;L++)Kl(n[L],i);const l=Nt.g.call(this,t),o=t.getAttribute("viewBox"),u=t.getAttribute("x"),f=t.getAttribute("y"),g=t.getAttribute("width"),b=t.getAttribute("height");l.defs=i;const m=o!==null,S=u!==null,k=f!==null,T=g!==null,v=b!==null;return S&&(l.x=parseFloat(u.replace(Ce.unitSuffix,""))),k&&(l.y=parseFloat(f.replace(Ce.unitSuffix,""))),T&&(l.width=parseFloat(g.replace(Ce.unitSuffix,""))),v&&(l.height=parseFloat(b.replace(Ce.unitSuffix,""))),m&&$l(l,o),delete Nt.defs.current,l},defs:function(t){return null},use:function(t,i){let n;const l=t.getAttribute("href")||t.getAttribute("xlink:href");if(!l)return n=new de("encountered <use /> with no href."),console.warn(n.name,n.message),null;const o=l.slice(1);if(!Nt.defs.current.contains(o))return n=new de("unable to find element for reference "+l+"."),console.warn(n.name,n.message),null;const f=Nt.defs.current.get(o).cloneNode(!0);for(let b=0;b<t.attributes.length;b++){const m=t.attributes[b],S=Wl.includes(m.nodeName),k=!f.hasAttribute(m.nodeName);(S||k)&&f.setAttribute(m.nodeName,m.value)}const g=Ti(f.nodeName);return Nt[g].call(this,f,i)},g:function(t,i){const n=new Gt;be.call(this,t,n,i),this.add(n);const l=ql.call(this,t);for(let o=0,u=t.childNodes.length;o<u;o++){const f=t.childNodes[o],g=f.nodeName;if(!g)return;const b=Ti(g);if(b in Nt){const m=Nt[b].call(n,f,l);m&&!m.parent&&n.add(m)}}return n},polygon:function(t,i){let n;typeof t=="string"?n=t:n=t.getAttribute("points");const l=[];n.replace(/(-?[\d.eE-]+)[,|\s](-?[\d.eE-]+)/g,function(u,f,g){l.push(new xt(parseFloat(f),parseFloat(g)))});const o=new St(l,!0).noStroke();return o.fill="black",be.call(this,t,o,i),o},polyline:function(t,i){const n=Nt.polygon.call(this,t,i);return n.closed=!1,n},path:function(t,i){let n;typeof t=="string"?(n=t,t=null):n=t.getAttribute("d");let l=[],o=!1,u=!1;if(n){let g=new xt,b,m,S=n.match(/[a-df-z][^a-df-z]*/ig);const k=S.length-1;nt.each(S.slice(0),function(T,v){const L=T.slice(1).trim().match(Ce.path),B=T[0],z=B.toLowerCase();let I,M,X,Y,W;const Z=[];switch(v===0&&(S=[]),z){case"h":case"v":L.length>1&&(I=1);break;case"m":case"l":case"t":L.length>2&&(I=2);break;case"s":case"q":L.length>4&&(I=4);break;case"c":L.length>6&&(I=6);break;case"a":L.length>7&&(I=7);break}if(I){for(M=0,X=L.length,W=0;M<X;M+=I){if(Y=B,W>0)switch(B){case"m":Y="l";break;case"M":Y="L";break}Z.push(Y+L.slice(M,M+I).join(" ")),W++}S=Array.prototype.concat.apply(S,Z)}else S.push(T)}),nt.each(S,function(T,v){let L,B,z;const I=T[0],M=I.toLowerCase();m=T.slice(1).trim().match(Ce.path),u=I===M;let X,Y,W,Z,Q,ft,et,it,yt,st,Rt,F,wt,lt,V,tt,Lt;switch(M){case"z":if(v>=k)o=!0;else{B=g.x,z=g.y,L=new xt(B,z,void 0,void 0,void 0,void 0,G.close);for(let ee=l.length-1;ee>=0;ee--){const Ct=l[ee];if(/m/i.test(Ct.command)){g=Ct;break}}}break;case"m":case"l":b=void 0,B=parseFloat(m[0]),z=parseFloat(m[1]),L=new xt(B,z,void 0,void 0,void 0,void 0,/m/i.test(M)?G.move:G.line),u&&L.addSelf(g),g=L;break;case"h":case"v":st=/h/i.test(M)?"x":"y",Rt=/x/i.test(st)?"y":"x",L=new xt(void 0,void 0,void 0,void 0,void 0,void 0,G.line),L[st]=parseFloat(m[0]),L[Rt]=g[Rt],u&&(L[st]+=g[st]),g=L;break;case"c":case"s":X=g.x,Y=g.y,b||(b=new K),/c/i.test(M)?(W=parseFloat(m[0]),Z=parseFloat(m[1]),Q=parseFloat(m[2]),ft=parseFloat(m[3]),et=parseFloat(m[4]),it=parseFloat(m[5])):(yt=Zs(g,b,u),W=yt.x,Z=yt.y,Q=parseFloat(m[0]),ft=parseFloat(m[1]),et=parseFloat(m[2]),it=parseFloat(m[3])),u&&(W+=X,Z+=Y,Q+=X,ft+=Y,et+=X,it+=Y),g.controls.right.set(W-g.x,Z-g.y),L=new xt(et,it,Q-et,ft-it,void 0,void 0,G.curve),g=L,b=L.controls.left;break;case"t":case"q":X=g.x,Y=g.y,b||(b=new K),/q/i.test(M)?(W=parseFloat(m[0]),Z=parseFloat(m[1]),Q=parseFloat(m[0]),ft=parseFloat(m[1]),et=parseFloat(m[2]),it=parseFloat(m[3])):(yt=Zs(g,b,u),W=yt.x,Z=yt.y,Q=yt.x,ft=yt.y,et=parseFloat(m[0]),it=parseFloat(m[1])),u&&(W+=X,Z+=Y,Q+=X,ft+=Y,et+=X,it+=Y),g.controls.right.set((W-g.x)*.33,(Z-g.y)*.33),L=new xt(et,it,Q-et,ft-it,void 0,void 0,G.curve),g=L,b=L.controls.left;break;case"a":X=g.x,Y=g.y,wt=parseFloat(m[0]),lt=parseFloat(m[1]),V=parseFloat(m[2]),tt=parseFloat(m[3]),Lt=parseFloat(m[4]),et=parseFloat(m[5]),it=parseFloat(m[6]),u&&(et+=X,it+=Y),F=new xt(et,it),F.command=G.arc,F.rx=wt,F.ry=lt,F.xAxisRotation=V,F.largeArcFlag=tt,F.sweepFlag=Lt,L=F,g=F,b=void 0;break}L&&(Array.isArray(L)?l=l.concat(L):l.push(L))})}n=new St(l,o,void 0,!0).noStroke(),n.fill="black";const f=n.getBoundingClientRect(!0);return f.centroid={x:f.left+f.width/2,y:f.top+f.height/2},nt.each(n.vertices,function(g){g.subSelf(f.centroid)}),be.call(this,t,n,i),n.translation.addSelf(f.centroid),n},circle:function(t,i){const n=parseFloat(t.getAttribute("cx")),l=parseFloat(t.getAttribute("cy")),o=parseFloat(t.getAttribute("r")),u=new ws(0,0,o).noStroke();return u.fill="black",be.call(this,t,u,i),u.translation.x=n,u.translation.y=l,u},ellipse:function(t,i){const n=parseFloat(t.getAttribute("cx")),l=parseFloat(t.getAttribute("cy")),o=parseFloat(t.getAttribute("rx")),u=parseFloat(t.getAttribute("ry")),f=new ks(0,0,o,u).noStroke();return f.fill="black",be.call(this,t,f,i),f.translation.x=n,f.translation.y=l,f},rect:function(t,i){const n=parseFloat(t.getAttribute("rx")),l=parseFloat(t.getAttribute("ry"));if(!nt.isNaN(n)||!nt.isNaN(l))return Nt["rounded-rect"](t);const o=parseFloat(t.getAttribute("width")),u=parseFloat(t.getAttribute("height")),f=o/2,g=u/2,b=new ti(0,0,o,u).noStroke();return b.fill="black",be.call(this,t,b,i),b.translation.x+=f,b.translation.y+=g,b},"rounded-rect":function(t,i){const n=parseFloat(t.getAttribute("rx"))||0,l=parseFloat(t.getAttribute("ry"))||0,o=parseFloat(t.getAttribute("width")),u=parseFloat(t.getAttribute("height")),f=o/2,g=u/2,b=new K(n,l),m=new As(0,0,o,u,b).noStroke();return m.fill="black",be.call(this,t,m,i),m.translation.x+=f,m.translation.y+=g,m},line:function(t,i){const n=parseFloat(t.getAttribute("x1")),l=parseFloat(t.getAttribute("y1")),o=parseFloat(t.getAttribute("x2")),u=parseFloat(t.getAttribute("y2")),f=new ar(n,l,o,u).noFill();return be.call(this,t,f,i),f},lineargradient:function(t,i){let n=t.getAttribute("gradientUnits"),l=t.getAttribute("spreadMethod");n||(n="objectBoundingBox"),l||(l="pad");let o=parseFloat(t.getAttribute("x1")||0),u=parseFloat(t.getAttribute("y1")||0),f=parseFloat(t.getAttribute("x2")||0),g=parseFloat(t.getAttribute("y2")||0);const b=(f+o)/2,m=(g+u)/2;/userSpaceOnUse/i.test(n)&&(o-=b,u-=m,f-=b,g-=m);const S=[];for(let T=0;T<t.children.length;T++){const v=t.children[T];let L=v.getAttribute("offset");/%/ig.test(L)&&(L=parseFloat(L.replace(/%/ig,""))/100),L=parseFloat(L);let B=v.getAttribute("stop-color"),z=v.getAttribute("stop-opacity"),I=v.getAttribute("style"),M;B===null&&(M=I?I.match(/stop-color:\s?([#a-fA-F0-9]*)/):!1,B=M&&M.length>1?M[1]:void 0),z===null?(M=I?I.match(/stop-opacity:\s?([0-9.-]*)/):!1,z=M&&M.length>1?parseFloat(M[1]):1):z=parseFloat(z),S.push(new Ge(L,B,z))}const k=new jt(o,u,f,g,S);return k.spread=l,k.units=n,be.call(this,t,k,i),k},radialgradient:function(t,i){let n=t.getAttribute("gradientUnits"),l=t.getAttribute("spreadMethod");n||(n="objectBoundingBox"),l||(l="pad");let o=parseFloat(t.getAttribute("cx"))||0,u=parseFloat(t.getAttribute("cy"))||0,f=parseFloat(t.getAttribute("r")),g=parseFloat(t.getAttribute("fx")),b=parseFloat(t.getAttribute("fy"));nt.isNaN(g)&&(g=o),nt.isNaN(b)&&(b=u);const m=Math.abs(o+g)/2,S=Math.abs(u+b)/2;/userSpaceOnUse/i.test(n)&&(o-=m,u-=S,g-=m,b-=S);const k=[];for(let v=0;v<t.children.length;v++){const L=t.children[v];let B=L.getAttribute("offset");/%/ig.test(B)&&(B=parseFloat(B.replace(/%/ig,""))/100),B=parseFloat(B);let z=L.getAttribute("stop-color"),I=L.getAttribute("stop-opacity"),M=L.getAttribute("style"),X;z===null&&(X=M?M.match(/stop-color:\s?([#a-fA-F0-9]*)/):!1,z=X&&X.length>1?X[1]:void 0),I===null?(X=M?M.match(/stop-opacity:\s?([0-9.-]*)/):!1,I=X&&X.length>1?parseFloat(X[1]):1):I=parseFloat(I),k.push(new Ge(B,z,I))}const T=new zt(o,u,f,k,g,b);return T.spread=l,T.units=n,be.call(this,t,T,i),T},text:function(t,i){const n=Xl(t.getAttribute("text-anchor"))||"left",l=Yl(t)||"baseline",o=t.textContent,u=new Re(o);return be.call(this,t,u,i),u.alignment=n,u.baseline=l,u},clippath:function(t,i){return Nt.defs.current&&!Nt.defs.current.contains(t.id)&&Nt.defs.current.add(t.id,t),null},image:function(t,i){let n;const l=t.getAttribute("href")||t.getAttribute("xlink:href");if(!l)return n=new de("encountered <image /> with no href."),console.warn(n.name,n.message),null;const o=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0,f=parseFloat(t.getAttribute("width")),g=parseFloat(t.getAttribute("height")),b=new vs(l,o,u);return nt.isNaN(f)||(b.width=f),nt.isNaN(g)||(b.height=g),be.call(this,t,b,i),b}};function pa(t,i){const n=new XMLHttpRequest;return n.open("GET",t),n.onreadystatechange=function(){n.readyState===4&&n.status===200&&i(n.responseText)},n.send(),n}var ir=class extends ti{constructor(t,i,n,l){super(i,n,0,0),y(this,"_flagTextures",!1),y(this,"_flagFrameRate",!1),y(this,"_flagIndex",!1),y(this,"_amount",1),y(this,"_duration",0),y(this,"_index",0),y(this,"_startTime",0),y(this,"_playing",!1),y(this,"_firstFrame",0),y(this,"_lastFrame",0),y(this,"_loop",!0),y(this,"_textures",null),y(this,"_frameRate",0),y(this,"_origin",null);for(let o in Bn)Object.defineProperty(this,o,Bn[o]);this._renderer.flagTextures=Zl.bind(this),this._renderer.bindTextures=Ql.bind(this),this._renderer.unbindTextures=to.bind(this),this.noStroke(),this.noFill(),Array.isArray(t)?this.textures=t.map(Nn.bind(this)):this.textures=[Nn(t)],this.origin=new K,this._update(),typeof l=="number"?this.frameRate=l:this.frameRate=ir.DefaultFrameRate,this.index=0}play(t,i,n){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=nt.performance.now(),typeof t=="number"&&(this._firstFrame=t),typeof i=="number"&&(this._lastFrame=i),typeof n=="function"?this._onLastFrame=n:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=this._firstFrame,this}clone(t){const i=new ir(this.textures,this.translation.x,this.translation.y,this.frameRate);return i._loop=this._loop,this._playing&&i.play(),t&&t.add(i),i}toObject(){const t=super.toObject.call(this);return t.textures=this.textures.map(function(i){return i.toObject()}),t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t}_update(){const t=this._textures;let i,n,l,o,u,f,g,b;return t&&(this._flagTextures&&(this._amount=t.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(o=this._amount,nt.isNaN(this._lastFrame)&&(this._lastFrame=o-1),l=nt.performance.now()-this._startTime,b=this._lastFrame+1,u=1e3*(b-this._firstFrame)/this._frameRate,this._loop?l=l%u:l=Math.min(l,u),g=ce(this._firstFrame,b,l/u),g=Math.floor(g),g!==this._index&&(this._index=g,f=t[this._index],f.loaded&&(i=f.image.width,n=f.image.height,this.width!==i&&(this.width=i),this.height!==n&&(this.height=n),this.fill=f,g>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):(this._flagIndex||!(this.fill instanceof Et))&&(f=t[this._index],f.loaded&&(i=f.image.width,n=f.image.height,this.width!==i&&(this.width=i),this.height!==n&&(this.height=n)),this.fill=f)),super._update.call(this),this}flagReset(){return this._flagTextures=this._flagFrameRate=!1,super.flagReset.call(this),this}},Ss=ir;y(Ss,"Properties",["textures","frameRate","index"]);y(Ss,"DefaultFrameRate",30);var Bn={frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(t){this._frameRate=t,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(t){this._index=t,this._flagIndex=!0}},textures:{enumerable:!0,get:function(){return this._textures},set:function(t){const i=this._renderer.bindTextures,n=this._renderer.unbindTextures;this._textures&&this._textures.unbind(U.Types.insert,i).unbind(U.Types.remove,n),this._textures=new qe((t||[]).slice(0)),this._textures.bind(U.Types.insert,i).bind(U.Types.remove,n),i(this._textures)}}};function Zl(){this._flagTextures=!0}function Ql(t){let i=t.length;for(;i--;)t[i].bind(U.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function to(t){let i=t.length;for(;i--;)t[i].unbind(U.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function Nn(t){if(t instanceof Et)return t;if(typeof t=="string")return new Et(t)}var _s=class extends St{constructor(t,i,n,l,o,u,f){const g=f||Jt.Resolution*3,b=[];for(let m=0;m<g;m++)b.push(new xt);super(b,!0,!1,!0),y(this,"_flagStartAngle",!1),y(this,"_flagEndAngle",!1),y(this,"_flagInnerRadius",!1),y(this,"_flagOuterRadius",!1),y(this,"_startAngle",0),y(this,"_endAngle",ie),y(this,"_innerRadius",0),y(this,"_outerRadius",0);for(let m in jn)Object.defineProperty(this,m,jn[m]);typeof n=="number"&&(this.innerRadius=n),typeof l=="number"&&(this.outerRadius=l),typeof o=="number"&&(this.startAngle=o),typeof u=="number"&&(this.endAngle=u),this._update(),typeof t=="number"&&(this.translation.x=t),typeof i=="number"&&(this.translation.y=i)}_update(){if(this._flagVertices||this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){const t=this._startAngle,i=this._endAngle,n=this._innerRadius,l=this._outerRadius,o=_e(t,ie)===_e(i,ie),u=n>0,f=this.vertices;let g=u?f.length/2:f.length,b,m=0,S,k,T,v,L,B,z,I,M;for(o?g--:u||(g-=2),S=0,k=g-1;S<g;S++){switch(T=S/k,v=f[m],L=T*(i-t)+t,B=(i-t)/g,z=l*Math.cos(L),I=l*Math.sin(L),S){case 0:b=G.move;break;default:b=G.curve}v.command=b,v.x=z,v.y=I,v.controls.left.clear(),v.controls.right.clear(),v.command===G.curve&&(M=l*B/Math.PI,v.controls.left.x=M*Math.cos(L-Kt),v.controls.left.y=M*Math.sin(L-Kt),v.controls.right.x=M*Math.cos(L+Kt),v.controls.right.y=M*Math.sin(L+Kt),S===1&&v.controls.left.multiplyScalar(2),S===k&&v.controls.right.multiplyScalar(2)),m++}if(u){for(o?(f[m].command=G.close,m++):(g--,k=g-1),S=0;S<g;S++)T=S/k,v=f[m],L=(1-T)*(i-t)+t,B=(i-t)/g,z=n*Math.cos(L),I=n*Math.sin(L),b=G.curve,S<=0&&(b=o?G.move:G.line),v.command=b,v.x=z,v.y=I,v.controls.left.clear(),v.controls.right.clear(),v.command===G.curve&&(M=n*B/Math.PI,v.controls.left.x=M*Math.cos(L+Kt),v.controls.left.y=M*Math.sin(L+Kt),v.controls.right.x=M*Math.cos(L-Kt),v.controls.right.y=M*Math.sin(L-Kt),S===1&&v.controls.left.multiplyScalar(2),S===k&&v.controls.right.multiplyScalar(2)),m++;f[m].copy(f[0]),f[m].command=G.line}else o||(f[m].command=G.line,f[m].x=0,f[m].y=0,m++,f[m].copy(f[0]),f[m].command=G.line)}return super._update.call(this),this}flagReset(){return super.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}clone(t){const i=this.innerRadius,n=this.outerRadius,l=this.startAngle,o=this.endAngle,u=this.vertices.length,f=new _s(0,0,i,n,l,o,u);f.translation.copy(this.translation),f.rotation=this.rotation,f.scale=this.scale,f.skewX=this.skewX,f.skewY=this.skewY,this.matrix.manual&&f.matrix.copy(this.matrix);for(let g=0;g<St.Properties.length;g++){const b=St.Properties[g];f[b]=this[b]}return t&&t.add(f),f}toObject(){const t=super.toObject.call(this);for(let i=0;i<_s.Properties.length;i++){const n=_s.Properties[i];t[n]=this[n]}return t}},lr=_s;y(lr,"Properties",["startAngle","endAngle","innerRadius","outerRadius"]);var jn={startAngle:{enumerable:!0,get:function(){return this._startAngle},set:function(t){this._startAngle=t,this._flagStartAngle=!0}},endAngle:{enumerable:!0,get:function(){return this._endAngle},set:function(t){this._endAngle=t,this._flagEndAngle=!0}},innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this._flagOuterRadius=!0}}},eo=Math.ceil,io=Math.floor,Ai=class extends He{constructor(t){super(),y(this,"_flagVertices",!0),y(this,"_flagLength",!0),y(this,"_flagFill",!0),y(this,"_flagStroke",!0),y(this,"_flagLinewidth",!0),y(this,"_flagOpacity",!0),y(this,"_flagVisible",!0),y(this,"_flagSize",!0),y(this,"_flagSizeAttenuation",!0),y(this,"_length",0),y(this,"_fill","#fff"),y(this,"_stroke","#000"),y(this,"_linewidth",1),y(this,"_opacity",1),y(this,"_visible",!0),y(this,"_size",1),y(this,"_sizeAttenuation",!1),y(this,"_beginning",0),y(this,"_ending",1),y(this,"_dashes",null),y(this,"noFill",St.prototype.noFill),y(this,"noStroke",St.prototype.noStroke),y(this,"corner",St.prototype.corner),y(this,"center",St.prototype.center),y(this,"getBoundingClientRect",St.prototype.getBoundingClientRect),y(this,"_updateLength",St.prototype._updateLength);for(let i in zn)Object.defineProperty(this,i,zn[i]);this._renderer.type="points",this._renderer.flagVertices=ha.bind(this),this._renderer.bindVertices=ca.bind(this),this._renderer.unbindVertices=fa.bind(this),this._renderer.flagFill=ua.bind(this),this._renderer.flagStroke=da.bind(this),this._renderer.vertices=null,this._renderer.collection=null,this.sizeAttenuation=!1,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.className="",this.visible=!0,this.vertices=t,this.dashes=[],this.dashes.offset=0}clone(t){const i=new Ai;for(let n=0;n<this.vertices.length;n++)i.vertices.push(this.vertices[n].clone());for(let n=0;n<Ai.Properties.length;n++){const l=Ai.Properties[n];i[l]=this[l]}return i.className=this.className,i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,i.skewX=this.skewX,i.skewY=this.skewY,this.matrix.manual&&i.matrix.copy(this.matrix),t&&t.add(i),i._update()}toObject(){const t={vertices:this.vertices.map(function(i){return i.toObject()})};return nt.each(Ai.Properties,function(i){t[i]=this[i]},this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof K?this.scale.toObject():this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t}subdivide(t){this._update();let i=[];for(let n=0;n<this.vertices.length;n++){const l=this.vertices[n],o=this.vertices[n-1];if(!o)continue;const u=l.x,f=l.y,g=o.x,b=o.y,m=rr(u,f,u,f,g,b,g,b,t);i=i.concat(m)}return this.vertices=i,this}_update(){if(this._flagVertices){this._flagLength&&this._updateLength(void 0,!0);const t=Math.min(this._beginning,this._ending),i=Math.max(this._beginning,this._ending),n=ys(this,t*this._length),l=ys(this,i*this._length),o=eo(n),u=io(l);let f=0,g;this._renderer.vertices=[],this._renderer.collection=[];for(let b=0;b<this._collection.length;b++)b>=o&&b<=u&&(g=this._collection[b],this._renderer.collection.push(g),this._renderer.vertices[f*2+0]=g.x,this._renderer.vertices[f*2+1]=g.y,f++)}return super._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagSize=this._flagSizeAttenuation=!1,super.flagReset.call(this),this}},or=Ai;y(or,"Properties",["fill","stroke","linewidth","opacity","visible","size","sizeAttenuation","beginning","ending"]);var zn={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._visible=t,this._flagVisible=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(t){this._size=t,this._flagSize=!0}},sizeAttenuation:{enumerable:!0,get:function(){return this._sizeAttenuation},set:function(t){this._sizeAttenuation=t,this._flagSizeAttenuation=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof $t||this._fill instanceof jt||this._fill instanceof zt||this._fill instanceof Et)&&this._fill.unbind(U.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof $t||this._fill instanceof jt||this._fill instanceof zt||this._fill instanceof Et)&&this._fill.bind(U.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof $t||this._stroke instanceof jt||this._stroke instanceof zt||this._stroke instanceof Et)&&this._stroke.unbind(U.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof $t||this._stroke instanceof jt||this._stroke instanceof zt||this._stroke instanceof Et)&&this._stroke.bind(U.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(t){const i=this._renderer.bindVertices,n=this._renderer.unbindVertices;this._collection&&this._collection.unbind(U.Types.insert,i).unbind(U.Types.remove,n),t instanceof qe?this._collection=t:this._collection=new qe(t||[]),this._collection.bind(U.Types.insert,i).bind(U.Types.remove,n),i(this._collection)}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(t){typeof t.offset!="number"&&(t.offset=this.dashes&&this._dashes.offset||0),this._dashes=t}}},so=Math.cos,ro=Math.sin,gs=class extends St{constructor(t,i,n,l){l=Math.max(l||0,3),super(),y(this,"_flagWidth",!1),y(this,"_flagHeight",!1),y(this,"_flagSides",!1),y(this,"_radius",0),y(this,"_width",0),y(this,"_height",0),y(this,"_sides",0);for(let o in Vn)Object.defineProperty(this,o,Vn[o]);this.closed=!0,this.automatic=!1,typeof n=="number"&&(this.radius=n),typeof l=="number"&&(this.sides=l),this._update(),typeof t=="number"&&(this.translation.x=t),typeof i=="number"&&(this.translation.y=i)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagSides){const t=this._sides,i=t+1;let n=this.vertices.length;n>t&&(this.vertices.splice(t-1,n-t),n=t);for(let l=0;l<i;l++){const o=(l+.5)/t,u=ie*o+Math.PI/2,f=this._width*so(u)/2,g=this._height*ro(u)/2;l>=n?this.vertices.push(new xt(f,g)):this.vertices[l].set(f,g),this.vertices[l].command=l===0?G.move:G.line}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagSides=!1,super.flagReset.call(this),this}clone(t){const i=new gs(0,0,0,this.sides);i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,i.skewX=this.skewX,i.skewY=this.skewY,i.width=this.width,i.height=this.height,this.matrix.manual&&i.matrix.copy(this.matrix);for(let n=0;n<St.Properties.length;n++){const l=St.Properties[n];i[l]=this[l]}return t&&t.add(i),i}toObject(){const t=super.toObject.call(this);for(let i=0;i<gs.Properties.length;i++){const n=gs.Properties[i];t[n]=this[n]}return t}},hr=gs;y(hr,"Properties",["width","height","sides"]);var Vn={radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius=t,this.width=t*2,this.height=t*2}},width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0,this._radius=Math.max(this.width,this.height)/2}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0,this._radius=Math.max(this.width,this.height)/2}},sides:{enumerable:!0,get:function(){return this._sides},set:function(t){this._sides=t,this._flagSides=!0}}},no=Math.cos,ao=Math.sin,ps=class extends St{constructor(t,i,n,l,o){arguments.length<=3&&(l=n,n=l/2),(typeof o!="number"||o<=0)&&(o=5),super(),y(this,"_flagInnerRadius",!1),y(this,"_flagOuterRadius",!1),y(this,"_flagSides",!1),y(this,"_innerRadius",0),y(this,"_outerRadius",0),y(this,"_sides",0);for(let u in Dn)Object.defineProperty(this,u,Dn[u]);this.closed=!0,this.automatic=!1,typeof n=="number"&&(this.innerRadius=n),typeof l=="number"&&(this.outerRadius=l),typeof o=="number"&&(this.sides=o),this._update(),typeof t=="number"&&(this.translation.x=t),typeof i=="number"&&(this.translation.y=i)}_update(){if(this._flagVertices||this._flagInnerRadius||this._flagOuterRadius||this._flagSides){const t=this._sides*2,i=t+1;let n=this.vertices.length;n>t&&(this.vertices.splice(t-1,n-t),n=t);for(let l=0;l<i;l++){const o=(l+.5)/t,u=ie*o,f=(l%2?this._outerRadius:this._innerRadius)/2,g=f*no(u),b=f*ao(u);l>=n?this.vertices.push(new xt(g,b)):this.vertices[l].set(g,b),this.vertices[l].command=l===0?G.move:G.line}}return super._update.call(this),this}flagReset(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,super.flagReset.call(this),this}clone(t){const i=this.innerRadius,n=this.outerRadius,l=this.sides,o=new ps(0,0,i,n,l);o.translation.copy(this.translation),o.rotation=this.rotation,o.scale=this.scale,o.skewX=this.skewX,o.skewY=this.skewY,this.matrix.manual&&o.matrix.copy(this.matrix);for(let u=0;u<St.Properties.length;u++){const f=St.Properties[u];o[f]=this[f]}return t&&t.add(o),o}toObject(){const t=super.toObject.call(this);for(let i=0;i<ps.Properties.length;i++){const n=ps.Properties[i];t[n]=this[n]}return t}},cr=ps;y(cr,"Properties",["innerRadius","outerRadius","sides"]);var Dn={innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this._flagOuterRadius=!0}},sides:{enumerable:!0,get:function(){return this._sides},set:function(t){this._sides=t,this._flagSides=!0}}},ct={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},baselines:{top:"hanging",middle:"middle",bottom:"ideographic",baseline:"alphabetic"},createElement:function(t,i){const n=t,l=document.createElementNS(ct.ns,n);return n==="svg"&&(i=nt.defaults(i||{},{version:ct.version})),i&&Object.keys(i).length>0&&ct.setAttributes(l,i),l},setAttributes:function(t,i){const n=Object.keys(i);for(let l=0;l<n.length;l++)/href/.test(n[l])?t.setAttributeNS(ct.xlink,n[l],i[n[l]]):t.setAttribute(n[l],i[n[l]]);return this},removeAttributes:function(t,i){for(let n in i)t.removeAttribute(n);return this},toString:function(t,i){let n=t.length,l=n-1,o,u="";for(let f=0;f<n;f++){const g=t[f],b=i?_e(f-1,n):Math.max(f-1,0),m=t[b];let S,k,T,v,L,B,z,I,M,X,Y,W,Z,Q,ft,et=Ut(g.x),it=Ut(g.y);switch(g.command){case G.close:S=G.close;break;case G.arc:Y=g.rx,W=g.ry,Z=g.xAxisRotation,Q=g.largeArcFlag,ft=g.sweepFlag,S=G.arc+" "+Y+" "+W+" "+Z+" "+Q+" "+ft+" "+et+" "+it;break;case G.curve:z=m.controls&&m.controls.right||K.zero,I=g.controls&&g.controls.left||K.zero,m.relative?(T=Ut(z.x+m.x),v=Ut(z.y+m.y)):(T=Ut(z.x),v=Ut(z.y)),g.relative?(L=Ut(I.x+g.x),B=Ut(I.y+g.y)):(L=Ut(I.x),B=Ut(I.y)),S=(f===0?G.move:G.curve)+" "+T+" "+v+" "+L+" "+B+" "+et+" "+it;break;case G.move:o=g,S=G.move+" "+et+" "+it;break;default:S=g.command+" "+et+" "+it}f>=l&&i&&(g.command===G.curve&&(k=o,M=g.controls&&g.controls.right||g,X=k.controls&&k.controls.left||k,g.relative?(T=Ut(M.x+g.x),v=Ut(M.y+g.y)):(T=Ut(M.x),v=Ut(M.y)),k.relative?(L=Ut(X.x+k.x),B=Ut(X.y+k.y)):(L=Ut(X.x),B=Ut(X.y)),et=Ut(k.x),it=Ut(k.y),S+=" C "+T+" "+v+" "+L+" "+B+" "+et+" "+it),g.command!==G.close&&(S+=" Z")),u+=S+" "}return u},pointsToString:function(t,i){let n="";const l=i*.5;for(let o=0;o<t.length;o++){const u=t[o].x,f=t[o].y-l;n+=G.move+" "+u+" "+f+" ",n+="a "+l+" "+l+" 0 1 0 0.001 0 Z"}return n},getClip:function(t,i){let n=t._renderer.clip;return n||(n=t._renderer.clip=ct.createElement("clipPath",{"clip-rule":"nonzero"})),n.parentNode===null&&i.defs.appendChild(n),n},defs:{update:function(t){const{defs:i}=t;if(i._flagUpdate){const n=Array.prototype.slice.call(i.children,0);for(let l=0;l<n.length;l++){const o=n[l],u=o.id,f=`[fill="url(#${u})"],[stroke="url(#${u})"],[clip-path="url(#${u})"]`;t.querySelector(f)||i.removeChild(o)}i._flagUpdate=!1}}},group:{appendChild:function(t){const i=t._renderer.elem;if(!i)return;const n=i.nodeName;!n||/(radial|linear)gradient/i.test(n)||t._clip||this.elem.appendChild(i)},removeChild:function(t){const i=t._renderer.elem;!i||i.parentNode!=this.elem||!i.nodeName||t._clip||this.elem.removeChild(i)},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){ct[t._renderer.type].render.call(t,this)},render:function(t){if(!this._visible&&!this._flagVisible||this._opacity===0&&!this._flagOpacity)return this;this._update(),this._renderer.elem||(this._renderer.elem=ct.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));const i=this._matrix.manual||this._flagMatrix,n={domElement:t,elem:this._renderer.elem};i&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(let l=0;l<this.children.length;l++){const o=this.children[l];ct[o._renderer.type].render.call(o,t)}return this._flagId&&this._renderer.elem.setAttribute("id",this._id),this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagVisible&&this._renderer.elem.setAttribute("display",this._visible?"inline":"none"),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(ct.group.appendChild,n),this._flagSubtractions&&this.subtractions.forEach(ct.group.removeChild,n),this._flagOrder&&this.children.forEach(ct.group.orderChild,n),this._flagMask&&(this._mask?(ct[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.dataset&&Object.assign(this._renderer.elem.dataset,this.dataset),this.flagReset()}},path:{render:function(t){if(this._opacity===0&&!this._flagOpacity)return this;this._update();const i={};if((this._matrix.manual||this._flagMatrix)&&(i.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(i.id=this._id),this._flagVertices){const l=ct.toString(this._renderer.vertices,this._closed);i.d=l}if(this._fill&&this._fill._renderer&&(this._renderer.hasFillEffect=!0,this._fill._update(),ct[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(i.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&typeof this._fill.id>"u"&&(t.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer&&(this._renderer.hasStrokeEffect=!0,this._stroke._update(),ct[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(i.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&typeof this._stroke.id>"u"&&(t.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(i["stroke-width"]=this._linewidth),this._flagOpacity&&(i["stroke-opacity"]=this._opacity,i["fill-opacity"]=this._opacity),this._flagClassName&&(i.class=this.classList.join(" ")),this._flagVisible&&(i.visibility=this._visible?"visible":"hidden"),this._flagCap&&(i["stroke-linecap"]=this._cap),this._flagJoin&&(i["stroke-linejoin"]=this._join),this._flagMiter&&(i["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(i["stroke-dasharray"]=this.dashes.join(" "),i["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?ct.setAttributes(this._renderer.elem,i):(i.id=this._id,this._renderer.elem=ct.createElement("path",i),t.appendChild(this._renderer.elem)),this._flagClip){const l=ct.getClip(this,t),o=this._renderer.elem;this._clip?(o.removeAttribute("id"),l.setAttribute("id",this.id),l.appendChild(o)):(l.removeAttribute("id"),o.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(o))}return this._flagMask&&(this._mask?(ct[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},points:{render:function(t){if(this._opacity===0&&!this._flagOpacity)return this;this._update();const i={};if((this._matrix.manual||this._flagMatrix)&&(i.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(i.id=this._id),this._flagVertices||this._flagSize||this._flagSizeAttenuation){let l=this._size;if(!this._sizeAttenuation){const u=this.worldMatrix.elements,f=hi(u[0],u[3],u[1],u[4],u[2],u[5]);l/=Math.max(f.scaleX,f.scaleY)}const o=ct.pointsToString(this._renderer.collection,l);i.d=o}return this._fill&&this._fill._renderer&&(this._renderer.hasFillEffect=!0,this._fill._update(),ct[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(i.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&typeof this._fill.id>"u"&&(t.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer&&(this._renderer.hasStrokeEffect=!0,this._stroke._update(),ct[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(i.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&typeof this._stroke.id>"u"&&(t.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(i["stroke-width"]=this._linewidth),this._flagOpacity&&(i["stroke-opacity"]=this._opacity,i["fill-opacity"]=this._opacity),this._flagClassName&&(i.class=this.classList.join(" ")),this._flagVisible&&(i.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(i["stroke-dasharray"]=this.dashes.join(" "),i["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?ct.setAttributes(this._renderer.elem,i):(i.id=this._id,this._renderer.elem=ct.createElement("path",i),t.appendChild(this._renderer.elem)),this.flagReset()}},text:{render:function(t){this._update();const i={};if((this._matrix.manual||this._flagMatrix)&&(i.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(i.id=this._id),this._flagFamily&&(i["font-family"]=this._family),this._flagSize&&(i["font-size"]=this._size),this._flagLeading&&(i["line-height"]=this._leading),this._flagAlignment&&(i["text-anchor"]=ct.alignments[this._alignment]||this._alignment),this._flagBaseline&&(i["dominant-baseline"]=ct.baselines[this._baseline]||this._baseline),this._flagStyle&&(i["font-style"]=this._style),this._flagWeight&&(i["font-weight"]=this._weight),this._flagDecoration&&(i["text-decoration"]=this._decoration),this._flagDirection&&(i.direction=this._direction),this._fill&&this._fill._renderer&&(this._renderer.hasFillEffect=!0,this._fill._update(),ct[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(i.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&typeof this._fill.id>"u"&&(t.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer&&(this._renderer.hasStrokeEffect=!0,this._stroke._update(),ct[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(i.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&typeof this._stroke.id>"u"&&(t.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(i["stroke-width"]=this._linewidth),this._flagOpacity&&(i.opacity=this._opacity),this._flagClassName&&(i.class=this.classList.join(" ")),this._flagVisible&&(i.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(i["stroke-dasharray"]=this.dashes.join(" "),i["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?ct.setAttributes(this._renderer.elem,i):(i.id=this._id,this._renderer.elem=ct.createElement("text",i),t.appendChild(this._renderer.elem)),this._flagClip){const l=ct.getClip(this,t),o=this._renderer.elem;this._clip?(o.removeAttribute("id"),l.setAttribute("id",this.id),l.appendChild(o)):(l.removeAttribute("id"),o.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(o))}return this._flagMask&&(this._mask?(ct[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,i){i||this._update();const n={};if(this._flagId&&(n.id=this._id),this._flagEndPoints&&(n.x1=this.left._x,n.y1=this.left._y,n.x2=this.right._x,n.y2=this.right._y),this._flagSpread&&(n.spreadMethod=this._spread),this._flagUnits&&(n.gradientUnits=this._units),this._renderer.elem?ct.setAttributes(this._renderer.elem,n):(n.id=this._id,this._renderer.elem=ct.createElement("linearGradient",n)),this._renderer.elem.parentNode===null&&t.defs.appendChild(this._renderer.elem),this._flagStops){const l=this._renderer.elem.childNodes.length!==this.stops.length;if(l)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let o=0;o<this.stops.length;o++){const u=this.stops[o],f={};u._flagOffset&&(f.offset=100*u._offset+"%"),u._flagColor&&(f["stop-color"]=u._color),u._flagOpacity&&(f["stop-opacity"]=u._opacity),u._renderer.elem?ct.setAttributes(u._renderer.elem,f):u._renderer.elem=ct.createElement("stop",f),l&&this._renderer.elem.appendChild(u._renderer.elem),u.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,i){i||this._update();const n={};if(this._flagId&&(n.id=this._id),this._flagCenter&&(n.cx=this.center._x,n.cy=this.center._y),this._flagFocal&&(n.fx=this.focal._x,n.fy=this.focal._y),this._flagRadius&&(n.r=this._radius),this._flagSpread&&(n.spreadMethod=this._spread),this._flagUnits&&(n.gradientUnits=this._units),this._renderer.elem?ct.setAttributes(this._renderer.elem,n):(n.id=this._id,this._renderer.elem=ct.createElement("radialGradient",n)),this._renderer.elem.parentNode===null&&t.defs.appendChild(this._renderer.elem),this._flagStops){const l=this._renderer.elem.childNodes.length!==this.stops.length;if(l)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let o=0;o<this.stops.length;o++){const u=this.stops[o],f={};u._flagOffset&&(f.offset=100*u._offset+"%"),u._flagColor&&(f["stop-color"]=u._color),u._flagOpacity&&(f["stop-opacity"]=u._opacity),u._renderer.elem?ct.setAttributes(u._renderer.elem,f):u._renderer.elem=ct.createElement("stop",f),l&&this._renderer.elem.appendChild(u._renderer.elem),u.flagReset()}}return this.flagReset()}},texture:{render:function(t,i){i||this._update();const n={},l={x:0,y:0},o=this.image;if(this._flagId&&(n.id=this._id),this._flagLoaded&&this.loaded)switch(o.nodeName.toLowerCase()){case"canvas":l.href=l["xlink:href"]=o.toDataURL("image/png");break;case"img":case"image":l.href=l["xlink:href"]=this.src;break}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(n.x=this._offset.x,n.y=this._offset.y,o&&(n.x-=o.width/2,n.y-=o.height/2,this._scale instanceof K?(n.x*=this._scale.x,n.y*=this._scale.y):(n.x*=this._scale,n.y*=this._scale)),n.x>0&&(n.x*=-1),n.y>0&&(n.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(n.width=0,n.height=0,o)){switch(n.width=o.width,n.height=o.height,this._repeat){case"no-repeat":n.width+=1,n.height+=1;break}this._scale instanceof K?(n.width*=this._scale.x,n.height*=this._scale.y):(n.width*=this._scale,n.height*=this._scale),l.width=n.width,l.height=n.height}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?ct.setAttributes(this._renderer.image,l):this._renderer.image=ct.createElement("image",l)),this._renderer.elem?Object.keys(n).length!==0&&ct.setAttributes(this._renderer.elem,n):(n.id=this._id,n.patternUnits="userSpaceOnUse",this._renderer.elem=ct.createElement("pattern",n)),this._renderer.elem.parentNode===null&&t.defs.appendChild(this._renderer.elem),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},ma=class extends U{constructor(t){super(),this.domElement=t.domElement||ct.createElement("svg"),this.scene=new Gt,this.scene.parent=this,this.defs=ct.createElement("defs"),this.defs._flagUpdate=!1,this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"}setSize(t,i){return this.width=t,this.height=i,ct.setAttributes(this.domElement,{width:t,height:i}),this.trigger(U.Types.resize,t,i)}render(){return ct.group.render.call(this.scene,this.domElement),ct.defs.update(this.domElement),this}};y(ma,"Utils",ct);var xe={create:function(t,i,n){const l=t.createShader(t[n]);if(t.shaderSource(l,i),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS)){const u=t.getShaderInfoLog(l);throw t.deleteShader(l),new de("unable to compile shader "+l+": "+u)}return l},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},path:{vertex:`
      precision mediump float;
      attribute vec2 a_position;

      uniform mat3 u_matrix;
      uniform vec2 u_resolution;
      uniform vec4 u_rect;

      varying vec2 v_textureCoords;

      void main() {
        vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;
        vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;
        vec2 normal = projected / u_resolution;
        vec2 clipspace = (normal * 2.0) - 1.0;

        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);
        v_textureCoords = a_position;
      }
    `,fragment:`
      precision mediump float;

      uniform sampler2D u_image;
      varying vec2 v_textureCoords;

      void main() {
        vec4 texel = texture2D(u_image, v_textureCoords);
        if (texel.a == 0.0) {
          discard;
        }
        gl_FragColor = texel;
      }
    `},points:{vertex:`
      precision mediump float;
      attribute vec2 a_position;

      uniform float u_size;
      uniform mat3 u_matrix;
      uniform vec2 u_resolution;

      varying vec2 v_textureCoords;

      void main() {
        vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;
        vec2 normal = projected / u_resolution;
        vec2 clipspace = (normal * 2.0) - 1.0;

        gl_PointSize = u_size;
        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);
        v_textureCoords = a_position;
      }
    `,fragment:`
      precision mediump float;

      uniform sampler2D u_image;

      void main() {
        vec4 texel = texture2D(u_image, gl_PointCoord);
        if (texel.a == 0.0) {
          discard;
        }
        gl_FragColor = texel;
      }
    `}},as=Qe.Multiply,lo=[1,0,0,0,1,0,0,0,1],Xe=new Oe(9),oo=fi.Utils,Un=new K,sr=new Oe([0,0,1,0,0,1,0,1,1,0,1,1]),_t={precision:.9,isHidden:/(undefined|none|transparent)/i,canvas:Vt.document?Vt.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new Qe,group:{removeChild:function(t,i){if(t.children)for(let n=0;n<t.children.length;n++)_t.group.removeChild(t.children[n],i);t._renderer.texture&&(i.deleteTexture(t._renderer.texture),delete t._renderer.texture),t._renderer.positionBuffer&&(i.deleteBuffer(t._renderer.positionBuffer),delete t._renderer.positionBuffer)},render:function(t,i){if(!this._visible)return;this._update();const n=this.parent,l=n._matrix&&n._matrix.manual||n._flagMatrix,o=this._matrix.manual||this._flagMatrix;(l||o)&&(this._renderer.matrix||(this._renderer.matrix=new Oe(9)),this._matrix.toTransformArray(!0,Xe),as(Xe,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(n._renderer.type)||(this._renderer.scale.x*=n._renderer.scale.x,this._renderer.scale.y*=n._renderer.scale.y),l&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),_t[this._mask._renderer.type].render.call(this._mask,t,i,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),this._flagOpacity=n._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1);let u;if(this._flagSubtractions)for(u=0;u<this.subtractions.length;u++)_t.group.removeChild(this.subtractions[u],t);for(u=0;u<this.children.length;u++){const f=this.children[u];_t[f._renderer.type].render.call(f,t,i)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(t,i){let n,l,o,u,f,g,b,m,S,k,T,v,L,B;const z=i._renderer.vertices,I=this.canvas,M=this.ctx,X=t.renderer.ratio,Y=Un.copy(i._renderer.scale).multiply(X),W=i._stroke,Z=i._linewidth,Q=i._fill,ft=i._renderer.opacity||i._opacity,et=i._cap,it=i._join,yt=i._miter,st=i._closed,Rt=i.dashes,F=z.length,wt=F-1;I.width=Math.max(Math.ceil(i._renderer.rect.width*Y.x),1),I.height=Math.max(Math.ceil(i._renderer.rect.height*Y.y),1);const lt=i._renderer.rect.centroid,V=lt.x,tt=lt.y;M.clearRect(0,0,I.width,I.height),Q&&(typeof Q=="string"?M.fillStyle=Q:(_t[Q._renderer.type].render.call(Q,M,i),M.fillStyle=Q._renderer.effect)),W&&(typeof W=="string"?M.strokeStyle=W:(_t[W._renderer.type].render.call(W,M,i),M.strokeStyle=W._renderer.effect),Z&&(M.lineWidth=Z),yt&&(M.miterLimit=yt),it&&(M.lineJoin=it),!st&&et&&(M.lineCap=et)),typeof ft=="number"&&(M.globalAlpha=ft),Rt&&Rt.length>0&&(M.lineDashOffset=Rt.offset||0,M.setLineDash(Rt));let Lt,ee,Ct,ge,ke,Le,Be,Ne;M.save(),M.scale(Y.x,Y.y),M.translate(V,tt),M.beginPath();for(let re=0;re<z.length;re++){const Ft=z[re];switch(v=Ft.x,L=Ft.y,Ft.command){case G.close:M.closePath();break;case G.arc:ee=Ft.rx,Ct=Ft.ry,ge=Ft.xAxisRotation,ke=Ft.largeArcFlag,Le=Ft.sweepFlag,n=st?_e(re-1,F):Math.max(re-1,0),l=z[n],Be=l.x,Ne=l.y,oo.renderSvgArcCommand(M,Be,Ne,ee,Ct,ke,Le,ge,v,L);break;case G.curve:n=st?_e(re-1,F):Math.max(re-1,0),l=z[n],m=l.controls&&l.controls.right||K.zero,S=Ft.controls&&Ft.controls.left||K.zero,l._relative?(g=m.x+l.x,b=m.y+l.y):(g=m.x,b=m.y),Ft._relative?(u=S.x+Ft.x,f=S.y+Ft.y):(u=S.x,f=S.y),M.bezierCurveTo(g,b,u,f,v,L),re>=wt&&st&&(o=Lt,k=Ft.controls&&Ft.controls.right||K.zero,T=o.controls&&o.controls.left||K.zero,Ft._relative?(g=k.x+Ft.x,b=k.y+Ft.y):(g=k.x,b=k.y),o._relative?(u=T.x+o.x,f=T.y+o.y):(u=T.x,f=T.y),v=o.x,L=o.y,M.bezierCurveTo(g,b,u,f,v,L));break;case G.line:M.lineTo(v,L);break;case G.move:Lt=Ft,M.moveTo(v,L);break}}st&&M.closePath(),_t.isHidden.test(Q)||(B=Q._renderer&&Q._renderer.offset,B&&(M.save(),M.translate(-Q._renderer.offset.x,-Q._renderer.offset.y),M.scale(Q._renderer.scale.x,Q._renderer.scale.y)),M.fill(),B&&M.restore()),_t.isHidden.test(W)||(B=W._renderer&&W._renderer.offset,B&&(M.save(),M.translate(-W._renderer.offset.x,-W._renderer.offset.y),M.scale(W._renderer.scale.x,W._renderer.scale.y),M.lineWidth=Z/W._renderer.scale.x),M.stroke(),B&&M.restore()),M.restore()},getBoundingClientRect:function(t,i,n){let l=1/0,o=-1/0,u=1/0,f=-1/0,g,b;t.forEach(function(m){const S=m.x,k=m.y,T=m.controls;let v,L,B,z,I,M;u=Math.min(k,u),l=Math.min(S,l),o=Math.max(S,o),f=Math.max(k,f),m.controls&&(I=T.left,M=T.right,!(!I||!M)&&(v=m._relative?I.x+S:I.x,L=m._relative?I.y+k:I.y,B=m._relative?M.x+S:M.x,z=m._relative?M.y+k:M.y,!(!v||!L||!B||!z)&&(u=Math.min(L,z,u),l=Math.min(v,B,l),o=Math.max(v,B,o),f=Math.max(L,z,f))))}),typeof i=="number"&&(u-=i,l-=i,o+=i,f+=i),g=o-l,b=f-u,n.top=u,n.left=l,n.right=o,n.bottom=f,n.width=g,n.height=b,n.centroid||(n.centroid={}),n.centroid.x=-l,n.centroid.y=-u},render:function(t,i,n){if(!this._visible||!this._opacity)return this;this._update();const l=n||this.parent,o=i[this._renderer.type],u=l._matrix.manual||l._flagMatrix,f=this._matrix.manual||this._flagMatrix,g=this._renderer.parent!==l,b=this._flagVertices||this._flagFill||this._fill instanceof jt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof zt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Et&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof jt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof zt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Et&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||l._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((u||f||g)&&(this._renderer.matrix||(this._renderer.matrix=new Oe(9)),this._matrix.toTransformArray(!0,Xe),as(Xe,l._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?(this._renderer.scale.x=this._scale.x*l._renderer.scale.x,this._renderer.scale.y=this._scale.y*l._renderer.scale.y):(this._renderer.scale.x=this._scale*l._renderer.scale.x,this._renderer.scale.y=this._scale*l._renderer.scale.y),g&&(this._renderer.parent=l)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),_t[this._mask._renderer.type].render.call(this._mask,t,i,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),b?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*l._renderer.opacity,_t.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),_t.updateTexture.call(_t,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!n||!this._renderer.texture)return this;i.current!==o&&(t.useProgram(o),t.bindBuffer(t.ARRAY_BUFFER,i.buffers.position),t.vertexAttribPointer(o.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o.position),t.bufferData(t.ARRAY_BUFFER,sr,t.STATIC_DRAW),i.resolution.flagged||t.uniform2f(t.getUniformLocation(o,"u_resolution"),i.resolution.width,i.resolution.height),i.current=o),i.resolution.flagged&&t.uniform2f(t.getUniformLocation(o,"u_resolution"),i.resolution.width,i.resolution.height),t.bindTexture(t.TEXTURE_2D,this._renderer.texture);const m=this._renderer.rect;return t.uniformMatrix3fv(o.matrix,!1,this._renderer.matrix),t.uniform4f(o.rect,m.left,m.top,m.right,m.bottom),t.drawArrays(t.TRIANGLES,0,6),this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},points:{updateCanvas:function(t,i){let n;const l=this.canvas,o=this.ctx,u=t.renderer.ratio,f=i._stroke,g=i._linewidth,b=i._fill,m=i._renderer.opacity||i._opacity,S=i.dashes,k=i._size*u;let T=k;_t.isHidden.test(f)||(T+=g),l.width=Jn(T),l.height=l.width;const v=T/l.width,L=l.width/2,B=l.height/2;o.clearRect(0,0,l.width,l.height),b&&(typeof b=="string"?o.fillStyle=b:(_t[b._renderer.type].render.call(b,o,i),o.fillStyle=b._renderer.effect)),f&&(typeof f=="string"?o.strokeStyle=f:(_t[f._renderer.type].render.call(f,o,i),o.strokeStyle=f._renderer.effect),g&&(o.lineWidth=g/v)),typeof m=="number"&&(o.globalAlpha=m),S&&S.length>0&&(o.lineDashOffset=S.offset||0,o.setLineDash(S)),o.save(),o.translate(L,B),o.scale(_t.precision,_t.precision),o.beginPath(),o.arc(0,0,k/v*.5,0,ie),o.restore(),closed&&o.closePath(),_t.isHidden.test(b)||(n=b._renderer&&b._renderer.offset,n&&(o.save(),o.translate(-b._renderer.offset.x,-b._renderer.offset.y),o.scale(b._renderer.scale.x,b._renderer.scale.y)),o.fill(),n&&o.restore()),_t.isHidden.test(f)||(n=f._renderer&&f._renderer.offset,n&&(o.save(),o.translate(-f._renderer.offset.x,-f._renderer.offset.y),o.scale(f._renderer.scale.x,f._renderer.scale.y),o.lineWidth=g/f._renderer.scale.x),o.stroke(),n&&o.restore())},render:function(t,i,n){if(!this._visible||!this._opacity)return this;this._update();let l=this._size;const o=n||this.parent,u=i[this._renderer.type],f=this._sizeAttenuation,g=this._stroke,b=this._linewidth,m=o._matrix.manual||o._flagMatrix,S=this._matrix.manual||this._flagMatrix,k=this._renderer.parent!==o,T=this._renderer.vertices,v=this._renderer.collection.length,L=this._flagVertices,B=this._flagFill||this._fill instanceof jt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof zt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Et&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof jt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof zt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Et&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||o._flagOpacity||this._flagVisible||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((m||S||k)&&(this._renderer.matrix||(this._renderer.matrix=new Oe(9)),this._matrix.toTransformArray(!0,Xe),as(Xe,o._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?(this._renderer.scale.x=this._scale.x*o._renderer.scale.x,this._renderer.scale.y=this._scale.y*o._renderer.scale.y):(this._renderer.scale.x=this._scale*o._renderer.scale.x,this._renderer.scale.y=this._scale*o._renderer.scale.y),k&&(this._renderer.parent=o)),L){const z=this._renderer.positionBuffer;z&&t.deleteBuffer(z),this._renderer.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._renderer.positionBuffer),t.vertexAttribPointer(u.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(u.position),t.bufferData(t.ARRAY_BUFFER,T,t.STATIC_DRAW)}return B?(this._renderer.opacity=this._opacity*o._renderer.opacity,_t.updateTexture.call(_t,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!n||!this._renderer.texture?this:(_t.isHidden.test(g)||(l+=b),l/=_t.precision,f&&(l*=Math.max(this._renderer.scale.x,this._renderer.scale.y)),i.current!==u&&(t.useProgram(u),i.resolution.flagged||t.uniform2f(t.getUniformLocation(u,"u_resolution"),i.resolution.width,i.resolution.height),i.current=u),i.resolution.flagged&&t.uniform2f(t.getUniformLocation(u,"u_resolution"),i.resolution.width,i.resolution.height),t.bindTexture(t.TEXTURE_2D,this._renderer.texture),t.uniformMatrix3fv(u.matrix,!1,this._renderer.matrix),t.uniform1f(u.size,l*i.resolution.ratio),t.drawArrays(t.POINTS,0,v),this.flagReset())}},text:{updateCanvas:function(t,i){const n=this.canvas,l=this.ctx,o=t.renderer.ratio,u=Un.copy(i._renderer.scale).multiply(o),f=i._stroke,g=i._linewidth,b=i._fill,m=i._renderer.opacity||i._opacity,S=i.dashes,k=i._decoration,T=i._direction;n.width=Math.max(Math.ceil(i._renderer.rect.width*u.x),1),n.height=Math.max(Math.ceil(i._renderer.rect.height*u.y),1);const v=i._renderer.rect.centroid,L=v.x,B=v.y;let z,I,M,X,Y,W,Z,Q,ft,et,it;const yt=b._renderer&&b._renderer.offset&&f._renderer&&f._renderer.offset;if(l.clearRect(0,0,n.width,n.height),yt||(l.font=[i._style,i._weight,i._size+"px/"+i._leading+"px",i._family].join(" ")),l.textAlign="center",l.textBaseline="middle",l.textDirection=T,b&&(typeof b=="string"?l.fillStyle=b:(_t[b._renderer.type].render.call(b,l,i),l.fillStyle=b._renderer.effect)),f&&(typeof f=="string"?l.strokeStyle=f:(_t[f._renderer.type].render.call(f,l,i),l.strokeStyle=f._renderer.effect),g&&(l.lineWidth=g)),typeof m=="number"&&(l.globalAlpha=m),S&&S.length>0&&(l.lineDashOffset=S.offset||0,l.setLineDash(S)),l.save(),l.scale(u.x,u.y),l.translate(L,B),_t.isHidden.test(b)||(b._renderer&&b._renderer.offset?(W=b._renderer.scale.x,Z=b._renderer.scale.y,l.save(),l.translate(-b._renderer.offset.x,-b._renderer.offset.y),l.scale(W,Z),z=i._size/b._renderer.scale.y,I=i._leading/b._renderer.scale.y,l.font=[i._style,i._weight,z+"px/",I+"px",i._family].join(" "),M=b._renderer.offset.x/b._renderer.scale.x,X=b._renderer.offset.y/b._renderer.scale.y,l.fillText(i.value,M,X),l.restore()):l.fillText(i.value,0,0)),_t.isHidden.test(f)||(f._renderer&&f._renderer.offset?(W=f._renderer.scale.x,Z=f._renderer.scale.y,l.save(),l.translate(-f._renderer.offset.x,-f._renderer.offset.y),l.scale(W,Z),z=i._size/f._renderer.scale.y,I=i._leading/f._renderer.scale.y,l.font=[i._style,i._weight,z+"px/",I+"px",i._family].join(" "),M=f._renderer.offset.x/f._renderer.scale.x,X=f._renderer.offset.y/f._renderer.scale.y,Y=g/f._renderer.scale.x,l.lineWidth=Y,l.strokeText(i.value,M,X),l.restore()):l.strokeText(i.value,0,0)),/(underline|strikethrough)/i.test(k)){const st=l.measureText(i.value);switch(k){case"underline":ft=st.actualBoundingBoxDescent,it=st.actualBoundingBoxDescent;break;case"strikethrough":ft=0,it=0;break}Q=-st.width/2,et=st.width/2,l.lineWidth=Math.max(Math.floor(i._size/15),1),l.strokeStyle=l.fillStyle,l.beginPath(),l.moveTo(Q,ft),l.lineTo(et,it),l.stroke()}l.restore()},getBoundingClientRect:function(t,i){const n=_t.ctx;n.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),n.textAlign="center",n.textBaseline=fi.Utils.baselines[t._baseline]||t._baseline;const l=n.measureText(t._value);let o=l.width,u=1.15*(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent);this._linewidth&&!_t.isHidden.test(this._stroke)&&(o+=this._linewidth*2,u+=this._linewidth*2);const f=o/2,g=u/2;switch(_t.alignments[t._alignment]||t._alignment){case _t.alignments.left:t.direction==="ltr"?(i.left=0,i.right=o):(i.left=-o,i.right=0);break;case _t.alignments.right:t.direction==="ltr"?(i.left=-o,i.right=0):(i.left=0,i.right=o);break;default:i.left=-f,i.right=f}switch(t._baseline){case"bottom":i.top=-u,i.bottom=0;break;case"top":i.top=0,i.bottom=u;break;case"baseline":i.top=-g*1.5,i.bottom=g*.5;break;default:i.top=-g,i.bottom=g}i.width=o,i.height=u,i.centroid||(i.centroid={}),i.centroid.x=f,i.centroid.y=g},render:function(t,i,n){if(!this._visible||!this._opacity)return this;this._update();const l=n||this.parent,o=i[this._renderer.type],u=l._matrix.manual||l._flagMatrix,f=this._matrix.manual||this._flagMatrix,g=this._renderer.parent!==l,b=this._flagVertices||this._flagFill||this._fill instanceof jt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof zt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Et&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof jt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof zt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Et&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||l._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((u||f||g)&&(this._renderer.matrix||(this._renderer.matrix=new Oe(9)),this._matrix.toTransformArray(!0,Xe),as(Xe,l._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?(this._renderer.scale.x=this._scale.x*l._renderer.scale.x,this._renderer.scale.y=this._scale.y*l._renderer.scale.y):(this._renderer.scale.x=this._scale*l._renderer.scale.x,this._renderer.scale.y=this._scale*l._renderer.scale.y),g&&(this._renderer.parent=l)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),_t[this._mask._renderer.type].render.call(this._mask,t,i,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),b?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*l._renderer.opacity,_t.text.getBoundingClientRect(this,this._renderer.rect),_t.updateTexture.call(_t,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!n||!this._renderer.texture)return this;i.current!==o&&(t.useProgram(o),t.bindBuffer(t.ARRAY_BUFFER,i.buffers.position),t.vertexAttribPointer(o.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o.position),t.bufferData(t.ARRAY_BUFFER,sr,t.STATIC_DRAW),i.resolution.flagged||t.uniform2f(t.getUniformLocation(o,"u_resolution"),i.resolution.width,i.resolution.height),i.current=o),i.resolution.flagged&&t.uniform2f(t.getUniformLocation(o,"u_resolution"),i.resolution.width,i.resolution.height),t.bindTexture(t.TEXTURE_2D,this._renderer.texture);const m=this._renderer.rect;return t.uniformMatrix3fv(o.matrix,!1,this._renderer.matrix),t.uniform4f(o.rect,m.left,m.top,m.right,m.bottom),t.drawArrays(t.TRIANGLES,0,6),this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},"linear-gradient":{render:function(t,i){if(!(!t.canvas.getContext("2d")||!i)){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let n,l=this.left._x,o=this.left._y,u=this.right._x,f=this.right._y;/objectBoundingBox/i.test(this._units)&&(n=i.getBoundingClientRect(!0),l=(l-.5)*n.width,o=(o-.5)*n.height,u=(u-.5)*n.width,f=(f-.5)*n.height),this._renderer.effect=t.createLinearGradient(l,o,u,f);for(let g=0;g<this.stops.length;g++){const b=this.stops[g];this._renderer.effect.addColorStop(b._offset,b._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,i){if(!(!t.canvas.getContext("2d")||!i)){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let n,l=this.center._x,o=this.center._y,u=this.focal._x,f=this.focal._y,g=this._radius;/objectBoundingBox/i.test(this._units)&&(n=i.getBoundingClientRect(!0),l=(l-.5)*n.width*.5,o=(o-.5)*n.height*.5,u=(u-.5)*n.width*.5,f=(f-.5)*n.height*.5,g*=Math.min(n.width,n.height)),this._renderer.effect=t.createRadialGradient(l,o,0,u,f,g);for(let b=0;b<this.stops.length;b++){const m=this.stops[b];this._renderer.effect.addColorStop(m._offset,m._color)}}return this.flagReset()}}},texture:{render:function(t,i){if(!t.canvas.getContext("2d"))return;this._update();const n=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(n,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof K||(this._renderer.offset=new K),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,n&&(this._renderer.offset.x+=n.width/2,this._renderer.offset.y+=n.height/2,this._scale instanceof K?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},updateTexture:function(t,i){if(this[i._renderer.type].updateCanvas.call(_t,t,i),this.canvas.width<=0||this.canvas.height<=0){i._renderer.texture&&t.deleteTexture(i._renderer.texture),delete i._renderer.texture;return}i._renderer.texture||(i._renderer.texture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,i._renderer.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR)},program:{create:function(t,i){let n,l,o;if(n=t.createProgram(),nt.each(i,function(u){t.attachShader(n,u)}),t.linkProgram(n),l=t.getProgramParameter(n,t.LINK_STATUS),!l)throw o=t.getProgramInfoLog(n),t.deleteProgram(n),new de("unable to link program: "+o);return n}},extensions:{init:function(t){const i={},n=["EXT_texture_filter_anisotropic","WEBGL_compressed_texture_s3tc","OES_texture_float_linear","WEBGL_multisampled_render_to_texture"];for(let l=0;l<n.length;l++){const o=n[l];i[o]=_t.extensions.get(t,o)}return i},get:function(t,i){return t.getExtension(i)||t.getExtension(`MOZ_${i}`)||t.getExtension(`WEBKIT_${i}`)}},TextureRegistry:new xs};_t.ctx=_t.canvas.getContext("2d");var ya=class extends U{constructor(t){super();let i,n,l,o;if(this.domElement=t.domElement||document.createElement("canvas"),typeof t.offscreenElement<"u"&&(_t.canvas=t.offscreenElement,_t.ctx=_t.canvas.getContext("2d")),this.scene=new Gt,this.scene.parent=this,this._renderer={type:"renderer",matrix:new Oe(lo),scale:1,opacity:1},this._flagMatrix=!0,t=nt.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,i=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new de("unable to create a webgl context. Try using another renderer.");l=xe.create(i,xe.path.vertex,xe.types.vertex),o=xe.create(i,xe.path.fragment,xe.types.fragment),this.programs={current:null,buffers:{position:i.createBuffer()},resolution:{width:0,height:0,ratio:1,flagged:!1}},n=this.programs.path=_t.program.create(i,[l,o]),this.programs.text=this.programs.path,i.extensions=_t.extensions.init(i),i.renderer=this,n.position=i.getAttribLocation(n,"a_position"),n.matrix=i.getUniformLocation(n,"u_matrix"),n.rect=i.getUniformLocation(n,"u_rect");const u=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,u),i.vertexAttribPointer(n.position,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(n.position),i.bufferData(i.ARRAY_BUFFER,sr,i.STATIC_DRAW),l=xe.create(i,xe.points.vertex,xe.types.vertex),o=xe.create(i,xe.points.fragment,xe.types.fragment),n=this.programs.points=_t.program.create(i,[l,o]),n.position=i.getAttribLocation(n,"a_position"),n.matrix=i.getUniformLocation(n,"u_matrix"),n.size=i.getUniformLocation(n,"u_size"),i.enable(i.BLEND),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA)}setSize(t,i,n){let l,o;const u=this.ctx;return this.width=t,this.height=i,this.ratio=typeof n>"u"?nr(u):n,this.domElement.width=t*this.ratio,this.domElement.height=i*this.ratio,nt.isObject(this.domElement.style)&&nt.extend(this.domElement.style,{width:t+"px",height:i+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,l=t*this.ratio,o=i*this.ratio,u.viewport(0,0,l,o),this.programs.resolution.width=l,this.programs.resolution.height=o,this.programs.resolution.ratio=this.ratio,this.programs.resolution.flagged=!0,this.trigger(U.Types.resize,t,i,n)}render(){const t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT),_t.group.render.call(this.scene,t,this.programs),this._flagMatrix=!1,this.programs.resolution.flagged=!0,this}};y(ya,"Utils",_t);var ho=nt.extend({Error:de,getRatio:nr,read:Nt,xhr:pa},nt,ue,Zn,qn),Si=class{constructor(t){y(this,"_events",new U),y(this,"type",""),y(this,"renderer",null),y(this,"scene",null),y(this,"width",0),y(this,"height",0),y(this,"frameCount",0),y(this,"timeDelta",0),y(this,"playing",!1);const i=nt.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:Si.Types.svg,autostart:!1});if(nt.each(i,function(n,l){/fullscreen/i.test(l)||/autostart/i.test(l)||(this[l]=n)},this),nt.isElement(i.domElement)){const n=i.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+n)||(this.type=Si.Types[n])}this.renderer=new Si[this.type](this),this.setPlaying(i.autostart),this.frameCount=0,i.fullscreen?(this.fit=co.bind(this),this.fit.domElement=window,this.fit.attached=!0,nt.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),nt.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),fe.bind(this.fit.domElement,"resize",this.fit),this.fit()):i.fitted?(this.fit=fo.bind(this),nt.extend(this.renderer.domElement.style,{display:"block"})):nt.isElement(i.domElement)||(this.renderer.setSize(i.width,i.height,this.ratio),this.width=i.width,this.height=i.height),this.renderer.bind(U.Types.resize,uo.bind(this)),this.scene=this.renderer.scene,Si.Instances.push(this),i.autostart&&Ei.init()}get _bound(){return this._events._bound}set _bound(t){this._events._bound=t}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.addEventListener.apply(this,arguments)}bind(){return this._events.addEventListener.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.removeEventListener.apply(this,arguments)}unbind(){return this._events.removeEventListener.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.dispatchEvent.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}appendTo(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this}play(){return this.playing=!0,Ei.init(),this.trigger(U.Types.play)}pause(){return this.playing=!1,this.trigger(U.Types.pause)}setPlaying(t){this.playing=t}release(t){let i,n,l;if(!nt.isObject(t))return this.release(this.scene);if(typeof t.unbind=="function"&&t.unbind(),t.vertices)for(typeof t.vertices.unbind=="function"&&t.vertices.unbind(),i=0;i<t.vertices.length;i++)n=t.vertices[i],typeof n.unbind=="function"&&n.unbind(),n.controls&&(n.controls.left&&typeof n.controls.left.unbind=="function"&&n.controls.left.unbind(),n.controls.right&&typeof n.controls.right.unbind=="function"&&n.controls.right.unbind());if(t.children){for(i=0;i<t.children.length;i++)l=t.children[i],this.release(l);typeof t.children.unbind=="function"&&t.children.unbind()}return t}update(){const t=!!this._lastFrame,i=nt.performance.now();t&&(this.timeDelta=parseFloat((i-this._lastFrame).toFixed(3))),this._lastFrame=i,this.fit&&this.fit.domElement&&!this.fit.attached&&(fe.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());const n=this.width,l=this.height,o=this.renderer;return(n!==o.width||l!==o.height)&&o.setSize(n,l,this.ratio),this.trigger(U.Types.update,this.frameCount,this.timeDelta),this.render()}render(){return this.renderer.render(),this.trigger(U.Types.render,this.frameCount++)}add(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.scene.add(t),this}remove(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.scene.remove(t),this}clear(){return this.scene.remove(this.scene.children),this}makeLine(t,i,n,l){const o=new ar(t,i,n,l);return this.scene.add(o),o}makeArrow(t,i,n,l,o){const u=typeof o=="number"?o:10,f=Math.atan2(l-i,n-t),g=[new xt(t,i,void 0,void 0,void 0,void 0,G.move),new xt(n,l,void 0,void 0,void 0,void 0,G.line),new xt(n-u*Math.cos(f-Math.PI/4),l-u*Math.sin(f-Math.PI/4),void 0,void 0,void 0,void 0,G.line),new xt(n,l,void 0,void 0,void 0,void 0,G.move),new xt(n-u*Math.cos(f+Math.PI/4),l-u*Math.sin(f+Math.PI/4),void 0,void 0,void 0,void 0,G.line)],b=new St(g,!1,!1,!0);return b.noFill(),b.cap="round",b.join="round",this.scene.add(b),b}makeRectangle(t,i,n,l){const o=new ti(t,i,n,l);return this.scene.add(o),o}makeRoundedRectangle(t,i,n,l,o){const u=new As(t,i,n,l,o);return this.scene.add(u),u}makeCircle(t,i,n,l){const o=new ws(t,i,n,l);return this.scene.add(o),o}makeEllipse(t,i,n,l,o){const u=new ks(t,i,n,l,o);return this.scene.add(u),u}makeStar(t,i,n,l,o){const u=new cr(t,i,n,l,o);return this.scene.add(u),u}makeCurve(t){const i=arguments.length;if(!Array.isArray(t)){t=[];for(let u=0;u<i;u+=2){const f=arguments[u];if(typeof f!="number")break;const g=arguments[u+1];t.push(new xt(f,g))}}const n=arguments[i-1],l=new St(t,!(typeof n=="boolean"&&n),!0),o=l.getBoundingClientRect();return l.center().translation.set(o.left+o.width/2,o.top+o.height/2),this.scene.add(l),l}makePolygon(t,i,n,l){const o=new hr(t,i,n,l);return this.scene.add(o),o}makeArcSegment(t,i,n,l,o,u,f){const g=new lr(t,i,n,l,o,u,f);return this.scene.add(g),g}makePoints(t){const i=arguments.length;let n=t;if(!Array.isArray(t)){n=[];for(let o=0;o<i;o+=2){const u=arguments[o];if(typeof u!="number")break;const f=arguments[o+1];n.push(new K(u,f))}}const l=new or(n);return this.scene.add(l),l}makePath(t){const i=arguments.length;let n=t;if(!Array.isArray(t)){n=[];for(let f=0;f<i;f+=2){const g=arguments[f];if(typeof g!="number")break;const b=arguments[f+1];n.push(new xt(g,b))}}const l=arguments[i-1],o=new St(n,!(typeof l=="boolean"&&l)),u=o.getBoundingClientRect();return typeof u.top=="number"&&typeof u.left=="number"&&typeof u.right=="number"&&typeof u.bottom=="number"&&o.center().translation.set(u.left+u.width/2,u.top+u.height/2),this.scene.add(o),o}makeText(t,i,n,l){const o=new Re(t,i,n,l);return this.add(o),o}makeLinearGradient(t,i,n,l){const o=Array.prototype.slice.call(arguments,4),u=new jt(t,i,n,l,o);return this.add(u),u}makeRadialGradient(t,i,n){const l=Array.prototype.slice.call(arguments,3),o=new zt(t,i,n,l);return this.add(o),o}makeSprite(t,i,n,l,o,u,f){const g=new vs(t,i,n,l,o,u);return f&&g.play(),this.add(g),g}makeImageSequence(t,i,n,l,o){const u=new Ss(t,i,n,l);return o&&u.play(),this.add(u),u}makeTexture(t,i){return new Et(t,i)}makeGroup(t){t instanceof Array||(t=Array.prototype.slice.call(arguments));const i=new Gt;return this.scene.add(i),i.add(t),i}interpret(t,i,n){const l=t.tagName.toLowerCase();if(n=typeof n<"u"?n:!0,!(l in Nt))return null;const o=Nt[l].call(this,t);return n?this.add(i&&o instanceof Gt?o.children:o):o.parent&&o.remove(),o}load(t,i){const n=new Gt;let l,o,u;const f=(function(g){for(fe.temp.innerHTML=g,o=0;o<fe.temp.children.length;o++)l=fe.temp.children[o],u=this.interpret(l,!1,!1),u!==null&&n.add(u);if(typeof i=="function"){const b=fe.temp.children.length<=1?fe.temp.children[0]:fe.temp.children;i(n,b)}}).bind(this);return/\.svg$/i.test(t)?(pa(t,f),n):(f(t),n)}},mt=Si;y(mt,"nextFrameID",Jt.nextFrameID);y(mt,"Types",Jt.Types);y(mt,"Version",Jt.Version);y(mt,"PublishDate",Jt.PublishDate);y(mt,"Identifier",Jt.Identifier);y(mt,"Resolution",Jt.Resolution);y(mt,"AutoCalculateImportedMatrices",Jt.AutoCalculateImportedMatrices);y(mt,"Instances",Jt.Instances);y(mt,"uniqueId",Jt.uniqueId);y(mt,"Anchor",xt);y(mt,"Collection",qe);y(mt,"Events",U);y(mt,"Group",Gt);y(mt,"Matrix",Qe);y(mt,"Path",St);y(mt,"Registry",xs);y(mt,"Shape",He);y(mt,"Text",Re);y(mt,"Vector",K);y(mt,"Gradient",$t);y(mt,"ImageSequence",Ss);y(mt,"LinearGradient",jt);y(mt,"RadialGradient",zt);y(mt,"Sprite",vs);y(mt,"Stop",Ge);y(mt,"Texture",Et);y(mt,"ArcSegment",lr);y(mt,"Circle",ws);y(mt,"Ellipse",ks);y(mt,"Line",ar);y(mt,"Points",or);y(mt,"Polygon",hr);y(mt,"Rectangle",ti);y(mt,"RoundedRectangle",As);y(mt,"Star",cr);y(mt,"CanvasRenderer",fi);y(mt,"SVGRenderer",ma);y(mt,"WebGLRenderer",ya);y(mt,"Commands",G);y(mt,"Utils",ho);function co(){const t=document.body.getBoundingClientRect(),i=this.width=t.width,n=this.height=t.height;this.renderer.setSize(i,n,this.ratio)}function fo(){const t=this.renderer.domElement.parentElement;if(!t){console.warn("Two.js: Attempting to fit to parent, but no parent found.");return}const i=t.getBoundingClientRect(),n=this.width=i.width,l=this.height=i.height;this.renderer.setSize(n,l,this.ratio)}function uo(t,i){this.width=t,this.height=i,this.trigger(U.Types.resize,t,i)}var Ei=fe.getRequestAnimationFrame();function ba(){for(let t=0;t<mt.Instances.length;t++){const i=mt.Instances[t];i.playing&&i.update()}mt.nextFrameID=Ei(ba)}Ei.init=function(){ba(),Ei.init=function(){}};const _o=10;let Je="",ve="",Wn="",Ze="",ls=!1,Js=!1,wi=0,Ie;const li={EMPTY:"public/white.png",DANDELION:"public/green-asterisk.png",SEED:"public/green-dot.png"},he={DANDELION:"dandelion",WIND:"wind"},go=[[[],[],[1,2,3,4],[6,12,18,24],[5,10,15,20],[],[],[]],[[],[],[2,3,4],[7,13,19],[6,11,16,21],[5],[0],[]],[[],[],[3,4],[8,14],[7,12,17,22],[6,10],[1,0],[]],[[],[],[4],[9],[8,13,18,23],[7,11,15],[2,1,0],[]],[[],[],[],[9,14,19,24],[8,12,16,20],[3,2,1,0],[]],[[0],[1],[6,7,8,9],[11,17,23],[10,15,20],[],[],[]],[[1],[2],[7,8,9],[12,18,24],[11,16,21],[10],[5],[0]],[[2],[3],[8,9],[13,19],[12,17,22],[11,15],[6,5],[1]],[[3],[4],[9],[14],[13,18,23],[12,16,20],[7,6,5],[2]],[[4],[],[],[],[14,19,24],[13,17,21],[8,7,6,5],[3]],[[5,0],[6,2],[11,12,13,14],[16,22],[15,20],[],[],[]],[[1,6],[3,7],[12,13,14],[17,23],[16,21],[15],[10],[5]],[[2,7],[4,8],[13,14],[18,24],[17,22],[16,20],[11,10],[6,0]],[[3,8],[9],[14],[19],[18,23],[17,21],[10,11,12],[1,7]],[[4,9],[],[],[],[19,24],[18,22],[13,12,11,10],[1,7]],[[10,5,0],[11,7,3],[16,17,18,19],[21],[20],[],[],[]],[[11,6,1],[12,8,4],[17,18,19],[22],[21],[20],[15],[10]],[[12,7,2],[13,9],[18,19],[23],[22],[21],[16,15],[11,5]],[[13,8,3],[14],[19],[24],[23],[22],[17,16,15],[11,5]],[[14,9,4],[],[],[],[24],[23],[18,17,16,15],[12,6,0]],[[15,10,5,0],[16,12,8,4],[21,22,23,24],[],[],[],[],[]],[[16,11,6,1],[17,13,9],[22,23,24],[],[],[],[20],[15]],[[17,12,7,2],[18,14],[23,24],[],[],[],[21,20],[16,10]],[[18,13,8,3],[19],[24],[],[],[],[22,21,20],[17,11,5]],[[19,14,9,4],[],[],[],[],[],[23,22,21,20],[18,12,6,0]]];function po(t){return Math.random().toString(36).substring(2,t).toUpperCase()}function mo(){const t=document.getElementById("directions");document.getElementById("output");let i=[],n=document.getElementById("board");for(let F=0;F<25;F++)i[F]=document.createElement("img"),i[F].setAttribute("src",li.EMPTY),n.appendChild(i[F]);let l=document.querySelectorAll("button"),o=[],u=[];var f=document.getElementById("compass"),g=new mt({fitted:!0}).appendTo(f),b={size:14,weight:"bold"},m=g.width*.5,S=g.height*.5,k=g.makeCircle(m,S,50),T=g.makeCircle(m,S,25);k.stroke="green",k.fill="rgb(220, 238, 244)",T.fill="rgb(220, 238, 244)",T.stroke="green",k.linewidth="2px",T.linewidth="2px";let v=[m,m+48,m+66,m+48,m,m-48,m-66,m-48],L=[S-66,S-48,S,S+48,S+66,S+48,S,S-48],B=[m,m+57,m+75,m+57,m,m-57,m-75,m-57],z=[S-75,S-57,S,S+57,S+75,S+57,S,S-57];var I=[];for(let F=0;F<8;F++){I[F]=g.makeArrow(m,S,v[F],L[F]);var M=document.getElementById(String(F));g.makeText(M.innerText,B[F],z[F],b)}g.update();function X(F){t.innerText=F}async function Y(){await W(),Ie.send(`{ "action": "entergame", "data": "${Je}"}`)}async function W(){for(;!Ie||Ie.readyState!==WebSocket.OPEN;)await new Promise(F=>setTimeout(F,25))}async function Z(F){await W();const wt=`${ve}: ${encodeURI(F)}`;console.log(`sending message: ${wt}`),Ie.send(`{ "action": "sendmessage", "data":"${wt}"}`)}function Q(){var F=0;for(let wt=0;wt<25;wt++)i[wt].getAttribute("src")===li.EMPTY&&F++;return F===0}function ft(){return Q()||wi===7}function et(){if(ve===he.WIND&&(Q()||wi===7))for(let F=0;F<buttons.length;F++)buttons[F].classList.add("disabled");Q()?X("The dandelion won!"):wi===7&&X("The wind won!")}function it(F){console.log(`Room ID: ${F}`);const wt="wss://k5fc15wo29.execute-api.us-east-1.amazonaws.com/dev";Ie=new WebSocket(wt),Ie.onopen=lt=>{Z("hi"),console.log("Connected"),Y();const V=document.getElementById("join");if(V){V.innerHTML="";const tt=document.createElement("h3");tt.textContent=`Game ID: ${F}`,V.appendChild(tt)}},Ie.onmessage=lt=>{if(Ze=decodeURI(lt.data),console.log(`receiving message: ${Ze}`),Ze==="wind: connected to the game"&&Rt(),Ze.startsWith("dandelion: turn:")){u=Ze.split(": ")[2].split(","),console.log(u);const V=parseInt(u[u.length-1]);if(i[V].setAttribute("src",li.DANDELION),ls=!1,Js=!0,ft())et();else if(ve===he.DANDELION)X("It's the wind's turn! Wait for your turn.");else if(ve===he.WIND){X("It's the wind's turn! Choose a direction to blow.");for(let tt=0;tt<l.length;tt++)o.includes(tt)||l[tt].classList.remove("disabled")}}if(Ze.startsWith("wind: turn:")){const V=parseInt(Ze.split(":")[2]);o.push(V),I[V].linewidth=5,I[V].stroke="green",g.update(),console.log("dandelionTurns",u);for(let tt=0;tt<u.length;tt++){let Lt=go[parseInt(u[tt])][V];for(let ee=0;ee<Lt.length;ee++)i[Lt[ee]].getAttribute("src")!==li.DANDELION&&i[Lt[ee]].setAttribute("src",li.SEED)}ls=!0,Js=!1,wi++,ft()?et():ve===he.DANDELION?X("It's the dandelion's turn! Choose a square on the grid."):ve===he.WIND&&X("It's the dandelion's turn! Wait for your turn.")}},Ie.onclose=lt=>{console.log("Disconnected")},Ie.onerror=lt=>{console.log("Error: "+lt.data)}}const yt=document.getElementById("start");yt.onclick=()=>{Je=po(_o),it(Je),ve=he.DANDELION,Wn=he.WIND};const st=document.getElementById("join-button");st.onclick=async()=>{if(Je=document.getElementById("enter-game-id").value,Je===""){alert("Please enter your Game ID.");return}try{const lt=await(await fetch(`https://glf3kwiynd.execute-api.us-east-1.amazonaws.com/dev/roomInfoExists?roomId=${encodeURIComponent(Je)}`,{method:"GET"})).json(),V=JSON.parse(lt.body);console.log("parsedBody",V),console.log(V),V.exists?(it(Je),ve=he.WIND,Wn=he.DANDELION,Z("connected to the game")):alert("Game ID does not exist.")}catch(wt){console.error("Error checking roomId",wt),alert("An error occurred while checking the Game ID.")}};function Rt(){ve===he.DANDELION?X("It's the dandelion's turn! Choose a square on the grid."):ve===he.WIND&&X("It's the dandelion's turn! Wait for your turn.");for(let lt=0;lt<l.length;lt++){let V=function(){let tt=l[lt].classList.contains("disabled");if(Js&&!tt&&ve===he.WIND){Z(`turn: ${lt}`);for(let Lt=0;Lt<l.length;Lt++)l[Lt].classList.add("disabled")}};var F=V;l[lt].addEventListener("click",V)}ls=!0;for(let lt=0;lt<25;lt++){let V=function(){ls&&wi!==7&&!ft()&ve===he.DANDELION&&(u.push(lt),Z(`turn: ${u}`),i[lt].removeEventListener("click",V),i[lt].setAttribute("src",li.DANDELION))};var wt=V;i[lt].addEventListener("click",V)}}}document.addEventListener("DOMContentLoaded",mo);var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yo={exports:{}};(function(t,i){var n=(()=>{var l=Object.defineProperty,o=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,g=(s,e,r)=>e in s?l(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,b=(s,e)=>{for(var r in e)l(s,r,{get:e[r],enumerable:!0})},m=(s,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let h of u(e))!f.call(s,h)&&h!==r&&l(s,h,{get:()=>e[h],enumerable:!(a=o(e,h))||a.enumerable});return s},S=s=>m(l({},"__esModule",{value:!0}),s),k=(s,e,r)=>(g(s,typeof e!="symbol"?e+"":e,r),r),T={};b(T,{default:()=>pt});var v={move:"M",line:"L",curve:"C",arc:"A",close:"Z"},L={};b(L,{HALF_PI:()=>M,NumArray:()=>it,TWO_PI:()=>I,decomposeMatrix:()=>X,getComputedMatrix:()=>W,getPoT:()=>ft,lerp:()=>Z,mod:()=>et,setMatrix:()=>Y,toFixed:()=>st});var B;typeof window<"u"?B=window:typeof Xn<"u"?B=Xn:typeof self<"u"&&(B=self);var z,I=Math.PI*2,M=Math.PI*.5;function X(s,e,r,a,h,c){let d;return arguments.length<=1?(d=s.a,e=s.b,r=s.c,a=s.d,h=s.e,c=s.f):d=s,{translateX:h,translateY:c,scaleX:Math.sqrt(d*d+e*e),scaleY:Math.sqrt(r*r+a*a),rotation:180*Math.atan2(e,d)/Math.PI}}function Y(s){z=s}function W(s,e){e=e&&e.identity()||new z;let r=s;const a=[];for(;r&&r._matrix;)a.push(r._matrix),r=r.parent;a.reverse();for(let h=0;h<a.length;h++){const d=a[h].elements;e.multiply(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9])}return e}function Z(s,e,r){return r*(e-s)+s}var Q=[2,4,8,16,32,64,128,256,512,1024,2048,4096];function ft(s){let e=0;for(;Q[e]&&Q[e]<s;)e++;return Q[e]}function et(s,e){for(;s<0;)s+=e;return s%e}var it=B.Float32Array||Array,yt=Math.floor;function st(s){return yt(s*1e6)/1e6}var Rt={};b(Rt,{Curve:()=>ge,getAnchorsFromArcData:()=>xa,getComponentOnCubicBezier:()=>ke,getControlPoints:()=>fr,getCurveBoundingBox:()=>Ne,getCurveFromPoints:()=>Ft,getCurveLength:()=>Be,getReflection:()=>Rs,integrate:()=>re,subdivide:()=>Le});var F=class{constructor(){w(this,"_events",{});w(this,"_bound",!1)}addEventListener(s,e){return(this._events[s]||(this._events[s]=[])).push(e),this._bound=!0,this}on(){return this.addEventListener.apply(this,arguments)}bind(){return this.addEventListener.apply(this,arguments)}removeEventListener(s,e){if(!this._events)return this;if(!s&&!e)return this._events={},this._bound=!1,this;const r=s?[s]:Object.keys(this._events);for(let a=0,h=r.length;a<h;a++){s=r[a];let c=this._events[s];if(c){let d=[];if(e)for(let _=0,x=c.length;_<x;_++){let p=c[_];p=p.handler?p.handler:p,e!==p&&d.push(p)}this._events[s]=d}}return this}off(){return this.removeEventListener.apply(this,arguments)}unbind(){return this.removeEventListener.apply(this,arguments)}dispatchEvent(s){if(!this._events)return this;const e=Array.prototype.slice.call(arguments,1),r=this._events[s];if(r)for(let a=0;a<r.length;a++)r[a].call(this,...e);return this}trigger(){return this.dispatchEvent.apply(this,arguments)}listen(s,e,r){const a=this;s&&(h.obj=s,h.name=e,h.handler=r,s.on(e,h));function h(){r.apply(a,arguments)}return a}ignore(s,e,r){return s.off(e,r),this}};k(F,"Types",{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}),k(F,"Methods",["addEventListener","on","removeEventListener","off","unbind","dispatchEvent","trigger","listen","ignore"]);var wt={x:{enumerable:!0,get:function(){return this._x},set:function(s){this._x!==s&&(this._x=s,this._bound&&this.dispatchEvent(F.Types.change))}},y:{enumerable:!0,get:function(){return this._y},set:function(s){this._y!==s&&(this._y=s,this._bound&&this.dispatchEvent(F.Types.change))}}},lt=class extends F{constructor(e=0,r=0){super();w(this,"_x",0);w(this,"_y",0);for(let a in wt)Object.defineProperty(this,a,wt[a]);this.x=e,this.y=r}static add(e,r){return new lt(e.x+r.x,e.y+r.y)}static sub(e,r){return new lt(e.x-r.x,e.y-r.y)}static subtract(e,r){return lt.sub(e,r)}static ratioBetween(e,r){return(e.x*r.x+e.y*r.y)/(e.length()*r.length())}static angleBetween(e,r){if(arguments.length>=4){const c=arguments[0]-arguments[2],d=arguments[1]-arguments[3];return Math.atan2(d,c)}const a=e.x-r.x,h=e.y-r.y;return Math.atan2(h,a)}static distanceBetween(e,r){return Math.sqrt(lt.distanceBetweenSquared(e,r))}static distanceBetweenSquared(e,r){const a=e.x-r.x,h=e.y-r.y;return a*a+h*h}set(e,r){return this.x=e,this.y=r,this}copy(e){return this.x=e.x,this.y=e.y,this}clear(){return this.x=0,this.y=0,this}clone(){return new lt(this.x,this.y)}add(e,r){return arguments.length<=0?this:(arguments.length<=1?typeof e=="number"?(this.x+=e,this.y+=e):e&&typeof e.x=="number"&&typeof e.y=="number"&&(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=r),this)}addSelf(e){return this.add.apply(this,arguments)}sub(e,r){return arguments.length<=0?this:(arguments.length<=1?typeof e=="number"?(this.x-=e,this.y-=e):e&&typeof e.x=="number"&&typeof e.y=="number"&&(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=r),this)}subtract(){return this.sub.apply(this,arguments)}subSelf(e){return this.sub.apply(this,arguments)}subtractSelf(e){return this.sub.apply(this,arguments)}multiply(e,r){return arguments.length<=0?this:(arguments.length<=1?typeof e=="number"?(this.x*=e,this.y*=e):e&&typeof e.x=="number"&&typeof e.y=="number"&&(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=r),this)}multiplySelf(e){return this.multiply.apply(this,arguments)}multiplyScalar(e){return this.multiply(e)}divide(e,r){return arguments.length<=0?this:(arguments.length<=1?typeof e=="number"?(this.x/=e,this.y/=e):e&&typeof e.x=="number"&&typeof e.y=="number"&&(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=r),isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0),this)}divideSelf(e){return this.divide.apply(this,arguments)}divideScalar(e){return this.divide(e)}negate(){return this.multiply(-1)}dot(e){return this.x*e.x+this.y*e.y}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.divideScalar(this.length())}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,a=this.y-e.y;return r*r+a*a}setLength(e){return this.normalize().multiplyScalar(e)}equals(e,r){return r=typeof r>"u"?1e-4:r,this.distanceTo(e)<r}lerp(e,r){const a=(e.x-this.x)*r+this.x,h=(e.y-this.y)*r+this.y;return this.set(a,h)}isZero(e){return e=typeof e>"u"?1e-4:e,this.length()<e}toString(){return this.x+", "+this.y}toObject(){return{x:this.x,y:this.y}}rotate(e){const r=this.x,a=this.y,h=Math.cos(e),c=Math.sin(e);return this.x=r*h-a*c,this.y=r*c+a*h,this}},V=lt;k(V,"zero",new lt),k(V,"left",new lt(-1,0)),k(V,"right",new lt(1,0)),k(V,"up",new lt(0,-1)),k(V,"down",new lt(0,1));var tt=class extends V{constructor(e=0,r=0,a=0,h=0,c=0,d=0,_=v.move){super(e,r);w(this,"controls",{left:new V,right:new V});w(this,"_command",v.move);w(this,"_relative",!0);w(this,"_rx",0);w(this,"_ry",0);w(this,"_xAxisRotation",0);w(this,"_largeArcFlag",0);w(this,"_sweepFlag",1);for(let p in Lt)Object.defineProperty(this,p,Lt[p]);this.command=_,this.relative=!0;const x=tt.makeBroadcast(this);this.controls.left.set(a,h).addEventListener(F.Types.change,x),this.controls.right.set(c,d).addEventListener(F.Types.change,x)}static makeBroadcast(e){return r;function r(){e._bound&&e.dispatchEvent(F.Types.change)}}copy(e){return this.x=e.x,this.y=e.y,typeof e.command=="string"&&(this.command=e.command),e.controls&&(e.controls.left&&this.controls.left.copy(e.controls.left),e.controls.right&&this.controls.right.copy(e.controls.right)),typeof e.relative=="boolean"&&(this.relative=e.relative),typeof e.rx=="number"&&(this.rx=e.rx),typeof e.ry=="number"&&(this.ry=e.ry),typeof e.xAxisRotation=="number"&&(this.xAxisRotation=e.xAxisRotation),typeof e.largeArcFlag=="number"&&(this.largeArcFlag=e.largeArcFlag),typeof e.sweepFlag=="number"&&(this.sweepFlag=e.sweepFlag),this}clone(){return new tt().copy(this)}toObject(){return{x:this.x,y:this.y,command:this.command,relative:this.relative,controls:{left:this.controls.left.toObject(),right:this.controls.right.toObject()},rx:this.rx,ry:this.ry,xAxisRotation:this.xAxisRotation,largeArcFlag:this.largeArcFlag,sweepFlag:this.sweepFlag}}toString(){return JSON.stringify(this.toObject())}},Lt={command:{enumerable:!0,get:function(){return this._command},set:function(s){this._command!==s&&(this._command=s,this._bound&&this.dispatchEvent(F.Types.change))}},relative:{enumerable:!0,get:function(){return this._relative},set:function(s){this._relative!==!!s&&(this._relative=!!s,this._bound&&this.dispatchEvent(F.Types.change))}},rx:{enumerable:!0,get:function(){return this._rx},set:function(s){this._rx!==s&&(this._rx=s,this._bound&&this.dispatchEvent(F.Types.change))}},ry:{enumerable:!0,get:function(){return this._ry},set:function(s){this._ry!==s&&(this._ry=s,this._bound&&this.dispatchEvent(F.Types.change))}},xAxisRotation:{enumerable:!0,get:function(){return this._xAxisRotation},set:function(s){this._xAxisRotation!==s&&(this._xAxisRotation=s,this._bound&&this.dispatchEvent(F.Types.change))}},largeArcFlag:{enumerable:!0,get:function(){return this._largeArcFlag},set:function(s){this._largeArcFlag!==s&&(this._largeArcFlag=s,this._bound&&this.dispatchEvent(F.Types.change))}},sweepFlag:{get:function(){return this._sweepFlag},set:function(s){this._sweepFlag!==s&&(this._sweepFlag=s,this._bound&&this.dispatchEvent(F.Types.change))}}},ee=0,Ct={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.8.14",PublishDate:"2024-06-11T02:06:29.216Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return ee++}},ge={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]};function ke(s,e,r,a,h){const c=1-s;return c*c*c*e+3*c*c*s*r+3*c*s*s*a+s*s*s*h}function Le(s,e,r,a,h,c,d,_,x){x=x||ge.RecursionLimit;const p=x+1;if(Math.abs(s-d)<.001&&Math.abs(e-_)<.001)return[new tt(d,_)];const A=[];for(let R=0;R<p;R++){const C=R/p,O=ke(C,s,r,h,d),E=ke(C,e,a,c,_);A.push(new tt(O,E))}return A}function Be(s,e,r,a,h,c,d,_,x){if(s===r&&e===a&&h===d&&c===_){const D=d-s,N=_-e;return Math.sqrt(D*D+N*N)}const p=9*(r-h)+3*(d-s),A=6*(s+h)-12*r,R=3*(r-s),C=9*(a-c)+3*(_-e),O=6*(e+c)-12*a,E=3*(a-e);function j(D){const N=(p*D+A)*D+R,P=(C*D+O)*D+E;return Math.sqrt(N*N+P*P)}return re(j,0,1,x||ge.RecursionLimit)}function Ne(s,e,r,a,h,c,d,_){const x=[],p=[[],[]];let A,R,C,O,E,j,D,N;for(let q=0;q<2;++q){if(q==0?(R=6*s-12*r+6*h,A=-3*s+9*r-9*h+3*d,C=3*r-3*s):(R=6*e-12*a+6*c,A=-3*e+9*a-9*c+3*_,C=3*a-3*e),Math.abs(A)<1e-12){if(Math.abs(R)<1e-12)continue;O=-C/R,0<O&&O<1&&x.push(O);continue}D=R*R-4*C*A,N=Math.sqrt(D),!(D<0)&&(E=(-R+N)/(2*A),0<E&&E<1&&x.push(E),j=(-R-N)/(2*A),0<j&&j<1&&x.push(j))}let P=x.length,H=P,$;for(;P--;)O=x[P],$=1-O,p[0][P]=$*$*$*s+3*$*$*O*r+3*$*O*O*h+O*O*O*d,p[1][P]=$*$*$*e+3*$*$*O*a+3*$*O*O*c+O*O*O*_;return p[0][H]=s,p[1][H]=e,p[0][H+1]=d,p[1][H+1]=_,p[0].length=p[1].length=H+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}}function re(s,e,r,a){let h=ge.abscissas[a-2],c=ge.weights[a-2],d=.5*(r-e),_=d+e,x=0,p=a+1>>1,A=a&1?c[x++]*s(_):0;for(;x<p;){const R=d*h[x];A+=c[x++]*(s(_+R)+s(_-R))}return d*A}function Ft(s,e){const r=s.length,a=r-1;for(let h=0;h<r;h++){const c=s[h],d=e?et(h-1,r):Math.max(h-1,0),_=e?et(h+1,r):Math.min(h+1,a),x=s[d],p=c,A=s[_];fr(x,p,A),p.command=h===0?v.move:v.curve}}function fr(s,e,r){const a=V.angleBetween(s,e),h=V.angleBetween(r,e);let c=V.distanceBetween(s,e),d=V.distanceBetween(r,e),_=(a+h)/2;return c<1e-4||d<1e-4?(typeof e.relative=="boolean"&&!e.relative&&(e.controls.left.copy(e),e.controls.right.copy(e)),e):(c*=.33,d*=.33,h<a?_+=M:_-=M,e.controls.left.x=Math.cos(_)*c,e.controls.left.y=Math.sin(_)*c,_-=Math.PI,e.controls.right.x=Math.cos(_)*d,e.controls.right.y=Math.sin(_)*d,typeof e.relative=="boolean"&&!e.relative&&(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)}function Rs(s,e,r){return new V(2*s.x-(e.x+s.x)-(r?s.x:0),2*s.y-(e.y+s.y)-(r?s.y:0))}function xa(s,e,r,a,h,c,d){const _=Ct.Resolution;for(let x=0;x<_;x++){let p=(x+1)/_;d&&(p=1-p);const A=p*c+h,R=r*Math.cos(A),C=a*Math.sin(A),O=new tt(R,C);O.command=v.line}}var va=B.devicePixelRatio||1;function wa(s){return s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1}function Ts(s){return va/wa(s)}var ur=Array.prototype.slice;function ka(s){if(s==null)return!1;const e=s.length;return typeof e=="number"&&e>=0&&e<4294967296}var rt={isNaN:function(s){return typeof s=="number"&&s!==+s},isElement:function(s){return!!(s&&s.nodeType===1)},isObject:function(s){const e=typeof s;return e==="function"||e==="object"&&!!s},extend:function(s){const e=ur.call(arguments,1);for(let r=0;r<e.length;r++){const a=e[r];for(let h in a)s[h]=a[h]}return s},defaults:function(s){const e=ur.call(arguments,1);for(let r=0;r<e.length;r++){const a=e[r];for(let h in a)s[h]===void 0&&(s[h]=a[h])}return s},each:function(s,e,r){const a=r||this,h=!ka(s)&&Object.keys(s),c=(h||s).length;for(let d=0;d<c;d++){const _=h?h[d]:d;e.call(a,s[_],_,s)}return s},performance:B.performance&&B.performance.now?B.performance:Date},Fi=class extends F{constructor(){super();w(this,"_flagId",!1);w(this,"_flagClassName",!1);w(this,"_renderer",{});w(this,"_id","");w(this,"_className","");w(this,"classList",[]);for(let e in dr)Object.defineProperty(this,e,dr[e])}flagReset(){this._flagId=this._flagClassName=!1}},dr={renderer:{enumerable:!1,get:function(){return this._renderer}},id:{enumerable:!0,get:function(){return this._id},set:function(s){const e=this._id;s!==this._id&&(this._id=s,this._flagId=!0,this.parent&&(delete this.parent.children.ids[e],this.parent.children.ids[this._id]=this))}},className:{enumerable:!0,get:function(){return this._className},set:function(s){this._className!==s&&(this._flagClassName=!0,this.classList=s.split(/\s+?/),this._className=s)}}},Aa=Math.cos,Sa=Math.sin,_r=Math.tan,Es=[],pe=class extends F{constructor(e,r,a,h,c,d){super();w(this,"elements",new it(9));w(this,"manual",!1);let _=e;Array.isArray(_)||(_=Array.prototype.slice.call(arguments)),this.identity(),_.length>0&&this.set(_)}static Multiply(e,r,a){if(r.length<=3){const J=e;let at,gt,ut;const ot=r[0]||0,vt=r[1]||0,bt=r[2]||0;return at=J[0]*ot+J[1]*vt+J[2]*bt,gt=J[3]*ot+J[4]*vt+J[5]*bt,ut=J[6]*ot+J[7]*vt+J[8]*bt,[at,gt,ut]}const h=e[0],c=e[1],d=e[2],_=e[3],x=e[4],p=e[5],A=e[6],R=e[7],C=e[8],O=r[0],E=r[1],j=r[2],D=r[3],N=r[4],P=r[5],H=r[6],$=r[7],q=r[8];return a=a||new it(9),a[0]=h*O+c*D+d*H,a[1]=h*E+c*N+d*$,a[2]=h*j+c*P+d*q,a[3]=_*O+x*D+p*H,a[4]=_*E+x*N+p*$,a[5]=_*j+x*P+p*q,a[6]=A*O+R*D+C*H,a[7]=A*E+R*N+C*$,a[8]=A*j+R*P+C*q,a}set(e,r,a,h,c,d,_,x,p){if(typeof r>"u"){const A=e;e=A[0],r=A[1],a=A[2],h=A[3],c=A[4],d=A[5],_=A[6],x=A[7],p=A[8]}return this.elements[0]=e,this.elements[1]=r,this.elements[2]=a,this.elements[3]=h,this.elements[4]=c,this.elements[5]=d,this.elements[6]=_,this.elements[7]=x,this.elements[8]=p,this.trigger(F.Types.change)}copy(e){return this.elements[0]=e.elements[0],this.elements[1]=e.elements[1],this.elements[2]=e.elements[2],this.elements[3]=e.elements[3],this.elements[4]=e.elements[4],this.elements[5]=e.elements[5],this.elements[6]=e.elements[6],this.elements[7]=e.elements[7],this.elements[8]=e.elements[8],this.manual=e.manual,this.trigger(F.Types.change)}identity(){return this.elements[0]=pe.Identity[0],this.elements[1]=pe.Identity[1],this.elements[2]=pe.Identity[2],this.elements[3]=pe.Identity[3],this.elements[4]=pe.Identity[4],this.elements[5]=pe.Identity[5],this.elements[6]=pe.Identity[6],this.elements[7]=pe.Identity[7],this.elements[8]=pe.Identity[8],this.trigger(F.Types.change)}multiply(e,r,a,h,c,d,_,x,p){if(typeof r>"u")return this.elements[0]*=e,this.elements[1]*=e,this.elements[2]*=e,this.elements[3]*=e,this.elements[4]*=e,this.elements[5]*=e,this.elements[6]*=e,this.elements[7]*=e,this.elements[8]*=e,this.trigger(F.Types.change);if(typeof a>"u"&&(a=1),typeof h>"u"){e=e||0,r=r||0,a=a||0,c=this.elements;const At=c[0]*e+c[1]*r+c[2]*a,qt=c[3]*e+c[4]*r+c[5]*a,se=c[6]*e+c[7]*r+c[8]*a;return[At,qt,se]}const A=this.elements,R=[e,r,a,h,c,d,_,x,p],C=A[0],O=A[1],E=A[2],j=A[3],D=A[4],N=A[5],P=A[6],H=A[7],$=A[8],q=R[0],J=R[1],at=R[2],gt=R[3],ut=R[4],ot=R[5],vt=R[6],bt=R[7],Mt=R[8];return this.elements[0]=C*q+O*gt+E*vt,this.elements[1]=C*J+O*ut+E*bt,this.elements[2]=C*at+O*ot+E*Mt,this.elements[3]=j*q+D*gt+N*vt,this.elements[4]=j*J+D*ut+N*bt,this.elements[5]=j*at+D*ot+N*Mt,this.elements[6]=P*q+H*gt+$*vt,this.elements[7]=P*J+H*ut+$*bt,this.elements[8]=P*at+H*ot+$*Mt,this.trigger(F.Types.change)}inverse(e){const r=this.elements;e=e||new pe;const a=r[0],h=r[1],c=r[2],d=r[3],_=r[4],x=r[5],p=r[6],A=r[7],R=r[8],C=R*_-x*A,O=-R*d+x*p,E=A*d-_*p;let j=a*C+h*O+c*E;return j?(j=1/j,e.elements[0]=C*j,e.elements[1]=(-R*h+c*A)*j,e.elements[2]=(x*h-c*_)*j,e.elements[3]=O*j,e.elements[4]=(R*a-c*p)*j,e.elements[5]=(-x*a+c*d)*j,e.elements[6]=E*j,e.elements[7]=(-A*a+h*p)*j,e.elements[8]=(_*a-h*d)*j,e):null}scale(e,r){return arguments.length<=1&&(r=e),this.multiply(e,0,0,0,r,0,0,0,1)}rotate(e){const r=Aa(e),a=Sa(e);return this.multiply(r,-a,0,a,r,0,0,0,1)}translate(e,r){return this.multiply(1,0,e,0,1,r,0,0,1)}skewX(e){const r=_r(e);return this.multiply(1,r,0,0,1,0,0,0,1)}skewY(e){const r=_r(e);return this.multiply(1,0,0,r,1,0,0,0,1)}toString(e){return Es.length=0,this.toTransformArray(e,Es),Es.map(st).join(" ")}toTransformArray(e,r){const a=this.elements,h=!!r,c=a[0],d=a[1],_=a[2],x=a[3],p=a[4],A=a[5];if(e){const R=a[6],C=a[7],O=a[8];if(h){r[0]=c,r[1]=x,r[2]=R,r[3]=d,r[4]=p,r[5]=C,r[6]=_,r[7]=A,r[8]=O;return}return[c,x,R,d,p,C,_,A,O]}if(h){r[0]=c,r[1]=x,r[2]=d,r[3]=p,r[4]=_,r[5]=A;return}return[c,x,d,p,_,A]}toArray(e,r){const a=this.elements,h=!!r,c=a[0],d=a[1],_=a[2],x=a[3],p=a[4],A=a[5];if(e){const R=a[6],C=a[7],O=a[8];if(h){r[0]=c,r[1]=d,r[2]=_,r[3]=x,r[4]=p,r[5]=A,r[6]=R,r[7]=C,r[8]=O;return}return[c,d,_,x,p,A,R,C,O]}if(h){r[0]=c,r[1]=d,r[2]=_,r[3]=x,r[4]=p,r[5]=A;return}return[c,d,_,x,p,A]}toObject(){return{elements:this.toArray(!0),manual:!!this.manual}}clone(){return new pe().copy(this)}},$e=pe;k($e,"Identity",[1,0,0,0,1,0,0,0,1]),Y($e);var je=class extends Fi{constructor(){super();w(this,"_flagMatrix",!0);w(this,"_flagScale",!1);w(this,"_matrix",null);w(this,"_worldMatrix",null);w(this,"_position",null);w(this,"_rotation",0);w(this,"_scale",1);w(this,"_skewX",0);w(this,"_skewY",0);for(let e in Mi)Object.defineProperty(this,e,Mi[e]);this._renderer.flagMatrix=gr.bind(this),this.isShape=!0,this.id=Ct.Identifier+Ct.uniqueId(),this.matrix=new $e,this.worldMatrix=new $e,this.position=new V,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}get renderer(){return this._renderer}set renderer(e){this._renderer=e}get translation(){return Mi.position.get.apply(this,arguments)}set translation(e){Mi.position.set.apply(this,arguments)}addTo(e){return e.add(this),this}remove(){return this.parent?(this.parent.remove(this),this):this}clone(e){const r=new je;return r.position.copy(this.position),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix),e&&e.add(r),r._update()}_update(e){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.position.x,this.position.y),this._scale instanceof V?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),e&&this.parent&&this.parent._update&&this.parent._update(),this}flagReset(){return this._flagMatrix=this._flagScale=!1,super.flagReset.call(this),this}},Mi={position:{enumerable:!0,get:function(){return this._position},set:function(s){this._position&&this._position.unbind(F.Types.change,this._renderer.flagMatrix),this._position=s,this._position.bind(F.Types.change,this._renderer.flagMatrix),gr.call(this)}},rotation:{enumerable:!0,get:function(){return this._rotation},set:function(s){this._rotation=s,this._flagMatrix=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(s){this._scale instanceof V&&this._scale.unbind(F.Types.change,this._renderer.flagMatrix),this._scale=s,this._scale instanceof V&&this._scale.bind(F.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}},skewX:{enumerable:!0,get:function(){return this._skewX},set:function(s){this._skewX=s,this._flagMatrix=!0}},skewY:{enumerable:!0,get:function(){return this._skewY},set:function(s){this._skewY=s,this._flagMatrix=!0}},matrix:{enumerable:!0,get:function(){return this._matrix},set:function(s){this._matrix=s,this._flagMatrix=!0}},worldMatrix:{enumerable:!0,get:function(){return W(this,this._worldMatrix),this._worldMatrix},set:function(s){this._worldMatrix=s}}};function gr(){this._flagMatrix=!0}var ze=class extends Array{constructor(){super();w(this,"_events",new F);arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&this.push.apply(this,arguments[0]):arguments.length>0&&this.push.apply(this,arguments)}get _bound(){return this._events._bound}set _bound(e){this._events._bound=e}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.on.apply(this,arguments)}bind(){return this._events.bind.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.off.apply(this,arguments)}unbind(){return this._events.unbind.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.trigger.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}pop(){const e=super.pop.apply(this,arguments);return this.trigger(F.Types.remove,[e]),e}shift(){const e=super.shift.apply(this,arguments);return this.trigger(F.Types.remove,[e]),e}push(){const e=super.push.apply(this,arguments);return this.trigger(F.Types.insert,arguments),e}unshift(){const e=super.unshift.apply(this,arguments);return this.trigger(F.Types.insert,arguments),e}splice(){const e=super.splice.apply(this,arguments);if(this.trigger(F.Types.remove,e),arguments.length>2){const r=this.slice(arguments[0],arguments[0]+arguments.length-2);this.trigger(F.Types.insert,r),this.trigger(F.Types.order)}return e}sort(){return super.sort.apply(this,arguments),this.trigger(F.Types.order),this}reverse(){return super.reverse.apply(this,arguments),this.trigger(F.Types.order),this}indexOf(){return super.indexOf.apply(this,arguments)}map(e,r){const a=[];for(let h=0;h<this.length;h++){const c=this[h];let d;r?d=e.call(r,c,h):d=e(c,h),a.push(d)}return a}},pr=class extends ze{constructor(e){e=Array.isArray(e)?e:Array.prototype.slice.call(arguments);super(e);w(this,"ids",{});this.attach(e),this.on(F.Types.insert,this.attach),this.on(F.Types.remove,this.detach)}attach(e){for(let r=0;r<e.length;r++){const a=e[r];a&&a.id&&(this.ids[a.id]=a)}return this}detach(e){for(let r=0;r<e.length;r++)delete this.ids[e[r].id];return this}},Ci=Math.min,Oi=Math.max,mr=class extends je{constructor(e){super();w(this,"_flagAdditions",!1);w(this,"_flagSubtractions",!1);w(this,"_flagOrder",!1);w(this,"_flagOpacity",!0);w(this,"_flagBeginning",!1);w(this,"_flagEnding",!1);w(this,"_flagLength",!1);w(this,"_flagMask",!1);w(this,"_fill","#fff");w(this,"_stroke","#000");w(this,"_linewidth",1);w(this,"_opacity",1);w(this,"_visible",!0);w(this,"_cap","round");w(this,"_join","round");w(this,"_miter",4);w(this,"_closed",!0);w(this,"_curved",!1);w(this,"_automatic",!0);w(this,"_beginning",0);w(this,"_ending",1);w(this,"_length",0);w(this,"_mask",null);for(let r in yr)Object.defineProperty(this,r,yr[r]);this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(e)?e:Array.prototype.slice.call(arguments)}static InsertChildren(e){for(let r=0;r<e.length;r++)br.call(this,e[r],this)}static RemoveChildren(e){for(let r=0;r<e.length;r++)br.call(this,e[r])}static OrderChildren(e){this._flagOrder=!0}clone(e){const r=new mr,a=this.children.map(function(h){return h.clone()});return r.add(a),r.opacity=this.opacity,this.mask&&(r.mask=this.mask),r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.className=this.className,this.matrix.manual&&r.matrix.copy(this.matrix),e&&e.add(r),r._update()}toObject(){const e={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof V?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(e.matrix=this.matrix.toObject()),rt.each(this.children,function(r,a){e.children[a]=r.toObject()},this),e}corner(){const e=this.getBoundingClientRect(!0);for(let r=0;r<this.children.length;r++){const a=this.children[r];a.translation.x-=e.left,a.translation.y-=e.top}return this.mask&&(this.mask.translation.x-=e.left,this.mask.translation.y-=e.top),this}center(){const e=this.getBoundingClientRect(!0),r=e.left+e.width/2-this.translation.x,a=e.top+e.height/2-this.translation.y;for(let h=0;h<this.children.length;h++){const c=this.children[h];c.isShape&&(c.translation.x-=r,c.translation.y-=a)}return this.mask&&(this.mask.translation.x-=r,this.mask.translation.y-=a),this}getById(e){let r=null;function a(h){if(h.id===e)return h;if(h.children){for(let c=0;c<h.children.length;c++)if(r=a(h.children[c]),r)return r}return null}return a(this)}getByClassName(e){const r=[];function a(h){if(Array.prototype.indexOf.call(h.classList,e)>=0&&r.push(h),h.children)for(let c=0;c<h.children.length;c++){const d=h.children[c];a(d)}return r}return a(this)}getByType(e){const r=[];function a(h){if(h instanceof e&&r.push(h),h.children)for(let c=0;c<h.children.length;c++){const d=h.children[c];a(d)}return r}return a(this)}add(e){e instanceof Array?e=e.slice():e=Array.prototype.slice.call(arguments);for(let r=0;r<e.length;r++){const a=e[r];if(!(a&&a.id))continue;const h=Array.prototype.indexOf.call(this.children,a);h>=0&&this.children.splice(h,1),this.children.push(a)}return this}remove(e){const r=arguments.length,a=this.parent;if(r<=0&&a)return a.remove(this),this;e instanceof Array?e=e.slice():e=Array.prototype.slice.call(arguments);for(let h=0;h<e.length;h++){const c=e[h];if(!c||!this.children.ids[c.id])continue;const d=this.children.indexOf(c);d>=0&&this.children.splice(d,1)}return this}getBoundingClientRect(e){let r,a,h,c,d,_;this._update(!0);let x=1/0,p=-1/0,A=1/0,R=-1/0;const C=/texture|gradient/i;a=e?this.matrix:this.worldMatrix;for(let O=0;O<this.children.length;O++){const E=this.children[O];if(!(!E.visible||C.test(E._renderer.type))&&(r=E.getBoundingClientRect(e),h=typeof r.top!="number"||rt.isNaN(r.top)||!isFinite(r.top),c=typeof r.left!="number"||rt.isNaN(r.left)||!isFinite(r.left),d=typeof r.right!="number"||rt.isNaN(r.right)||!isFinite(r.right),_=typeof r.bottom!="number"||rt.isNaN(r.bottom)||!isFinite(r.bottom),!(h||c||d||_)))if(e){const[j,D]=a.multiply(r.left,r.top),[N,P]=a.multiply(r.right,r.top),[H,$]=a.multiply(r.left,r.bottom),[q,J]=a.multiply(r.right,r.bottom);A=Ci(D,P,$,J),x=Ci(j,N,H,q),p=Oi(j,N,H,q),R=Oi(D,P,$,J)}else A=Ci(r.top,A),x=Ci(r.left,x),p=Oi(r.right,p),R=Oi(r.bottom,R)}return{top:A,left:x,right:p,bottom:R,width:p-x,height:R-A}}noFill(){return this.children.forEach(function(e){e.noFill()}),this}noStroke(){return this.children.forEach(function(e){e.noStroke()}),this}subdivide(){const e=arguments;return this.children.forEach(function(r){r.subdivide.apply(r,e)}),this}_update(){let e,r,a;if(this._flagBeginning||this._flagEnding){const h=Math.min(this._beginning,this._ending),c=Math.max(this._beginning,this._ending),d=this.length;let _=0;const x=h*d,p=c*d;for(e=0;e<this.children.length;e++)a=this.children[e],r=a.length,x>_+r?(a.beginning=1,a.ending=1):p<_?(a.beginning=0,a.ending=0):x>_&&x<_+r?(a.beginning=(x-_)/r,a.ending=1):p>_&&p<_+r?(a.beginning=0,a.ending=(p-_)/r):(a.beginning=0,a.ending=1),_+=r}return super._update.apply(this,arguments)}flagReset(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,super.flagReset.call(this),this}},Yt=mr;k(Yt,"Children",pr),k(Yt,"Properties",["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"]);var yr={visible:{enumerable:!0,get:function(){return this._visible},set:function(s){this._flagVisible=this._visible!==s||this._flagVisible,this._visible=s}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(s){this._flagOpacity=this._opacity!==s||this._flagOpacity,this._opacity=s}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(s){this._flagBeginning=this._beginning!==s||this._flagBeginning,this._beginning=s}},ending:{enumerable:!0,get:function(){return this._ending},set:function(s){this._flagEnding=this._ending!==s||this._flagEnding,this._ending=s}},length:{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(let s=0;s<this.children.length;s++){const e=this.children[s];this._length+=e.length}}return this._length}},fill:{enumerable:!0,get:function(){return this._fill},set:function(s){this._fill=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.fill=s}}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(s){this._stroke=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.stroke=s}}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(s){this._linewidth=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.linewidth=s}}},join:{enumerable:!0,get:function(){return this._join},set:function(s){this._join=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.join=s}}},miter:{enumerable:!0,get:function(){return this._miter},set:function(s){this._miter=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.miter=s}}},cap:{enumerable:!0,get:function(){return this._cap},set:function(s){this._cap=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.cap=s}}},closed:{enumerable:!0,get:function(){return this._closed},set:function(s){this._closed=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.closed=s}}},curved:{enumerable:!0,get:function(){return this._curved},set:function(s){this._curved=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.curved=s}}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(s){this._automatic=s;for(let e=0;e<this.children.length;e++){const r=this.children[e];r.automatic=s}}},children:{enumerable:!0,get:function(){return this._children},set:function(s){const e=Yt.InsertChildren.bind(this),r=Yt.RemoveChildren.bind(this),a=Yt.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&r(this._children)),this._children=new pr(s),this._children.bind(F.Types.insert,e),this._children.bind(F.Types.remove,r),this._children.bind(F.Types.order,a),s.length>0&&e(s)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(s){this._mask=s,this._flagMask=!0,rt.isObject(s)&&!s.clip&&(s.clip=!0)}}};function br(s,e){const r=s.parent;let a;if(r===e){h();return}if(r&&r.children.ids[s.id]&&(a=Array.prototype.indexOf.call(r.children,s),r.children.splice(a,1),c()),e){h();return}c(),r._flagAdditions&&r.additions.length===0&&(r._flagAdditions=!1),r._flagSubtractions&&r.subtractions.length===0&&(r._flagSubtractions=!1),delete s.parent;function h(){e.subtractions.length>0&&(a=Array.prototype.indexOf.call(e.subtractions,s),a>=0&&e.subtractions.splice(a,1)),e.additions.length>0&&(a=Array.prototype.indexOf.call(e.additions,s),a>=0&&e.additions.splice(a,1)),s.parent=e,e.additions.push(s),e._flagAdditions=!0}function c(){a=Array.prototype.indexOf.call(r.additions,s),a>=0&&r.additions.splice(a,1),a=Array.prototype.indexOf.call(r.subtractions,s),a<0&&(r.subtractions.push(s),r._flagSubtractions=!0)}}var Fs=[],Ms=Math.max,Ra=Math.min,xr=Math.abs,Li=Math.sin,Pi=Math.cos,Ta=Math.acos,Ii=Math.sqrt,Dt={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},baselines:{top:"top",middle:"middle",bottom:"bottom",baseline:"alphabetic"},shim:function(s,e){return s.tagName=s.nodeName=e||"canvas",s.nodeType=1,s.getAttribute=function(r){return this[r]},s.setAttribute=function(r,a){return this[r]=a,this},s},group:{renderChild:function(s){Dt[s._renderer.type].render.call(s,this.ctx,!0,this.clip)},render:function(s){if(!this._visible)return this;this._update();const e=this._matrix.elements,r=this.parent;this._renderer.opacity=this._opacity*(r&&r._renderer?r._renderer.opacity:1);const a=this._mask,h=Bi(e),c=!h||!!a;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=s,c&&(s.save(),h||s.transform(e[0],e[3],e[1],e[4],e[2],e[5])),a&&Dt[a._renderer.type].render.call(a,s,!0),this._opacity>0&&this._scale!==0)for(let d=0;d<this.children.length;d++){const _=this.children[d];Dt[_._renderer.type].render.call(_,s)}return c&&s.restore(),this.flagReset()}},path:{render:function(s,e,r){let a,h,c,d,_,x,p,A,R,C,O,E,j,D,N,P,H,$,q,J,at,gt,ut,ot,vt,bt,Mt,At,qt,se,Xt,oe,te,Pe;if(Pe=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,qt=this._mask,se=this._clip,_=this._opacity*(Pe||1),x=this._visible,!e&&(!x||se||_===0))return this;this._update(),a=this._matrix.elements,h=this._stroke,c=this._linewidth,d=this._fill,p=this._cap,A=this._join,R=this._miter,C=this._closed,O=this._renderer.vertices,E=O.length,j=E-1,Xt=Bi(a),te=this.dashes,Xt||(s.save(),s.transform(a[0],a[3],a[1],a[4],a[2],a[5])),qt&&Dt[qt._renderer.type].render.call(qt,s,!0),d&&(typeof d=="string"?s.fillStyle=d:(Dt[d._renderer.type].render.call(d,s,this),s.fillStyle=d._renderer.effect)),h&&(typeof h=="string"?s.strokeStyle=h:(Dt[h._renderer.type].render.call(h,s,this),s.strokeStyle=h._renderer.effect),c&&(s.lineWidth=c),R&&(s.miterLimit=R),A&&(s.lineJoin=A),!C&&p&&(s.lineCap=p)),typeof _=="number"&&(s.globalAlpha=_),te&&te.length>0&&(s.lineDashOffset=te.offset||0,s.setLineDash(te)),s.beginPath();let We,mi,yi,bi,xi,vi,Se;for(let Ot=0;Ot<E;Ot++)switch(P=O[Ot],Mt=P.x,At=P.y,P.command){case v.close:s.closePath();break;case v.arc:We=P.rx,mi=P.ry,yi=P.xAxisRotation,bi=P.largeArcFlag,xi=P.sweepFlag,D=C?et(Ot-1,E):Ms(Ot-1,0),N=O[D],vi=N.x,Se=N.y,Dt.renderSvgArcCommand(s,vi,Se,We,mi,bi,xi,yi,Mt,At);break;case v.curve:D=C?et(Ot-1,E):Math.max(Ot-1,0),N=O[D],ut=N.controls&&N.controls.right||V.zero,ot=P.controls&&P.controls.left||V.zero,N._relative?(at=ut.x+N.x,gt=ut.y+N.y):(at=ut.x,gt=ut.y),P._relative?(q=ot.x+P.x,J=ot.y+P.y):(q=ot.x,J=ot.y),s.bezierCurveTo(at,gt,q,J,Mt,At),Ot>=j&&C&&(H=$,vt=P.controls&&P.controls.right||V.zero,bt=H.controls&&H.controls.left||V.zero,P._relative?(at=vt.x+P.x,gt=vt.y+P.y):(at=vt.x,gt=vt.y),H._relative?(q=bt.x+H.x,J=bt.y+H.y):(q=bt.x,J=bt.y),Mt=H.x,At=H.y,s.bezierCurveTo(at,gt,q,J,Mt,At));break;case v.line:s.lineTo(Mt,At);break;case v.move:$=P,s.moveTo(Mt,At);break}return C&&s.closePath(),!se&&!r&&(Dt.isHidden.test(d)||(oe=d._renderer&&d._renderer.offset,oe&&(s.save(),s.translate(-d._renderer.offset.x,-d._renderer.offset.y),s.scale(d._renderer.scale.x,d._renderer.scale.y)),s.fill(),oe&&s.restore()),Dt.isHidden.test(h)||(oe=h._renderer&&h._renderer.offset,oe&&(s.save(),s.translate(-h._renderer.offset.x,-h._renderer.offset.y),s.scale(h._renderer.scale.x,h._renderer.scale.y),s.lineWidth=c/h._renderer.scale.x),s.stroke(),oe&&s.restore())),Xt||s.restore(),se&&!r&&s.clip(),te&&te.length>0&&s.setLineDash(Fs),this.flagReset()}},points:{render:function(s,e,r){let a,h,c,d,_,x,p,A,R,C,O,E,j,D,N,P;if(P=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,_=this._opacity*(P||1),x=this._visible,!e&&(!x||_===0))return this;this._update(),a=this._matrix.elements,h=this._stroke,c=this._linewidth,d=this._fill,A=this._renderer.collection,R=A.length,j=Bi(a),N=this.dashes,p=this._size,j||(s.save(),s.transform(a[0],a[3],a[1],a[4],a[2],a[5])),d&&(typeof d=="string"?s.fillStyle=d:(Dt[d._renderer.type].render.call(d,s,this),s.fillStyle=d._renderer.effect)),h&&(typeof h=="string"?s.strokeStyle=h:(Dt[h._renderer.type].render.call(h,s,this),s.strokeStyle=h._renderer.effect),c&&(s.lineWidth=c)),typeof _=="number"&&(s.globalAlpha=_),N&&N.length>0&&(s.lineDashOffset=N.offset||0,s.setLineDash(N)),s.beginPath();let H=p*.5,$;this._sizeAttenuation||($=this.worldMatrix.elements,$=X($[0],$[3],$[1],$[4],$[2],$[5]),H/=Math.max($.scaleX,$.scaleY));for(let q=0;q<R;q++)C=A[q],O=C.x,E=C.y,s.moveTo(O+H,E),s.arc(O,E,H,0,I);return r||(Dt.isHidden.test(d)||(D=d._renderer&&d._renderer.offset,D&&(s.save(),s.translate(-d._renderer.offset.x,-d._renderer.offset.y),s.scale(d._renderer.scale.x,d._renderer.scale.y)),s.fill(),D&&s.restore()),Dt.isHidden.test(h)||(D=h._renderer&&h._renderer.offset,D&&(s.save(),s.translate(-h._renderer.offset.x,-h._renderer.offset.y),s.scale(h._renderer.scale.x,h._renderer.scale.y),s.lineWidth=c/h._renderer.scale.x),s.stroke(),D&&s.restore())),j||s.restore(),N&&N.length>0&&s.setLineDash(Fs),this.flagReset()}},text:{render:function(s,e,r){const a=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,h=this._opacity*a,c=this._visible,d=this._mask,_=this._clip;if(!e&&(!c||_||h===0))return this;this._update();const x=this._matrix.elements,p=this._stroke,A=this._linewidth,R=this._fill,C=this._decoration,O=this._direction,E=Bi(x),j=R._renderer&&R._renderer.offset&&p._renderer&&p._renderer.offset,D=this.dashes,N=Dt.alignments[this._alignment]||this._alignment,P=Dt.baselines[this._baseline]||this._baseline;let H,$,q,J,at,gt,ut,ot,vt,bt,Mt;if(E||(s.save(),s.transform(x[0],x[3],x[1],x[4],x[2],x[5])),d&&Dt[d._renderer.type].render.call(d,s,!0),j||(s.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),s.textAlign=N,s.textBaseline=P,s.direction=O,R&&(typeof R=="string"?s.fillStyle=R:(Dt[R._renderer.type].render.call(R,s,this),s.fillStyle=R._renderer.effect)),p&&(typeof p=="string"?s.strokeStyle=p:(Dt[p._renderer.type].render.call(p,s,this),s.strokeStyle=p._renderer.effect),A&&(s.lineWidth=A)),typeof h=="number"&&(s.globalAlpha=h),D&&D.length>0&&(s.lineDashOffset=D.offset||0,s.setLineDash(D)),!_&&!r&&(Dt.isHidden.test(R)||(R._renderer&&R._renderer.offset?(gt=R._renderer.scale.x,ut=R._renderer.scale.y,s.save(),s.translate(-R._renderer.offset.x,-R._renderer.offset.y),s.scale(gt,ut),H=this._size/R._renderer.scale.y,$=this._leading/R._renderer.scale.y,s.font=[this._style,this._weight,H+"px/",$+"px",this._family].join(" "),q=R._renderer.offset.x/R._renderer.scale.x,J=R._renderer.offset.y/R._renderer.scale.y,s.fillText(this.value,q,J),s.restore()):s.fillText(this.value,0,0)),Dt.isHidden.test(p)||(p._renderer&&p._renderer.offset?(gt=p._renderer.scale.x,ut=p._renderer.scale.y,s.save(),s.translate(-p._renderer.offset.x,-p._renderer.offset.y),s.scale(gt,ut),H=this._size/p._renderer.scale.y,$=this._leading/p._renderer.scale.y,s.font=[this._style,this._weight,H+"px/",$+"px",this._family].join(" "),q=p._renderer.offset.x/p._renderer.scale.x,J=p._renderer.offset.y/p._renderer.scale.y,at=A/p._renderer.scale.x,s.lineWidth=at,s.strokeText(this.value,q,J),s.restore()):s.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(C)){const At=s.measureText(this.value);let qt=1;switch(C){case"underline":vt=At.actualBoundingBoxDescent,Mt=At.actualBoundingBoxDescent;break;case"strikethrough":vt=0,Mt=0,qt=.5;break}switch(P){case"top":vt+=this._size*qt,Mt+=this._size*qt;break;case"baseline":case"bottom":vt-=this._size*qt,Mt-=this._size*qt;break}switch(N){case"left":case"start":ot=0,bt=At.width;break;case"right":case"end":ot=-At.width,bt=0;break;default:ot=-At.width/2,bt=At.width/2}s.lineWidth=Math.max(Math.floor(this._size/15),1),s.strokeStyle=s.fillStyle,s.beginPath(),s.moveTo(ot,vt),s.lineTo(bt,Mt),s.stroke()}return E||s.restore(),_&&!r&&s.clip(),D&&D.length>0&&s.setLineDash(Fs),this.flagReset()}},"linear-gradient":{render:function(s,e){if(e){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let r,a=this.left._x,h=this.left._y,c=this.right._x,d=this.right._y;/objectBoundingBox/i.test(this._units)&&(r=e.getBoundingClientRect(!0),a=(a-.5)*r.width,h=(h-.5)*r.height,c=(c-.5)*r.width,d=(d-.5)*r.height),this._renderer.effect=s.createLinearGradient(a,h,c,d);for(let _=0;_<this.stops.length;_++){const x=this.stops[_];this._renderer.effect.addColorStop(x._offset,x._color)}}return this.flagReset()}}},"radial-gradient":{render:function(s,e){if(e){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let r,a=this.center._x,h=this.center._y,c=this.focal._x,d=this.focal._y,_=this._radius;/objectBoundingBox/i.test(this._units)&&(r=e.getBoundingClientRect(!0),a=(a-.5)*r.width*.5,h=(h-.5)*r.height*.5,c=(c-.5)*r.width*.5,d=(d-.5)*r.height*.5,_*=Math.min(r.width,r.height)),this._renderer.effect=s.createRadialGradient(a,h,0,c,d,_);for(let x=0;x<this.stops.length;x++){const p=this.stops[x];this._renderer.effect.addColorStop(p._offset,p._color)}}return this.flagReset()}}},texture:{render:function(s){this._update();const e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=s.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof V||(this._renderer.offset=new V),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof V?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof V||(this._renderer.scale=new V),this._scale instanceof V?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(s,e,r,a,h,c,d,_,x,p){_=_*Math.PI/180,a=xr(a),h=xr(h);const A=(e-x)/2,R=(r-p)/2,C=Pi(_)*A+Li(_)*R,O=-Li(_)*A+Pi(_)*R,E=C*C,j=O*O;let D=a*a,N=h*h;const P=E/D+j/N;if(P>1){const At=Ii(P);a=At*a,h=At*h,D=a*a,N=h*h}const H=D*j+N*E,$=(D*N-H)/H;let q=Ii(Ms(0,$));c===d&&(q=-q);const J=q*a*O/h,at=-q*h*C/a,gt=Pi(_)*J-Li(_)*at+(e+x)/2,ut=Li(_)*J+Pi(_)*at+(r+p)/2,ot=vr(1,0,(C-J)/a,(O-at)/h),vt=vr((C-J)/a,(O-at)/h,(-C-J)/a,(-O-at)/h)%I,bt=ot+vt;Ea(s,gt,ut,a,h,ot,bt,d===0,_)}},ei=class extends F{constructor(s){super();const e=s.smoothing!==!1;this.domElement=s.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=s.overdraw||!1,typeof this.ctx.imageSmoothingEnabled<"u"&&(this.ctx.imageSmoothingEnabled=e),this.scene=new Yt,this.scene.parent=this}setSize(s,e,r){return this.width=s,this.height=e,this.ratio=typeof r>"u"?Ts(this.ctx):r,this.domElement.width=s*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&rt.extend(this.domElement.style,{width:s+"px",height:e+"px"}),this.trigger(F.Types.resize,s,e,r)}render(){const s=this.ratio===1;return s||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),Dt.group.render.call(this.scene,this.ctx),s||this.ctx.restore(),this}};k(ei,"Utils",Dt);function Ea(s,e,r,a,h,c,d,_,x){const p=d-c,A=ge.Tolerance.epsilon,R=Math.abs(p)<A;let C=et(p,I);C<A&&(R?C=0:C=I),_===!0&&!R&&(C===I?C=-I:C=C-I);for(let O=0;O<Ct.Resolution;O++){const E=O/(Ct.Resolution-1),j=c+E*C;let D=e+a*Math.cos(j),N=r+h*Math.sin(j);if(x!==0){const P=Math.cos(x),H=Math.sin(x),$=D-e,q=N-r;D=$*P-q*H+e,N=$*H+q*P+r}s.lineTo(D,N)}}function vr(s,e,r,a){const h=s*r+e*a,c=Ii(s*s+e*e)*Ii(r*r+a*a);let d=Ta(Ms(-1,Ra(1,h/c)));return s*a-e*r<0&&(d=-d),d}function Bi(s){return s[0]==1&&s[3]==0&&s[1]==0&&s[4]==1&&s[2]==0&&s[5]==0}var ne={Image:null,isHeadless:!1,shim:function(s,e){return ei.Utils.shim(s),typeof e<"u"&&(ne.Image=e),ne.isHeadless=!0,s}},ae={hasEventListeners:typeof B.addEventListener=="function",bind:function(s,e,r,a){return this.hasEventListeners?s.addEventListener(e,r,!!a):s.attachEvent("on"+e,r),ae},unbind:function(s,e,r,a){return ae.hasEventListeners?s.removeEventListeners(e,r,!!a):s.detachEvent("on"+e,r),ae},getRequestAnimationFrame:function(){const s=["ms","moz","webkit","o"];let e=0,r=B.requestAnimationFrame;if(!r){for(let h=0;h<s.length;h++)r=B[s[h]+"RequestAnimationFrame"]||r;r=r||a}function a(h,c){const d=new Date().getTime(),_=Math.max(0,16-(d-e)),x=B.setTimeout(p,_);e=d+_;function p(){h(d+_)}return x}return r}},ii=B.document?B.document.createElement("div"):{};ii.id="help-two-load",Object.defineProperty(ae,"temp",{enumerable:!0,get:function(){return rt.isElement(ii)&&!B.document.head.contains(ii)&&(ii.style.display="none",B.document.head.appendChild(ii)),ii}});var le=class extends Error{constructor(e){super();w(this,"name","Two.js");w(this,"message");this.message=e}},Ni=class{constructor(){w(this,"map",{})}add(s,e){return this.map[s]=e,this}remove(s){return delete this.map[s],this}get(s){return this.map[s]}contains(s){return s in this.map}};function wr(s,e){if(e===0||e===1)return!0;const a=s._length*e;let h=0;for(let c=0;c<s._lengths.length;c++){const d=s._lengths[c];if(h>=a)return a-h>=0;h+=d}return!1}function ji(s,e){const r=s._length;if(e<=0)return 0;if(e>=r)return s._lengths.length-1;for(let a=0,h=0;a<s._lengths.length;a++){if(h+s._lengths[a]>=e)return e-=h,Math.max(a-1,0)+e/s._lengths[a];h+=s._lengths[a]}return-1}function Cs(s,e,r){let a,h,c,d,_,x,p,A;const R=e.controls&&e.controls.right,C=s.controls&&s.controls.left;return a=e.x,_=e.y,h=(R||e).x,x=(R||e).y,c=(C||s).x,p=(C||s).y,d=s.x,A=s.y,R&&e._relative&&(h+=e.x,x+=e.y),C&&s._relative&&(c+=s.x,p+=s.y),Be(a,_,h,x,c,p,d,A,r)}function kr(s,e,r){let a,h,c,d,_,x,p,A;const R=e.controls&&e.controls.right,C=s.controls&&s.controls.left;return a=e.x,_=e.y,h=(R||e).x,x=(R||e).y,c=(C||s).x,p=(C||s).y,d=s.x,A=s.y,R&&e._relative&&(h+=e.x,x+=e.y),C&&s._relative&&(c+=s.x,p+=s.y),Le(a,_,h,x,c,p,d,A,r)}var Ve=class extends Fi{constructor(e,r,a){super();w(this,"_flagOffset",!0);w(this,"_flagOpacity",!0);w(this,"_flagColor",!0);w(this,"_offset",0);w(this,"_opacity",1);w(this,"_color","#fff");for(let h in Ar)Object.defineProperty(this,h,Ar[h]);this._renderer.type="stop",this.offset=typeof e=="number"?e:Ve.Index<=0?0:1,this.opacity=typeof a=="number"?a:1,this.color=typeof r=="string"?r:Ve.Index<=0?"#fff":"#000",Ve.Index=(Ve.Index+1)%2}clone(e){const r=new Ve;return rt.each(Ve.Properties,function(a){r[a]=this[a]},this),e&&e.stops&&e.stops.push(r),r}toObject(){const e={};return rt.each(Ve.Properties,function(r){e[r]=this[r]},this),e}flagReset(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,super.flagReset.call(this),this}},De=Ve;k(De,"Index",0),k(De,"Properties",["offset","opacity","color"]);var Ar={offset:{enumerable:!0,get:function(){return this._offset},set:function(s){this._offset=s,this._flagOffset=!0,this.parent&&(this.parent._flagStops=!0)}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(s){this._opacity=s,this._flagOpacity=!0,this.parent&&(this.parent._flagStops=!0)}},color:{enumerable:!0,get:function(){return this._color},set:function(s){this._color=s,this._flagColor=!0,this.parent&&(this.parent._flagStops=!0)}}},zi=class extends Fi{constructor(e){super();w(this,"_flagStops",!1);w(this,"_flagSpread",!1);w(this,"_flagUnits",!1);w(this,"_spread","");w(this,"_units","");for(let r in Sr)Object.defineProperty(this,r,Sr[r]);this._renderer.type="gradient",this.id=Ct.Identifier+Ct.uniqueId(),this.classList=[],this._renderer.flagStops=Fa.bind(this),this._renderer.bindStops=Ma.bind(this),this._renderer.unbindStops=Ca.bind(this),this.spread="pad",this.units="objectBoundingBox",e&&(this.stops=e)}clone(e){const r=this.stops.map(function(h){return h.clone()}),a=new zi(r);return rt.each(zi.Properties,function(h){a[h]=this[h]},this),e&&e.add(a),a}toObject(){const e={stops:this.stops.map(function(r){return r.toObject()})};return rt.each(zi.Properties,function(r){e[r]=this[r]},this),e}_update(){return(this._flagSpread||this._flagStops)&&this.trigger(F.Types.change),this}flagReset(){return this._flagSpread=this._flagUnits=this._flagStops=!1,super.flagReset.call(this),this}},Ht=zi;k(Ht,"Stop",De),k(Ht,"Properties",["spread","stops","renderer","units"]);var Sr={spread:{enumerable:!0,get:function(){return this._spread},set:function(s){this._spread=s,this._flagSpread=!0}},units:{enumerable:!0,get:function(){return this._units},set:function(s){this._units=s,this._flagUnits=!0}},stops:{enumerable:!0,get:function(){return this._stops},set:function(s){const e=this._renderer.bindStops,r=this._renderer.unbindStops;this._stops&&this._stops.unbind(F.Types.insert,e).unbind(F.Types.remove,r),this._stops=new ze((s||[]).slice(0)),this._stops.bind(F.Types.insert,e).bind(F.Types.remove,r),e(this._stops)}}};function Fa(){this._flagStops=!0}function Ma(s){let e=s.length;for(;e--;)s[e].bind(F.Types.change,this._renderer.flagStops),s[e].parent=this;this._renderer.flagStops()}function Ca(s){let e=s.length;for(;e--;)s[e].unbind(F.Types.change,this._renderer.flagStops),delete s[e].parent;this._renderer.flagStops()}var Rr=class extends Ht{constructor(e,r,a,h,c){super(c);w(this,"_flagEndPoints",!1);w(this,"_left",null);w(this,"_right",null);for(let d in Tr)Object.defineProperty(this,d,Tr[d]);this._renderer.type="linear-gradient",this._renderer.flagEndPoints=Oa.bind(this),this.left=new V,this.right=new V,typeof e=="number"&&(this.left.x=e),typeof r=="number"&&(this.left.y=r),typeof a=="number"&&(this.right.x=a),typeof h=="number"&&(this.right.y=h)}clone(e){const r=this.stops.map(function(h){return h.clone()}),a=new Rr(this.left._x,this.left._y,this.right._x,this.right._y,r);return rt.each(Ht.Properties,function(h){a[h]=this[h]},this),e&&e.add(a),a}toObject(){const e=super.toObject.call(this);return e.left=this.left.toObject(),e.right=this.right.toObject(),e}_update(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(F.Types.change),this}flagReset(){return this._flagEndPoints=!1,super.flagReset.call(this),this}},Pt=Rr;k(Pt,"Properties",["left","right"]),k(Pt,"Stop",De);var Tr={left:{enumerable:!0,get:function(){return this._left},set:function(s){this._left instanceof V&&this._left.unbind(F.Types.change,this._renderer.flagEndPoints),this._left=s,this._left.bind(F.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}},right:{enumerable:!0,get:function(){return this._right},set:function(s){this._right instanceof V&&this._right.unbind(F.Types.change,this._renderer.flagEndPoints),this._right=s,this._right.bind(F.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}}};function Oa(){this._flagEndPoints=!0}var Vi=class extends Ht{constructor(e,r,a,h,c,d){super(h);w(this,"_flagRadius",!1);w(this,"_flagCenter",!1);w(this,"_flagFocal",!1);w(this,"_radius",0);w(this,"_center",null);w(this,"_focal",null);for(let _ in Er)Object.defineProperty(this,_,Er[_]);this._renderer.type="radial-gradient",this._renderer.flagCenter=La.bind(this),this._renderer.flagFocal=Pa.bind(this),this.center=new V,this.radius=typeof a=="number"?a:1,this.focal=new V,typeof e=="number"&&(this.center.x=e),typeof r=="number"&&(this.center.y=r),this.focal.copy(this.center),typeof c=="number"&&(this.focal.x=c),typeof d=="number"&&(this.focal.y=d)}clone(e){const r=this.stops.map(function(h){return h.clone()}),a=new Vi(this.center._x,this.center._y,this._radius,r,this.focal._x,this.focal._y);return rt.each(Ht.Properties.concat(Vi.Properties),function(h){a[h]=this[h]},this),e&&e.add(a),a}toObject(){const e=super.toObject.call(this);return rt.each(Vi.Properties,function(r){e[r]=this[r]},this),e.center=this.center.toObject(),e.focal=this.focal.toObject(),e}_update(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(F.Types.change),this}flagReset(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,super.flagReset.call(this),this}},It=Vi;k(It,"Stop",De),k(It,"Properties",["center","radius","focal"]);var Er={radius:{enumerable:!0,get:function(){return this._radius},set:function(s){this._radius=s,this._flagRadius=!0}},center:{enumerable:!0,get:function(){return this._center},set:function(s){this._center&&this._center.unbind(F.Types.change,this._renderer.flagCenter),this._center=s,this._center.bind(F.Types.change,this._renderer.flagCenter),this._flagCenter=!0}},focal:{enumerable:!0,get:function(){return this._focal},set:function(s){this._focal&&this._focal.unbind(F.Types.change,this._renderer.flagFocal),this._focal=s,this._focal.bind(F.Types.change,this._renderer.flagFocal),this._flagFocal=!0}}};function La(){this._flagCenter=!0}function Pa(){this._flagFocal=!0}var Di,Fr={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};B.document&&(Di=document.createElement("a"));var Zt=class extends Fi{constructor(e,r){super();w(this,"_flagSrc",!1);w(this,"_flagImage",!1);w(this,"_flagVideo",!1);w(this,"_flagLoaded",!1);w(this,"_flagRepeat",!1);w(this,"_flagOffset",!1);w(this,"_flagScale",!1);w(this,"_src","");w(this,"_image",null);w(this,"_loaded",!1);w(this,"_repeat","no-repeat");w(this,"_scale",1);w(this,"_offset",null);this._renderer={};for(let a in Mr)Object.defineProperty(this,a,Mr[a]);if(this._renderer.type="texture",this._renderer.flagOffset=Ia.bind(this),this._renderer.flagScale=Ba.bind(this),this.id=Ct.Identifier+Ct.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new V,typeof r=="function"){const a=(function(){this.unbind(F.Types.load,a),typeof r=="function"&&r()}).bind(this);this.bind(F.Types.load,a)}if(typeof e=="string")this.src=e;else if(typeof e=="object"){const a=Object.prototype.toString.call(e);(a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]"||a==="[object HTMLVideoElement]"||a==="[object Image]")&&(this.image=e)}this._update()}static getAbsoluteURL(e){return Di?(Di.href=e,Di.href):e}static loadHeadlessBuffer(e,r){e.image.onload=r,e.image.src=e.src}static getTag(e){return e&&e.nodeName&&e.nodeName.toLowerCase()||"img"}static getImage(e){const r=Zt.getAbsoluteURL(e);if(Zt.ImageRegistry.contains(r))return Zt.ImageRegistry.get(r);let a;return ne.Image?(a=new ne.Image,ei.Utils.shim(a,"img")):B.document?Fr.video.test(r)?a=document.createElement("video"):a=document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),a.crossOrigin="anonymous",a.referrerPolicy="no-referrer",a}static load(e,r){let a=e.image,h=Zt.getTag(a);e._flagImage&&(/canvas/i.test(h)?Zt.Register.canvas(e,r):(e._src=!ne.isHeadless&&a.getAttribute("two-src")||a.src,Zt.Register[h](e,r))),e._flagSrc&&(a||(a=Zt.getImage(e.src),e.image=a),h=Zt.getTag(a),Zt.Register[h](e,r))}clone(){const e=new Zt(this.src);return e.repeat=this.repeat,e.offset.copy(this.origin),e.scale=this.scale,e}toObject(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:typeof this.scale=="number"?this.scale:this.scale.toObject()}}_update(){return(this._flagSrc||this._flagImage)&&(this.trigger(F.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,Zt.load(this,(function(){this.loaded=!0,this.trigger(F.Types.change).trigger(F.Types.load)}).bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this}flagReset(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagRepeat=this._flagVideo=this._flagScale=this._flagOffset=!1,super.flagReset.call(this),this}},Tt=Zt;k(Tt,"Properties",["src","loaded","repeat","scale","offset","image"]),k(Tt,"RegularExpressions",Fr),k(Tt,"ImageRegistry",new Ni),k(Tt,"Register",{canvas:function(s,e){s._src="#"+s.id,Zt.ImageRegistry.add(s.src,s.image),typeof e=="function"&&e()},img:function(s,e){const r=s.image,a=function(c){!ne.isHeadless&&r.removeEventListener&&typeof r.removeEventListener=="function"&&(r.removeEventListener("load",a,!1),r.removeEventListener("error",h,!1)),typeof e=="function"&&e()},h=function(c){throw!ne.isHeadless&&typeof r.removeEventListener=="function"&&(r.removeEventListener("load",a,!1),r.removeEventListener("error",h,!1)),new le("unable to load "+s.src)};typeof r.width=="number"&&r.width>0&&typeof r.height=="number"&&r.height>0?a():!ne.isHeadless&&typeof r.addEventListener=="function"&&(r.addEventListener("load",a,!1),r.addEventListener("error",h,!1)),s._src=Zt.getAbsoluteURL(s._src),!(!ne.isHeadless&&r&&r.getAttribute("two-src"))&&(ne.isHeadless||r.setAttribute("two-src",s.src),Zt.ImageRegistry.add(s.src,r),ne.isHeadless?Zt.loadHeadlessBuffer(s,a):s.image.src=s.src)},video:function(s,e){if(ne.isHeadless)throw new le("video textures are not implemented in headless environments.");const r=function(h){s.image.removeEventListener("canplaythrough",r,!1),s.image.removeEventListener("error",a,!1),s.image.width=s.image.videoWidth,s.image.height=s.image.videoHeight,typeof e=="function"&&e()},a=function(h){throw s.image.removeEventListener("canplaythrough",r,!1),s.image.removeEventListener("error",a,!1),new le("unable to load "+s.src)};s._src=Zt.getAbsoluteURL(s._src),s.image.getAttribute("two-src")||(s.image.setAttribute("two-src",s.src),Zt.ImageRegistry.add(s.src,s.image)),s.image.readyState>=4?r():(s.image.addEventListener("canplaythrough",r,!1),s.image.addEventListener("error",a,!1),s.image.src=s.src,s.image.load())}});var Mr={src:{enumerable:!0,get:function(){return this._src},set:function(s){this._src=s,this._flagSrc=!0}},loaded:{enumerable:!0,get:function(){return this._loaded},set:function(s){this._loaded=s,this._flagLoaded=!0}},repeat:{enumerable:!0,get:function(){return this._repeat},set:function(s){this._repeat=s,this._flagRepeat=!0}},image:{enumerable:!0,get:function(){return this._image},set:function(s){const e=Tt.getTag(s);let r;switch(e){case"canvas":r="#"+s.id;break;default:r=s.src}Tt.ImageRegistry.contains(r)?this._image=Tt.ImageRegistry.get(s.src):this._image=s,this._flagImage=!0}},offset:{enumerable:!0,get:function(){return this._offset},set:function(s){this._offset&&this._offset.unbind(F.Types.change,this._renderer.flagOffset),this._offset=s,this._offset.bind(F.Types.change,this._renderer.flagOffset),this._flagOffset=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(s){this._scale instanceof V&&this._scale.unbind(F.Types.change,this._renderer.flagScale),this._scale=s,this._scale instanceof V&&this._scale.bind(F.Types.change,this._renderer.flagScale),this._flagScale=!0}}};function Ia(){this._flagOffset=!0}function Ba(){this._flagScale=!0}var si=Math.min,ri=Math.max,Na=Math.ceil,ja=Math.floor,za=new V,ui=class extends je{constructor(e,r,a,h){super();w(this,"_flagVertices",!0);w(this,"_flagLength",!0);w(this,"_flagFill",!0);w(this,"_flagStroke",!0);w(this,"_flagLinewidth",!0);w(this,"_flagOpacity",!0);w(this,"_flagVisible",!0);w(this,"_flagCap",!0);w(this,"_flagJoin",!0);w(this,"_flagMiter",!0);w(this,"_flagMask",!1);w(this,"_flagClip",!1);w(this,"_length",0);w(this,"_fill","#fff");w(this,"_stroke","#000");w(this,"_linewidth",1);w(this,"_opacity",1);w(this,"_visible",!0);w(this,"_cap","round");w(this,"_join","round");w(this,"_miter",4);w(this,"_closed",!0);w(this,"_curved",!1);w(this,"_automatic",!0);w(this,"_beginning",0);w(this,"_ending",1);w(this,"_mask",null);w(this,"_clip",!1);w(this,"_dashes",null);for(let c in Cr)Object.defineProperty(this,c,Cr[c]);this._renderer.type="path",this._renderer.flagVertices=Or.bind(this),this._renderer.bindVertices=Lr.bind(this),this._renderer.unbindVertices=Pr.bind(this),this._renderer.flagFill=Ir.bind(this),this._renderer.flagStroke=Br.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this.closed=!!r,this.curved=!!a,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=e,this.automatic=!h,this.dashes=[],this.dashes.offset=0}clone(e){const r=new ui;for(let a=0;a<this.vertices.length;a++)r.vertices.push(this.vertices[a].clone());for(let a=0;a<ui.Properties.length;a++){const h=ui.Properties[a];r[h]=this[h]}return r.className=this.className,r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix),e&&e.add(r),r._update()}toObject(){const e={vertices:this.vertices.map(function(r){return r.toObject()})};return rt.each(ui.Properties,function(r){typeof this[r]<"u"&&(this[r].toObject?e[r]=this[r].toObject():e[r]=this[r])},this),e.className=this.className,e.translation=this.translation.toObject(),e.rotation=this.rotation,e.scale=this.scale instanceof V?this.scale.toObject():this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&(e.matrix=this.matrix.toObject()),e}noFill(){return this.fill="none",this}noStroke(){return this.stroke="none",this}corner(){const e=this.getBoundingClientRect(!0),r=e.width/2,a=e.height/2,h=e.left+e.width/2,c=e.top+e.height/2;for(let d=0;d<this.vertices.length;d++){const _=this.vertices[d];_.x-=h,_.y-=c,_.x+=r,_.y+=a}return this.mask&&(this.mask.translation.x-=h,this.mask.translation.x+=r,this.mask.translation.y-=c,this.mask.translation.y+=a),this}center(){const e=this.getBoundingClientRect(!0),r=e.left+e.width/2-this.translation.x,a=e.top+e.height/2-this.translation.y;for(let h=0;h<this.vertices.length;h++){const c=this.vertices[h];c.x-=r,c.y-=a}return this.mask&&(this.mask.translation.x-=r,this.mask.translation.y-=a),this}getBoundingClientRect(e){let r,a,h,c,d,_,x=1/0,p=-1/0,A=1/0,R=-1/0;if(this._update(!0),r=e?this.matrix:this.worldMatrix,a=(this.linewidth||0)/2,h=this._renderer.vertices.length,this.linewidth>0||this.stroke&&!/(transparent|none)/i.test(this.stroke))if(this.matrix.manual){const{scaleX:C,scaleY:O}=X(r.elements[0],r.elements[3],r.elements[1],r.elements[4],r.elements[2],r.elements[5]);typeof C=="number"&&typeof O=="number"&&(a=Math.max(C,O)*(this.linewidth||0)/2)}else a*=typeof this.scale=="number"?this.scale:Math.max(this.scale.x,this.scale.y);if(h<=0)return{width:0,height:0};for(c=0;c<h;c++){_=this._renderer.vertices[c],d=this._renderer.vertices[(c+h-1)%h];const[C,O]=r.multiply(d.x,d.y),[E,j]=r.multiply(_.x,_.y);if(d.controls&&_.controls){let D=d.controls.right.x,N=d.controls.right.y;d.relative&&(D+=d.x,N+=d.y);let[P,H]=r.multiply(D,N),$=_.controls.left.x,q=_.controls.left.y;_.relative&&($+=_.x,q+=_.y);let[J,at]=r.multiply($,q);const gt=Ne(C,O,P,H,J,at,E,j);A=si(gt.min.y-a,A),x=si(gt.min.x-a,x),p=ri(gt.max.x+a,p),R=ri(gt.max.y+a,R)}else c<=1&&(A=si(O-a,A),x=si(C-a,x),p=ri(C+a,p),R=ri(O+a,R)),A=si(j-a,A),x=si(E-a,x),p=ri(E+a,p),R=ri(j+a,R)}return{top:A,left:x,right:p,bottom:R,width:p-x,height:R-A}}getPointAt(e,r){let a,h,c,d,_,x,p,A,R,C,O,E,j,D,N,P=this.length*Math.min(Math.max(e,0),1);const H=this.vertices.length,$=H-1;let q=null,J=null;for(let Xt=0,oe=this._lengths.length,te=0;Xt<oe;Xt++){if(te+this._lengths[Xt]>=P){this._closed?(a=et(Xt,H),h=et(Xt-1,H),Xt===0&&(a=h,h=Xt)):(a=Xt,h=Math.min(Math.max(Xt-1,0),$)),q=this.vertices[a],J=this.vertices[h],P-=te,this._lengths[Xt]!==0?e=P/this._lengths[Xt]:e=0;break}te+=this._lengths[Xt]}if(q===null||J===null)return null;if(q){if(!J)return q}else return J;N=J.controls&&J.controls.right,D=q.controls&&q.controls.left,_=J.x,C=J.y,x=(N||J).x,O=(N||J).y,p=(D||q).x,E=(D||q).y,A=q.x,j=q.y,N&&J.relative&&(x+=J.x,O+=J.y),D&&q.relative&&(p+=q.x,E+=q.y),d=ke(e,_,x,p,A),R=ke(e,C,O,E,j);const at=Z(_,x,e),gt=Z(C,O,e),ut=Z(x,p,e),ot=Z(O,E,e),vt=Z(p,A,e),bt=Z(E,j,e),Mt=Z(at,ut,e),At=Z(gt,ot,e),qt=Z(ut,vt,e),se=Z(ot,bt,e);return rt.isObject(r)?(r.x=d,r.y=R,r instanceof tt&&(r.controls.left.x=Mt,r.controls.left.y=At,r.controls.right.x=qt,r.controls.right.y=se,(typeof r.relative!="boolean"||r.relative)&&(r.controls.left.x-=d,r.controls.left.y-=R,r.controls.right.x-=d,r.controls.right.y-=R)),r.t=e,r):(c=new tt(d,R,Mt-d,At-R,qt-d,se-R,this._curved?v.curve:v.line),c.t=e,c)}plot(){if(this.curved)return Ft(this._collection,this.closed),this;for(let e=0;e<this._collection.length;e++)this._collection[e].command=e===0?v.move:v.line;return this}subdivide(e){this._update();const r=this.vertices.length-1,a=this._closed||this.vertices[r]._command===v.close;let h=this.vertices[r],c=[],d;return rt.each(this.vertices,function(_,x){if(x<=0&&!a){h=_;return}if(_.command===v.move){c.push(new tt(h.x,h.y)),x>0&&(c[c.length-1].command=v.line),h=_;return}d=kr(_,h,e),c=c.concat(d),rt.each(d,function(p,A){A<=0&&h.command===v.move?p.command=v.move:p.command=v.line}),x>=r&&(this._closed&&this._automatic?(h=_,d=kr(_,h,e),c=c.concat(d),rt.each(d,function(p,A){A<=0&&h.command===v.move?p.command=v.move:p.command=v.line})):a&&c.push(new tt(_.x,_.y)),c[c.length-1].command=a?v.close:v.line),h=_},this),this._automatic=!1,this._curved=!1,this.vertices=c,this}_updateLength(e,r){r||this._update();const a=this.vertices.length,h=a-1,c=!1;let d=this.vertices[h],_=0;return typeof this._lengths>"u"&&(this._lengths=[]),rt.each(this.vertices,function(x,p){if(p<=0&&!c||x.command===v.move){d=x,this._lengths[p]=0;return}this._lengths[p]=Cs(x,d,e),_+=this._lengths[p],p>=h&&c&&(d=this.vertices[(p+1)%a],this._lengths[p+1]=Cs(x,d,e),_+=this._lengths[p+1]),d=x},this),this._length=_,this._flagLength=!1,this}_update(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);const e=this._collection.length,r=this._closed,a=Math.min(this._beginning,this._ending),h=Math.max(this._beginning,this._ending),c=ji(this,a*this._length),d=ji(this,h*this._length),_=Na(c),x=ja(d);let p,A,R,C,O,E;for(this._renderer.vertices.length=0,E=0;E<e;E++)this._renderer.collection.length<=E&&this._renderer.collection.push(new tt),E>x&&!A?(O=this._renderer.collection[E].copy(this._collection[E]),this.getPointAt(h,O),O.command=this._renderer.collection[E].command,this._renderer.vertices.push(O),A=O,R=this._collection[E-1],R&&R.controls&&(O.relative?O.controls.right.clear():O.controls.right.copy(O),R.relative?this._renderer.collection[E-1].controls.right.copy(R.controls.right).lerp(V.zero,1-O.t):this._renderer.collection[E-1].controls.right.copy(R.controls.right).lerp(R,1-O.t))):E>=_&&E<=x&&(O=this._renderer.collection[E].copy(this._collection[E]),this._renderer.vertices.push(O),E===x&&wr(this,h)?(A=O,!r&&A.controls&&(A.relative?A.controls.right.clear():A.controls.right.copy(A))):E===_&&wr(this,a)&&(p=O,p.command=v.move,!r&&p.controls&&(p.relative?p.controls.left.clear():p.controls.left.copy(p))));_>0&&!p&&(E=_-1,O=this._renderer.collection[E].copy(this._collection[E]),this.getPointAt(a,O),O.command=v.move,this._renderer.vertices.unshift(O),C=this._collection[E+1],C&&C.controls&&(O.controls.left.clear(),C.relative?this._renderer.collection[E+1].controls.left.copy(C.controls.left).lerp(V.zero,O.t):(za.copy(C),this._renderer.collection[E+1].controls.left.copy(C.controls.left).lerp(C,O.t))))}return je.prototype._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,je.prototype.flagReset.call(this),this}},kt=ui;k(kt,"Properties",["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"]),k(kt,"Utils",{getCurveLength:Cs});var Cr={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(s){this._linewidth=s,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(s){this._opacity=s,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(s){this._visible=s,this._flagVisible=!0}},cap:{enumerable:!0,get:function(){return this._cap},set:function(s){this._cap=s,this._flagCap=!0}},join:{enumerable:!0,get:function(){return this._join},set:function(s){this._join=s,this._flagJoin=!0}},miter:{enumerable:!0,get:function(){return this._miter},set:function(s){this._miter=s,this._flagMiter=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(s){(this._fill instanceof Ht||this._fill instanceof Pt||this._fill instanceof It||this._fill instanceof Tt)&&this._fill.unbind(F.Types.change,this._renderer.flagFill),this._fill=s,this._flagFill=!0,(this._fill instanceof Ht||this._fill instanceof Pt||this._fill instanceof It||this._fill instanceof Tt)&&this._fill.bind(F.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(s){(this._stroke instanceof Ht||this._stroke instanceof Pt||this._stroke instanceof It||this._stroke instanceof Tt)&&this._stroke.unbind(F.Types.change,this._renderer.flagStroke),this._stroke=s,this._flagStroke=!0,(this._stroke instanceof Ht||this._stroke instanceof Pt||this._stroke instanceof It||this._stroke instanceof Tt)&&this._stroke.bind(F.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},closed:{enumerable:!0,get:function(){return this._closed},set:function(s){this._closed=!!s,this._flagVertices=!0}},curved:{enumerable:!0,get:function(){return this._curved},set:function(s){this._curved=!!s,this._flagVertices=!0}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(s){if(s===this._automatic)return;this._automatic=!!s;const e=this._automatic?"ignore":"listen";rt.each(this.vertices,function(r){r[e]()})}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(s){this._beginning=s,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(s){this._ending=s,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(s){const e=this._renderer.bindVertices,r=this._renderer.unbindVertices;this._collection&&this._collection.unbind(F.Types.insert,e).unbind(F.Types.remove,r),s instanceof ze?this._collection=s:this._collection=new ze(s||[]),this._collection.bind(F.Types.insert,e).bind(F.Types.remove,r),e(this._collection)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(s){this._mask=s,this._flagMask=!0,rt.isObject(s)&&!s.clip&&(s.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(s){this._clip=s,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(s){typeof s.offset!="number"&&(s.offset=this.dashes&&this._dashes.offset||0),this._dashes=s}}};function Or(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)}function Lr(s){let e=s.length;for(;e--;)s[e].bind(F.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function Pr(s){let e=s.length;for(;e--;)s[e].unbind(F.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function Ir(){this._flagFill=!0}function Br(){this._flagStroke=!0}var Nr=class extends kt{constructor(e,r,a,h){const c=[new tt,new tt,new tt,new tt];super(c,!0,!1,!0);w(this,"_flagWidth",0);w(this,"_flagHeight",0);w(this,"_width",0);w(this,"_height",0);w(this,"_origin",null);for(let d in jr)Object.defineProperty(this,d,jr[d]);this.width=typeof a=="number"?a:1,this.height=typeof h=="number"?h:1,this.origin=new V,typeof e=="number"&&(this.translation.x=e),typeof r=="number"&&(this.translation.y=r),this._update()}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){const e=this._width/2,r=this._height/2;!this._closed&&this.vertices.length===4&&this.vertices.push(new tt),this.vertices[0].set(-e,-r).sub(this._origin).command=v.move,this.vertices[1].set(e,-r).sub(this._origin).command=v.line,this.vertices[2].set(e,r).sub(this._origin).command=v.line,this.vertices[3].set(-e,r).sub(this._origin).command=v.line,this.vertices[4]&&(this.vertices[4].set(-e,-r).sub(this._origin).command=v.line)}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(e){const r=new Nr(0,0,this.width,this.height);r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix);for(let a=0;a<kt.Properties.length;a++){const h=kt.Properties[a];r[h]=this[h]}return e&&e.add(r),r}toObject(){const e=super.toObject.call(this);return e.width=this.width,e.height=this.height,e.origin=this.origin.toObject(),e}},Ke=Nr;k(Ke,"Properties",["width","height"]);var jr={width:{enumerable:!0,get:function(){return this._width},set:function(s){this._width=s,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(s){this._height=s,this._flagHeight=!0}},origin:{enumerable:!0,get:function(){return this._origin},set:function(s){this._origin&&this._origin.unbind(F.Types.change,this._renderer.flagVertices),this._origin=s,this._origin.bind(F.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}}},zr=class extends Ke{constructor(e,r,a,h,c,d){super(r,a,0,0);w(this,"_flagTexture",!1);w(this,"_flagColumns",!1);w(this,"_flagRows",!1);w(this,"_flagFrameRate",!1);w(this,"_flagIndex",!1);w(this,"_amount",1);w(this,"_duration",0);w(this,"_startTime",0);w(this,"_playing",!1);w(this,"_firstFrame",0);w(this,"_lastFrame",0);w(this,"_loop",!0);w(this,"_texture",null);w(this,"_columns",1);w(this,"_rows",1);w(this,"_frameRate",0);w(this,"_index",0);w(this,"_origin",null);for(let _ in Vr)Object.defineProperty(this,_,Vr[_]);this.noStroke(),this.noFill(),e instanceof Tt?this.texture=e:typeof e=="string"&&(this.texture=new Tt(e)),this.origin=new V,this._update(),typeof h=="number"&&(this.columns=h),typeof c=="number"&&(this.rows=c),typeof d=="number"&&(this.frameRate=d),this.index=0}play(e,r,a){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=rt.performance.now(),typeof e=="number"&&(this._firstFrame=e),typeof r=="number"&&(this._lastFrame=r),typeof a=="function"?this._onLastFrame=a:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=0,this}clone(e){const r=new zr(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(r.play(this._firstFrame,this._lastFrame),r._loop=this._loop),e&&e.add(r),r}toObject(){const e=super.toObject.call(this);return e.texture=this.texture.toObject(),e.columns=this.columns,e.rows=this.rows,e.frameRate=this.frameRate,e.index=this.index,e._firstFrame=this._firstFrame,e._lastFrame=this._lastFrame,e._loop=this._loop,e}_update(){const e=this._texture,r=this._columns,a=this._rows;let h,c,d,_,x,p,A,R,C;if(e&&((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=e),e.loaded)){A=e.image.width,R=e.image.height,h=A/r,c=R/a,_=this._amount,this.width!==h&&(this.width=h),this.height!==c&&(this.height=c),this._playing&&this._frameRate>0&&(rt.isNaN(this._lastFrame)&&(this._lastFrame=_-1),d=rt.performance.now()-this._startTime,C=this._lastFrame+1,x=1e3*(C-this._firstFrame)/this._frameRate,this._loop?d=d%x:d=Math.min(d,x),p=Z(this._firstFrame,C,d/x),p=Math.floor(p),p!==this._index&&(this._index=p,p>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));const O=this._index%r,E=Math.floor(this._index/r),j=-h*O+(A-h)/2,D=-c*E+(R-c)/2;j!==e.offset.x&&(e.offset.x=j),D!==e.offset.y&&(e.offset.y=D)}return super._update.call(this),this}flagReset(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,super.flagReset.call(this),this}},Ui=zr;k(Ui,"Properties",["texture","columns","rows","frameRate","index"]);var Vr={texture:{enumerable:!0,get:function(){return this._texture},set:function(s){this._texture=s,this._flagTexture=!0}},columns:{enumerable:!0,get:function(){return this._columns},set:function(s){this._columns=s,this._flagColumns=!0}},rows:{enumerable:!0,get:function(){return this._rows},set:function(s){this._rows=s,this._flagRows=!0}},frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(s){this._frameRate=s,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(s){this._index=s,this._flagIndex=!0}}},Os=Math.cos,Ls=Math.sin,Wi=class extends kt{constructor(e,r,a,h){const c=h?Math.max(h,2):4,d=[];for(let _=0;_<c;_++)d.push(new tt(0,0,0,0,0,0));super(d,!0,!0,!0);w(this,"_flagRadius",!1);w(this,"_radius",0);for(let _ in Dr)Object.defineProperty(this,_,Dr[_]);typeof a=="number"&&(this.radius=a),this._update(),typeof e=="number"&&(this.translation.x=e),typeof r=="number"&&(this.translation.y=r)}_update(){if(this._flagVertices||this._flagRadius){let e=this.vertices.length;!this._closed&&e>2&&(e-=1);const r=4/3*Math.tan(Math.PI/(e*2)),a=this._radius,h=a*r;for(let c=0;c<this.vertices.length;c++){const _=c/e*I,x=a*Os(_),p=a*Ls(_),A=h*Os(_-M),R=h*Ls(_-M),C=h*Os(_+M),O=h*Ls(_+M),E=this.vertices[c];E.command=c===0?v.move:v.curve,E.set(x,p),E.controls.left.set(A,R),E.controls.right.set(C,O)}}return super._update.call(this),this}flagReset(){return this._flagRadius=!1,super.flagReset.call(this),this}clone(e){const r=new Wi(0,0,this.radius,this.vertices.length);r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix);for(let a=0;a<kt.Properties.length;a++){const h=kt.Properties[a];r[h]=this[h]}return e&&e.add(r),r}toObject(){const e=super.toObject.call(this);for(let r=0;r<Wi.Properties.length;r++){const a=Wi.Properties[r];e[a]=this[a]}return e}},Xi=Wi;k(Xi,"Properties",["radius"]);var Dr={radius:{enumerable:!0,get:function(){return this._radius},set:function(s){this._radius=s,this._flagRadius=!0}}},Ps=Math.cos,Is=Math.sin,Yi=class extends kt{constructor(e,r,a,h,c){typeof h!="number"&&typeof a=="number"&&(h=a);const d=c?Math.max(c,2):4,_=[];for(let x=0;x<d;x++)_.push(new tt);super(_,!0,!0,!0);w(this,"_flagWidth",!1);w(this,"_flagHeight",!1);w(this,"_width",0);w(this,"_height",0);for(let x in Ur)Object.defineProperty(this,x,Ur[x]);typeof a=="number"&&(this.width=a*2),typeof h=="number"&&(this.height=h*2),this._update(),typeof e=="number"&&(this.translation.x=e),typeof r=="number"&&(this.translation.y=r)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){let e=this.vertices.length;!this._closed&&e>2&&(e-=1);const r=4/3*Math.tan(Math.PI/(this.vertices.length*2)),a=this._width/2,h=this._height/2;for(let c=0;c<this.vertices.length;c++){const _=c/e*I,x=a*Ps(_),p=h*Is(_),A=a*r*Ps(_-M),R=h*r*Is(_-M),C=a*r*Ps(_+M),O=h*r*Is(_+M),E=this.vertices[c];E.command=c===0?v.move:v.curve,E.set(x,p),E.controls.left.set(A,R),E.controls.right.set(C,O)}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(e){const r=this.width/2,a=this.height/2,h=this.vertices.length,c=new Yi(0,0,r,a,h);c.translation.copy(this.translation),c.rotation=this.rotation,c.scale=this.scale,c.skewX=this.skewX,c.skewY=this.skewY,this.matrix.manual&&c.matrix.copy(this.matrix);for(let d=0;d<kt.Properties.length;d++){const _=kt.Properties[d];c[_]=this[_]}return e&&e.add(c),c}toObject(){const e=super.toObject.call(this);for(let r=0;r<Yi.Properties.length;r++){const a=Yi.Properties[r];e[a]=this[a]}return e}},Hi=Yi;k(Hi,"Properties",["width","height"]);var Ur={width:{enumerable:!0,get:function(){return this._width},set:function(s){this._width=s,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(s){this._height=s,this._flagHeight=!0}}},Bs=class extends kt{constructor(s,e,r,a){const h=[new tt(s,e),new tt(r,a)];super(h);for(let c in Wr)Object.defineProperty(this,c,Wr[c]);this.vertices[0].command=v.move,this.vertices[1].command=v.line,this.automatic=!1}},Wr={left:{enumerable:!0,get:function(){return this.vertices[0]},set:function(s){if(rt.isObject(s))this.vertices.splice(0,1,s);else{const e=new le("Two.Line.x argument is not an object.");console.warn(e.name,e.message)}}},right:{enumerable:!0,get:function(){return this.vertices[1]},set:function(s){if(rt.isObject(s))this.vertices.splice(1,1,s);else{const e=new le("Two.Line.y argument is not an object.");console.warn(e.name,e.message)}}}},qi=class extends kt{constructor(e,r,a,h,c){typeof c>"u"&&typeof a=="number"&&typeof h=="number"&&(c=Math.floor(Math.min(a,h)/12));const d=[];for(let _=0;_<10;_++)d.push(new tt(0,0,0,0,0,0,_===0?v.move:v.curve));super(d);w(this,"_flagWidth",!1);w(this,"_flagHeight",!1);w(this,"_flagRadius",!1);w(this,"_width",0);w(this,"_height",0);w(this,"_radius",12);for(let _ in Xr)Object.defineProperty(this,_,Xr[_]);this.closed=!0,this.automatic=!1,this._renderer.flagRadius=Va.bind(this),typeof a=="number"&&(this.width=a),typeof h=="number"&&(this.height=h),typeof c=="number"&&(this.radius=c),this._update(),typeof e=="number"&&(this.translation.x=e),typeof r=="number"&&(this.translation.y=r)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagRadius){const e=this._width,r=this._height;let a,h;this._radius instanceof V?(a=this._radius.x,h=this._radius.y):(a=this._radius,h=this._radius);let c,d=e/2,_=r/2;c=this.vertices[0],c.x=-(d-a),c.y=-_,c=this.vertices[1],c.x=d-a,c.y=-_,c.controls.left.clear(),c.controls.right.x=a,c.controls.right.y=0,c=this.vertices[2],c.x=d,c.y=-(_-h),c.controls.right.clear(),c.controls.left.clear(),c=this.vertices[3],c.x=d,c.y=_-h,c.controls.left.clear(),c.controls.right.x=0,c.controls.right.y=h,c=this.vertices[4],c.x=d-a,c.y=_,c.controls.right.clear(),c.controls.left.clear(),c=this.vertices[5],c.x=-(d-a),c.y=_,c.controls.left.clear(),c.controls.right.x=-a,c.controls.right.y=0,c=this.vertices[6],c.x=-d,c.y=_-h,c.controls.left.clear(),c.controls.right.clear(),c=this.vertices[7],c.x=-d,c.y=-(_-h),c.controls.left.clear(),c.controls.right.x=0,c.controls.right.y=-h,c=this.vertices[8],c.x=-(d-a),c.y=-_,c.controls.left.clear(),c.controls.right.clear(),c=this.vertices[9],c.copy(this.vertices[8])}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,super.flagReset.call(this),this}clone(e){const r=this.width,a=this.height,h=this.radius,c=new qi(0,0,r,a,h);c.translation.copy(this.translation),c.rotation=this.rotation,c.scale=this.scale,c.skewX=this.skewX,c.skewY=this.skewY,this.matrix.manual&&c.matrix.copy(this.matrix);for(let d=0;d<kt.Properties.length;d++){const _=kt.Properties[d];c[_]=this[_]}return e&&e.add(c),c}toObject(){const e=super.toObject.call(this);for(let r=0;r<qi.Properties.length;r++){const a=qi.Properties[r];e[a]=this[a]}return e.radius=typeof this.radius=="number"?this.radius:this.radius.toObject(),e}},Gi=qi;k(Gi,"Properties",["width","height","radius"]);var Xr={width:{enumerable:!0,get:function(){return this._width},set:function(s){this._width=s,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(s){this._height=s,this._flagHeight=!0}},radius:{enumerable:!0,get:function(){return this._radius},set:function(s){this._radius instanceof V&&this._radius.unbind(F.Types.change,this._renderer.flagRadius),this._radius=s,this._radius instanceof V&&this._radius.bind(F.Types.change,this._renderer.flagRadius),this._flagRadius=!0}}};function Va(){this._flagRadius=!0}var Ns,Yr=Math.min,Hr=Math.max;B.document&&(Ns=document.createElement("canvas"));var Ee=class extends je{constructor(e,r,a,h){super();w(this,"_flagValue",!0);w(this,"_flagFamily",!0);w(this,"_flagSize",!0);w(this,"_flagLeading",!0);w(this,"_flagAlignment",!0);w(this,"_flagBaseline",!0);w(this,"_flagStyle",!0);w(this,"_flagWeight",!0);w(this,"_flagDecoration",!0);w(this,"_flagFill",!0);w(this,"_flagStroke",!0);w(this,"_flagLinewidth",!0);w(this,"_flagOpacity",!0);w(this,"_flagVisible",!0);w(this,"_flagMask",!1);w(this,"_flagClip",!1);w(this,"_flagDirection",!0);w(this,"_value","");w(this,"_family","sans-serif");w(this,"_size",13);w(this,"_leading",17);w(this,"_alignment","center");w(this,"_baseline","middle");w(this,"_style","normal");w(this,"_weight",500);w(this,"_decoration","none");w(this,"_direction","ltr");w(this,"_fill","#000");w(this,"_stroke","none");w(this,"_linewidth",1);w(this,"_opacity",1);w(this,"_visible",!0);w(this,"_mask",null);w(this,"_clip",!1);w(this,"_dashes",null);for(let c in qr)Object.defineProperty(this,c,qr[c]);if(this._renderer.type="text",this._renderer.flagFill=Da.bind(this),this._renderer.flagStroke=Ua.bind(this),this.value=e,typeof r=="number"&&(this.translation.x=r),typeof a=="number"&&(this.translation.y=a),this.dashes=[],this.dashes.offset=0,!rt.isObject(h))return this;for(let c=0;c<Ee.Properties.length;c++){const d=Ee.Properties[c];d in h&&(this[d]=h[d])}}static Measure(e){if(Ns){const r=Ns.getContext("2d");r.font=[e._style,e._weight,`${e._size}px/${e._leading}px`,e._family].join(" ");const a=r.measureText(e.value,0,0),h=a.actualBoundingBoxDescent+a.actualBoundingBoxAscent;return{width:a.width,height:h}}else{const r=this.value.length*this.size*Ee.Ratio,a=this.leading;return console.warn("Two.Text: unable to accurately measure text, so using an approximation."),{width:r,height:a}}}clone(e){const r=new Ee(this.value);r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale;for(let a=0;a<Ee.Properties.length;a++){const h=Ee.Properties[a];r[h]=this[h]}return this.matrix.manual&&r.matrix.copy(this.matrix),e&&e.add(r),r._update()}toObject(){const e={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};this.matrix.manual&&(e.matrix=this.matrix.toObject());for(let r=0;r<Ee.Properties.length;r++){const a=Ee.Properties[r];e[a]=this[a]}return e}noFill(){return this.fill="none",this}noStroke(){return this.stroke="none",this.linewidth=0,this}getBoundingClientRect(e){let r,a,h,c,d;this._update(!0),r=e?this.matrix:this.worldMatrix;const{width:_,height:x}=Ee.Measure(this),p=(this._linewidth||0)/2;switch(this.alignment){case"left":a=-p,h=_+p;break;case"right":a=-(_+p),h=p;break;default:a=-(_/2+p),h=_/2+p}switch(this.baseline){case"middle":c=-(x/2+p),d=x/2+p;break;default:c=-(x+p),d=p}const[A,R]=r.multiply(a,c),[C,O]=r.multiply(a,d),[E,j]=r.multiply(h,c),[D,N]=r.multiply(h,d);return c=Yr(R,O,j,N),a=Yr(A,C,E,D),h=Hr(A,C,E,D),d=Hr(R,O,j,N),{top:c,left:a,right:h,bottom:d,width:h-a,height:d-c}}flagReset(){return super.flagReset.call(this),this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=this._flagDirection=!1,this}},Ae=Ee;k(Ae,"Ratio",.6),k(Ae,"Properties",["value","family","size","leading","alignment","linewidth","style","weight","decoration","direction","baseline","opacity","visible","fill","stroke"]);var qr={value:{enumerable:!0,get:function(){return this._value},set:function(s){this._value=s,this._flagValue=!0}},family:{enumerable:!0,get:function(){return this._family},set:function(s){this._family=s,this._flagFamily=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(s){this._size=s,this._flagSize=!0}},leading:{enumerable:!0,get:function(){return this._leading},set:function(s){this._leading=s,this._flagLeading=!0}},alignment:{enumerable:!0,get:function(){return this._alignment},set:function(s){this._alignment=s,this._flagAlignment=!0}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(s){this._linewidth=s,this._flagLinewidth=!0}},style:{enumerable:!0,get:function(){return this._style},set:function(s){this._style=s,this._flagStyle=!0}},weight:{enumerable:!0,get:function(){return this._weight},set:function(s){this._weight=s,this._flagWeight=!0}},decoration:{enumerable:!0,get:function(){return this._decoration},set:function(s){this._decoration=s,this._flagDecoration=!0}},direction:{enumerable:!0,get:function(){return this._direction},set:function(s){this._direction=s,this._flagDirection=!0}},baseline:{enumerable:!0,get:function(){return this._baseline},set:function(s){this._baseline=s,this._flagBaseline=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(s){this._opacity=s,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(s){this._visible=s,this._flagVisible=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(s){(this._fill instanceof Ht||this._fill instanceof Pt||this._fill instanceof It||this._fill instanceof Tt)&&this._fill.unbind(F.Types.change,this._renderer.flagFill),this._fill=s,this._flagFill=!0,(this._fill instanceof Ht||this._fill instanceof Pt||this._fill instanceof It||this._fill instanceof Tt)&&this._fill.bind(F.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(s){(this._stroke instanceof Ht||this._stroke instanceof Pt||this._stroke instanceof It||this._stroke instanceof Tt)&&this._stroke.unbind(F.Types.change,this._renderer.flagStroke),this._stroke=s,this._flagStroke=!0,(this._stroke instanceof Ht||this._stroke instanceof Pt||this._stroke instanceof It||this._stroke instanceof Tt)&&this._stroke.bind(F.Types.change,this._renderer.flagStroke)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(s){this._mask=s,this._flagMask=!0,rt.isObject(s)&&!s.clip&&(s.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(s){this._clip=s,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(s){typeof s.offset!="number"&&(s.offset=this.dashes&&this._dashes.offset||0),this._dashes=s}}};function Da(){this._flagFill=!0}function Ua(){this._flagStroke=!0}var Fe={path:/[+-]?(?:\d*\.\d+|\d+)(?:[eE][+-]\d+)?/g,cssBackgroundImage:/url\(['"]?#([\w\d-_]*)['"]?\)/i,unitSuffix:/[a-zA-Z%]*/i},Wa={start:"left",middle:"center",end:"right"},Gr=["id","class","transform","xmlns","viewBox"],Xa=["x","y","width","height","href","xlink:href"];function Ya(s){return Wa[s]}function Ha(s){const e=s.getAttribute("dominant-baseline"),r=s.getAttribute("alignment-baseline");return e||r}function di(s){return s.replace(/svg:/ig,"").toLowerCase()}function $r(s,e){if(e.x+=s.translateX,e.y+=s.translateY,e.x*=s.scaleX,e.y*=s.scaleY,s.rotation!==0){const r=e.length();e.x=r*Math.cos(s.rotation),e.y=r*Math.sin(s.rotation)}}function qa(s,e){e||(e={});const r=s.split(";");for(let a=0;a<r.length;a++){const h=r[a].split(":"),c=h[0],d=h[1];typeof c>"u"||typeof d>"u"||(e[c]=d.replace(/\s/,""))}return e}function Ga(s){const e={},r=$a(s),a=Math.max(r.length,s.style.length);for(let h=0;h<a;h++){const c=s.style[h],d=r[h];c&&(e[c]=s.style[c]),d&&(e[d]=s.getAttribute(d))}return e}function $a(s){const e=s.getAttributeNames();for(let r=0;r<Gr.length;r++){const a=Gr[r],h=Array.prototype.indexOf.call(e,a);h>=0&&e.splice(h,1)}return e}function Ka(s,e){const r=e.split(/[\s,]/),a=-parseFloat(r[0]),h=-parseFloat(r[1]),c=parseFloat(r[2]),d=parseFloat(r[3]);if(a&&h)for(let R=0;R<s.children.length;R++){const C=s.children[R];"translation"in C?C.translation.add(a,h):"x"in C?C.x=a:"y"in C&&(C.y=h)}const _=typeof s.x=="number",x=typeof s.y=="number",p=typeof s.width=="number",A=typeof s.height=="number";return _&&(s.translation.x+=s.x),x&&(s.translation.y+=s.y),(p||A)&&(s.scale=new V(1,1)),p&&(s.scale.x=s.width/c),A&&(s.scale.y=s.height/d),s.mask=new Ke(0,0,c,d),s.mask.origin.set(-c/2,-d/2),s}function me(s,e,r){const a={},h={},c={};let d,_,x,p,A,R,C,O,E,j,D,N,P,H,$,q,J;if(s===null)return a;if(B.getComputedStyle){const at=B.getComputedStyle(s);for(d=at.length;d--;)x=at[d],p=at[x],typeof p<"u"&&(a[x]=p)}for(d=0;d<s.attributes.length;d++)R=s.attributes[d],/style/i.test(R.nodeName)?qa(R.value,c):h[R.nodeName]=R.value;typeof a.opacity<"u"&&(a["stroke-opacity"]=a.opacity,a["fill-opacity"]=a.opacity,delete a.opacity),r&&rt.defaults(a,r),rt.extend(a,c,h),a.visible=!(typeof a.display>"u"&&/none/i.test(a.display))||typeof a.visibility>"u"&&/hidden/i.test(a.visibility);for(x in a)switch(p=a[x],x){case"gradientTransform":if(/none/i.test(p)||(_=s.gradientTransform&&s.gradientTransform.baseVal&&s.gradientTransform.baseVal.length>0?s.gradientTransform.baseVal[0].matrix:s.getCTM?s.getCTM():null,_===null))break;switch(C=X(_),e._renderer.type){case"linear-gradient":$r(C,e.left),$r(C,e.right);break;case"radial-gradient":e.center.x+=C.translateX,e.center.y+=C.translateY,e.focal.x+=C.translateX,e.focal.y+=C.translateY,e.radius*=Math.max(C.scaleX,C.scaleY);break}break;case"transform":if(/none/i.test(p)||(_=s.transform&&s.transform.baseVal&&s.transform.baseVal.length>0?s.transform.baseVal[0].matrix:s.getCTM?s.getCTM():null,_===null))break;C=X(_),e.translation.set(C.translateX,C.translateY),e.rotation=Math.PI*(C.rotation/180),e.scale=new V(C.scaleX,C.scaleY),O=parseFloat((a.x+"").replace("px")),E=parseFloat((a.y+"").replace("px")),O&&(e.translation.x=O),E&&(e.translation.y=E);break;case"visible":if(e instanceof Yt){e._visible=p;break}e.visible=p;break;case"stroke-linecap":if(e instanceof Yt){e._cap=p;break}e.cap=p;break;case"stroke-linejoin":if(e instanceof Yt){e._join=p;break}e.join=p;break;case"stroke-miterlimit":if(e instanceof Yt){e._miter=p;break}e.miter=p;break;case"stroke-width":if(e instanceof Yt){e._linewidth=parseFloat(p);break}e.linewidth=parseFloat(p);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(e instanceof Yt){e._opacity=parseFloat(p);break}e.opacity=parseFloat(p);break;case"clip-path":if(Fe.cssBackgroundImage.test(p)&&(j=p.replace(Fe.cssBackgroundImage,"$1"),Bt.defs.current&&Bt.defs.current.contains(j)&&(N=Bt.defs.current.get(j),N&&N.childNodes.length>0)))switch(N=N.childNodes[0],P=di(N.nodeName),e.mask=Bt[P].call(this,N,{}),e._renderer.type){case"text":case"path":e.position.add(e.mask.position),e.mask.position.clear();break}break;case"fill":case"stroke":A=(e instanceof Yt?"_":"")+x,Fe.cssBackgroundImage.test(p)?(j=p.replace(Fe.cssBackgroundImage,"$1"),Bt.defs.current&&Bt.defs.current.contains(j)?(N=Bt.defs.current.get(j),N.object||(P=di(N.nodeName),N.object=Bt[P].call(this,N,{})),N=N.object):(D=Za(this),N=D.getById(j)),e[A]=N):e[A]=p;break;case"id":e.id=p;break;case"class":case"className":e.classList=p.split(" "),e._flagClassName=!0;break;case"x":case"y":if(H=e instanceof Ht,$=e instanceof Pt,q=e instanceof It,H||$||q)break;p.match("[a-z%]$")&&!p.endsWith("px")&&(J=new le("only pixel values are supported with the "+x+" attribute."),console.warn(J.name,J.message)),e.translation[x]=parseFloat(p);break;case"font-family":e instanceof Ae&&(e.family=p);break;case"font-size":e instanceof Ae&&(e.size=p);break;case"font-weight":e instanceof Ae&&(e.weight=p);break;case"font-style":e instanceof Ae&&(e.style=p);break;case"text-decoration":e instanceof Ae&&(e.decoration=p);break;case"line-height":e instanceof Ae&&(e.leading=p);break}return Object.keys(s.dataset).length&&(e.dataset=s.dataset),a}function Ja(s,e){for(let r=0,a=s.childNodes.length;r<a;r++){const h=s.childNodes[r];!h.id||di(s.nodeName)==="#text"||e.add(h.id,h)}}function Za(s){for(;s.parent;)s=s.parent;return s.scene}var Bt={svg:function(s){const e=Bt.defs.current=new Ni,r=s.getElementsByTagName("defs");for(let E=0;E<r.length;E++)Ja(r[E],e);const a=Bt.g.call(this,s),h=s.getAttribute("viewBox"),c=s.getAttribute("x"),d=s.getAttribute("y"),_=s.getAttribute("width"),x=s.getAttribute("height");a.defs=e;const p=h!==null,A=c!==null,R=d!==null,C=_!==null,O=x!==null;return A&&(a.x=parseFloat(c.replace(Fe.unitSuffix,""))),R&&(a.y=parseFloat(d.replace(Fe.unitSuffix,""))),C&&(a.width=parseFloat(_.replace(Fe.unitSuffix,""))),O&&(a.height=parseFloat(x.replace(Fe.unitSuffix,""))),p&&Ka(a,h),delete Bt.defs.current,a},defs:function(s){return null},use:function(s,e){let r;const a=s.getAttribute("href")||s.getAttribute("xlink:href");if(!a)return r=new le("encountered <use /> with no href."),console.warn(r.name,r.message),null;const h=a.slice(1);if(!Bt.defs.current.contains(h))return r=new le("unable to find element for reference "+a+"."),console.warn(r.name,r.message),null;const d=Bt.defs.current.get(h).cloneNode(!0);for(let x=0;x<s.attributes.length;x++){const p=s.attributes[x],A=Xa.includes(p.nodeName),R=!d.hasAttribute(p.nodeName);(A||R)&&d.setAttribute(p.nodeName,p.value)}const _=di(d.nodeName);return Bt[_].call(this,d,e)},g:function(s,e){const r=new Yt;me.call(this,s,r,e),this.add(r);const a=Ga.call(this,s);for(let h=0,c=s.childNodes.length;h<c;h++){const d=s.childNodes[h],_=d.nodeName;if(!_)return;const x=di(_);if(x in Bt){const p=Bt[x].call(r,d,a);p&&!p.parent&&r.add(p)}}return r},polygon:function(s,e){let r;typeof s=="string"?r=s:r=s.getAttribute("points");const a=[];r.replace(/(-?[\d.eE-]+)[,|\s](-?[\d.eE-]+)/g,function(c,d,_){a.push(new tt(parseFloat(d),parseFloat(_)))});const h=new kt(a,!0).noStroke();return h.fill="black",me.call(this,s,h,e),h},polyline:function(s,e){const r=Bt.polygon.call(this,s,e);return r.closed=!1,r},path:function(s,e){let r;typeof s=="string"?(r=s,s=null):r=s.getAttribute("d");let a=[],h=!1,c=!1;if(r){let _=new tt,x,p,A=r.match(/[a-df-z][^a-df-z]*/ig);const R=A.length-1;rt.each(A.slice(0),function(C,O){const E=C.slice(1).trim().match(Fe.path),j=C[0],D=j.toLowerCase();let N,P,H,$,q;const J=[];switch(O===0&&(A=[]),D){case"h":case"v":E.length>1&&(N=1);break;case"m":case"l":case"t":E.length>2&&(N=2);break;case"s":case"q":E.length>4&&(N=4);break;case"c":E.length>6&&(N=6);break;case"a":E.length>7&&(N=7);break}if(N){for(P=0,H=E.length,q=0;P<H;P+=N){if($=j,q>0)switch(j){case"m":$="l";break;case"M":$="L";break}J.push($+E.slice(P,P+N).join(" ")),q++}A=Array.prototype.concat.apply(A,J)}else A.push(C)}),rt.each(A,function(C,O){let E,j,D;const N=C[0],P=N.toLowerCase();p=C.slice(1).trim().match(Fe.path),c=N===P;let H,$,q,J,at,gt,ut,ot,vt,bt,Mt,At,qt,se,Xt,oe,te;switch(P){case"z":if(O>=R)h=!0;else{j=_.x,D=_.y,E=new tt(j,D,void 0,void 0,void 0,void 0,v.close);for(let Pe=a.length-1;Pe>=0;Pe--){const We=a[Pe];if(/m/i.test(We.command)){_=We;break}}}break;case"m":case"l":x=void 0,j=parseFloat(p[0]),D=parseFloat(p[1]),E=new tt(j,D,void 0,void 0,void 0,void 0,/m/i.test(P)?v.move:v.line),c&&E.addSelf(_),_=E;break;case"h":case"v":bt=/h/i.test(P)?"x":"y",Mt=/x/i.test(bt)?"y":"x",E=new tt(void 0,void 0,void 0,void 0,void 0,void 0,v.line),E[bt]=parseFloat(p[0]),E[Mt]=_[Mt],c&&(E[bt]+=_[bt]),_=E;break;case"c":case"s":H=_.x,$=_.y,x||(x=new V),/c/i.test(P)?(q=parseFloat(p[0]),J=parseFloat(p[1]),at=parseFloat(p[2]),gt=parseFloat(p[3]),ut=parseFloat(p[4]),ot=parseFloat(p[5])):(vt=Rs(_,x,c),q=vt.x,J=vt.y,at=parseFloat(p[0]),gt=parseFloat(p[1]),ut=parseFloat(p[2]),ot=parseFloat(p[3])),c&&(q+=H,J+=$,at+=H,gt+=$,ut+=H,ot+=$),_.controls.right.set(q-_.x,J-_.y),E=new tt(ut,ot,at-ut,gt-ot,void 0,void 0,v.curve),_=E,x=E.controls.left;break;case"t":case"q":H=_.x,$=_.y,x||(x=new V),/q/i.test(P)?(q=parseFloat(p[0]),J=parseFloat(p[1]),at=parseFloat(p[0]),gt=parseFloat(p[1]),ut=parseFloat(p[2]),ot=parseFloat(p[3])):(vt=Rs(_,x,c),q=vt.x,J=vt.y,at=vt.x,gt=vt.y,ut=parseFloat(p[0]),ot=parseFloat(p[1])),c&&(q+=H,J+=$,at+=H,gt+=$,ut+=H,ot+=$),_.controls.right.set((q-_.x)*.33,(J-_.y)*.33),E=new tt(ut,ot,at-ut,gt-ot,void 0,void 0,v.curve),_=E,x=E.controls.left;break;case"a":H=_.x,$=_.y,qt=parseFloat(p[0]),se=parseFloat(p[1]),Xt=parseFloat(p[2]),oe=parseFloat(p[3]),te=parseFloat(p[4]),ut=parseFloat(p[5]),ot=parseFloat(p[6]),c&&(ut+=H,ot+=$),At=new tt(ut,ot),At.command=v.arc,At.rx=qt,At.ry=se,At.xAxisRotation=Xt,At.largeArcFlag=oe,At.sweepFlag=te,E=At,_=At,x=void 0;break}E&&(Array.isArray(E)?a=a.concat(E):a.push(E))})}r=new kt(a,h,void 0,!0).noStroke(),r.fill="black";const d=r.getBoundingClientRect(!0);return d.centroid={x:d.left+d.width/2,y:d.top+d.height/2},rt.each(r.vertices,function(_){_.subSelf(d.centroid)}),me.call(this,s,r,e),r.translation.addSelf(d.centroid),r},circle:function(s,e){const r=parseFloat(s.getAttribute("cx")),a=parseFloat(s.getAttribute("cy")),h=parseFloat(s.getAttribute("r")),c=new Xi(0,0,h).noStroke();return c.fill="black",me.call(this,s,c,e),c.translation.x=r,c.translation.y=a,c},ellipse:function(s,e){const r=parseFloat(s.getAttribute("cx")),a=parseFloat(s.getAttribute("cy")),h=parseFloat(s.getAttribute("rx")),c=parseFloat(s.getAttribute("ry")),d=new Hi(0,0,h,c).noStroke();return d.fill="black",me.call(this,s,d,e),d.translation.x=r,d.translation.y=a,d},rect:function(s,e){const r=parseFloat(s.getAttribute("rx")),a=parseFloat(s.getAttribute("ry"));if(!rt.isNaN(r)||!rt.isNaN(a))return Bt["rounded-rect"](s);const h=parseFloat(s.getAttribute("width")),c=parseFloat(s.getAttribute("height")),d=h/2,_=c/2,x=new Ke(0,0,h,c).noStroke();return x.fill="black",me.call(this,s,x,e),x.translation.x+=d,x.translation.y+=_,x},"rounded-rect":function(s,e){const r=parseFloat(s.getAttribute("rx"))||0,a=parseFloat(s.getAttribute("ry"))||0,h=parseFloat(s.getAttribute("width")),c=parseFloat(s.getAttribute("height")),d=h/2,_=c/2,x=new V(r,a),p=new Gi(0,0,h,c,x).noStroke();return p.fill="black",me.call(this,s,p,e),p.translation.x+=d,p.translation.y+=_,p},line:function(s,e){const r=parseFloat(s.getAttribute("x1")),a=parseFloat(s.getAttribute("y1")),h=parseFloat(s.getAttribute("x2")),c=parseFloat(s.getAttribute("y2")),d=new Bs(r,a,h,c).noFill();return me.call(this,s,d,e),d},lineargradient:function(s,e){let r=s.getAttribute("gradientUnits"),a=s.getAttribute("spreadMethod");r||(r="objectBoundingBox"),a||(a="pad");let h=parseFloat(s.getAttribute("x1")||0),c=parseFloat(s.getAttribute("y1")||0),d=parseFloat(s.getAttribute("x2")||0),_=parseFloat(s.getAttribute("y2")||0);const x=(d+h)/2,p=(_+c)/2;/userSpaceOnUse/i.test(r)&&(h-=x,c-=p,d-=x,_-=p);const A=[];for(let C=0;C<s.children.length;C++){const O=s.children[C];let E=O.getAttribute("offset");/%/ig.test(E)&&(E=parseFloat(E.replace(/%/ig,""))/100),E=parseFloat(E);let j=O.getAttribute("stop-color"),D=O.getAttribute("stop-opacity"),N=O.getAttribute("style"),P;j===null&&(P=N?N.match(/stop-color:\s?([#a-fA-F0-9]*)/):!1,j=P&&P.length>1?P[1]:void 0),D===null?(P=N?N.match(/stop-opacity:\s?([0-9.-]*)/):!1,D=P&&P.length>1?parseFloat(P[1]):1):D=parseFloat(D),A.push(new De(E,j,D))}const R=new Pt(h,c,d,_,A);return R.spread=a,R.units=r,me.call(this,s,R,e),R},radialgradient:function(s,e){let r=s.getAttribute("gradientUnits"),a=s.getAttribute("spreadMethod");r||(r="objectBoundingBox"),a||(a="pad");let h=parseFloat(s.getAttribute("cx"))||0,c=parseFloat(s.getAttribute("cy"))||0,d=parseFloat(s.getAttribute("r")),_=parseFloat(s.getAttribute("fx")),x=parseFloat(s.getAttribute("fy"));rt.isNaN(_)&&(_=h),rt.isNaN(x)&&(x=c);const p=Math.abs(h+_)/2,A=Math.abs(c+x)/2;/userSpaceOnUse/i.test(r)&&(h-=p,c-=A,_-=p,x-=A);const R=[];for(let O=0;O<s.children.length;O++){const E=s.children[O];let j=E.getAttribute("offset");/%/ig.test(j)&&(j=parseFloat(j.replace(/%/ig,""))/100),j=parseFloat(j);let D=E.getAttribute("stop-color"),N=E.getAttribute("stop-opacity"),P=E.getAttribute("style"),H;D===null&&(H=P?P.match(/stop-color:\s?([#a-fA-F0-9]*)/):!1,D=H&&H.length>1?H[1]:void 0),N===null?(H=P?P.match(/stop-opacity:\s?([0-9.-]*)/):!1,N=H&&H.length>1?parseFloat(H[1]):1):N=parseFloat(N),R.push(new De(j,D,N))}const C=new It(h,c,d,R,_,x);return C.spread=a,C.units=r,me.call(this,s,C,e),C},text:function(s,e){const r=Ya(s.getAttribute("text-anchor"))||"left",a=Ha(s)||"baseline",h=s.textContent,c=new Ae(h);return me.call(this,s,c,e),c.alignment=r,c.baseline=a,c},clippath:function(s,e){return Bt.defs.current&&!Bt.defs.current.contains(s.id)&&Bt.defs.current.add(s.id,s),null},image:function(s,e){let r;const a=s.getAttribute("href")||s.getAttribute("xlink:href");if(!a)return r=new le("encountered <image /> with no href."),console.warn(r.name,r.message),null;const h=parseFloat(s.getAttribute("x"))||0,c=parseFloat(s.getAttribute("y"))||0,d=parseFloat(s.getAttribute("width")),_=parseFloat(s.getAttribute("height")),x=new Ui(a,h,c);return rt.isNaN(d)||(x.width=d),rt.isNaN(_)||(x.height=_),me.call(this,s,x,e),x}};function Kr(s,e){const r=new XMLHttpRequest;return r.open("GET",s),r.onreadystatechange=function(){r.readyState===4&&r.status===200&&e(r.responseText)},r.send(),r}var js=class extends Ke{constructor(e,r,a,h){super(r,a,0,0);w(this,"_flagTextures",!1);w(this,"_flagFrameRate",!1);w(this,"_flagIndex",!1);w(this,"_amount",1);w(this,"_duration",0);w(this,"_index",0);w(this,"_startTime",0);w(this,"_playing",!1);w(this,"_firstFrame",0);w(this,"_lastFrame",0);w(this,"_loop",!0);w(this,"_textures",null);w(this,"_frameRate",0);w(this,"_origin",null);for(let c in Jr)Object.defineProperty(this,c,Jr[c]);this._renderer.flagTextures=Qa.bind(this),this._renderer.bindTextures=tl.bind(this),this._renderer.unbindTextures=el.bind(this),this.noStroke(),this.noFill(),Array.isArray(e)?this.textures=e.map(Zr.bind(this)):this.textures=[Zr(e)],this.origin=new V,this._update(),typeof h=="number"?this.frameRate=h:this.frameRate=js.DefaultFrameRate,this.index=0}play(e,r,a){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=rt.performance.now(),typeof e=="number"&&(this._firstFrame=e),typeof r=="number"&&(this._lastFrame=r),typeof a=="function"?this._onLastFrame=a:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=this._firstFrame,this}clone(e){const r=new js(this.textures,this.translation.x,this.translation.y,this.frameRate);return r._loop=this._loop,this._playing&&r.play(),e&&e.add(r),r}toObject(){const e=super.toObject.call(this);return e.textures=this.textures.map(function(r){return r.toObject()}),e.frameRate=this.frameRate,e.index=this.index,e._firstFrame=this._firstFrame,e._lastFrame=this._lastFrame,e._loop=this._loop,e}_update(){const e=this._textures;let r,a,h,c,d,_,x,p;return e&&(this._flagTextures&&(this._amount=e.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(c=this._amount,rt.isNaN(this._lastFrame)&&(this._lastFrame=c-1),h=rt.performance.now()-this._startTime,p=this._lastFrame+1,d=1e3*(p-this._firstFrame)/this._frameRate,this._loop?h=h%d:h=Math.min(h,d),x=Z(this._firstFrame,p,h/d),x=Math.floor(x),x!==this._index&&(this._index=x,_=e[this._index],_.loaded&&(r=_.image.width,a=_.image.height,this.width!==r&&(this.width=r),this.height!==a&&(this.height=a),this.fill=_,x>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):(this._flagIndex||!(this.fill instanceof Tt))&&(_=e[this._index],_.loaded&&(r=_.image.width,a=_.image.height,this.width!==r&&(this.width=r),this.height!==a&&(this.height=a)),this.fill=_)),super._update.call(this),this}flagReset(){return this._flagTextures=this._flagFrameRate=!1,super.flagReset.call(this),this}},$i=js;k($i,"Properties",["textures","frameRate","index"]),k($i,"DefaultFrameRate",30);var Jr={frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(s){this._frameRate=s,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(s){this._index=s,this._flagIndex=!0}},textures:{enumerable:!0,get:function(){return this._textures},set:function(s){const e=this._renderer.bindTextures,r=this._renderer.unbindTextures;this._textures&&this._textures.unbind(F.Types.insert,e).unbind(F.Types.remove,r),this._textures=new ze((s||[]).slice(0)),this._textures.bind(F.Types.insert,e).bind(F.Types.remove,r),e(this._textures)}}};function Qa(){this._flagTextures=!0}function tl(s){let e=s.length;for(;e--;)s[e].bind(F.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function el(s){let e=s.length;for(;e--;)s[e].unbind(F.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function Zr(s){if(s instanceof Tt)return s;if(typeof s=="string")return new Tt(s)}var Ki=class extends kt{constructor(e,r,a,h,c,d,_){const x=_||Ct.Resolution*3,p=[];for(let A=0;A<x;A++)p.push(new tt);super(p,!0,!1,!0);w(this,"_flagStartAngle",!1);w(this,"_flagEndAngle",!1);w(this,"_flagInnerRadius",!1);w(this,"_flagOuterRadius",!1);w(this,"_startAngle",0);w(this,"_endAngle",I);w(this,"_innerRadius",0);w(this,"_outerRadius",0);for(let A in Qr)Object.defineProperty(this,A,Qr[A]);typeof a=="number"&&(this.innerRadius=a),typeof h=="number"&&(this.outerRadius=h),typeof c=="number"&&(this.startAngle=c),typeof d=="number"&&(this.endAngle=d),this._update(),typeof e=="number"&&(this.translation.x=e),typeof r=="number"&&(this.translation.y=r)}_update(){if(this._flagVertices||this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){const e=this._startAngle,r=this._endAngle,a=this._innerRadius,h=this._outerRadius,c=et(e,I)===et(r,I),d=a>0,_=this.vertices;let x=d?_.length/2:_.length,p,A=0,R,C,O,E,j,D,N,P,H;for(c?x--:d||(x-=2),R=0,C=x-1;R<x;R++){switch(O=R/C,E=_[A],j=O*(r-e)+e,D=(r-e)/x,N=h*Math.cos(j),P=h*Math.sin(j),R){case 0:p=v.move;break;default:p=v.curve}E.command=p,E.x=N,E.y=P,E.controls.left.clear(),E.controls.right.clear(),E.command===v.curve&&(H=h*D/Math.PI,E.controls.left.x=H*Math.cos(j-M),E.controls.left.y=H*Math.sin(j-M),E.controls.right.x=H*Math.cos(j+M),E.controls.right.y=H*Math.sin(j+M),R===1&&E.controls.left.multiplyScalar(2),R===C&&E.controls.right.multiplyScalar(2)),A++}if(d){for(c?(_[A].command=v.close,A++):(x--,C=x-1),R=0;R<x;R++)O=R/C,E=_[A],j=(1-O)*(r-e)+e,D=(r-e)/x,N=a*Math.cos(j),P=a*Math.sin(j),p=v.curve,R<=0&&(p=c?v.move:v.line),E.command=p,E.x=N,E.y=P,E.controls.left.clear(),E.controls.right.clear(),E.command===v.curve&&(H=a*D/Math.PI,E.controls.left.x=H*Math.cos(j+M),E.controls.left.y=H*Math.sin(j+M),E.controls.right.x=H*Math.cos(j-M),E.controls.right.y=H*Math.sin(j-M),R===1&&E.controls.left.multiplyScalar(2),R===C&&E.controls.right.multiplyScalar(2)),A++;_[A].copy(_[0]),_[A].command=v.line}else c||(_[A].command=v.line,_[A].x=0,_[A].y=0,A++,_[A].copy(_[0]),_[A].command=v.line)}return super._update.call(this),this}flagReset(){return super.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}clone(e){const r=this.innerRadius,a=this.outerRadius,h=this.startAngle,c=this.endAngle,d=this.vertices.length,_=new Ki(0,0,r,a,h,c,d);_.translation.copy(this.translation),_.rotation=this.rotation,_.scale=this.scale,_.skewX=this.skewX,_.skewY=this.skewY,this.matrix.manual&&_.matrix.copy(this.matrix);for(let x=0;x<kt.Properties.length;x++){const p=kt.Properties[x];_[p]=this[p]}return e&&e.add(_),_}toObject(){const e=super.toObject.call(this);for(let r=0;r<Ki.Properties.length;r++){const a=Ki.Properties[r];e[a]=this[a]}return e}},zs=Ki;k(zs,"Properties",["startAngle","endAngle","innerRadius","outerRadius"]);var Qr={startAngle:{enumerable:!0,get:function(){return this._startAngle},set:function(s){this._startAngle=s,this._flagStartAngle=!0}},endAngle:{enumerable:!0,get:function(){return this._endAngle},set:function(s){this._endAngle=s,this._flagEndAngle=!0}},innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(s){this._innerRadius=s,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(s){this._outerRadius=s,this._flagOuterRadius=!0}}},il=Math.ceil,sl=Math.floor,_i=class extends je{constructor(e){super();w(this,"_flagVertices",!0);w(this,"_flagLength",!0);w(this,"_flagFill",!0);w(this,"_flagStroke",!0);w(this,"_flagLinewidth",!0);w(this,"_flagOpacity",!0);w(this,"_flagVisible",!0);w(this,"_flagSize",!0);w(this,"_flagSizeAttenuation",!0);w(this,"_length",0);w(this,"_fill","#fff");w(this,"_stroke","#000");w(this,"_linewidth",1);w(this,"_opacity",1);w(this,"_visible",!0);w(this,"_size",1);w(this,"_sizeAttenuation",!1);w(this,"_beginning",0);w(this,"_ending",1);w(this,"_dashes",null);w(this,"noFill",kt.prototype.noFill);w(this,"noStroke",kt.prototype.noStroke);w(this,"corner",kt.prototype.corner);w(this,"center",kt.prototype.center);w(this,"getBoundingClientRect",kt.prototype.getBoundingClientRect);w(this,"_updateLength",kt.prototype._updateLength);for(let r in tn)Object.defineProperty(this,r,tn[r]);this._renderer.type="points",this._renderer.flagVertices=Or.bind(this),this._renderer.bindVertices=Lr.bind(this),this._renderer.unbindVertices=Pr.bind(this),this._renderer.flagFill=Ir.bind(this),this._renderer.flagStroke=Br.bind(this),this._renderer.vertices=null,this._renderer.collection=null,this.sizeAttenuation=!1,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.className="",this.visible=!0,this.vertices=e,this.dashes=[],this.dashes.offset=0}clone(e){const r=new _i;for(let a=0;a<this.vertices.length;a++)r.vertices.push(this.vertices[a].clone());for(let a=0;a<_i.Properties.length;a++){const h=_i.Properties[a];r[h]=this[h]}return r.className=this.className,r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,this.matrix.manual&&r.matrix.copy(this.matrix),e&&e.add(r),r._update()}toObject(){const e={vertices:this.vertices.map(function(r){return r.toObject()})};return rt.each(_i.Properties,function(r){e[r]=this[r]},this),e.className=this.className,e.translation=this.translation.toObject(),e.rotation=this.rotation,e.scale=this.scale instanceof V?this.scale.toObject():this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&(e.matrix=this.matrix.toObject()),e}subdivide(e){this._update();let r=[];for(let a=0;a<this.vertices.length;a++){const h=this.vertices[a],c=this.vertices[a-1];if(!c)continue;const d=h.x,_=h.y,x=c.x,p=c.y,A=Le(d,_,d,_,x,p,x,p,e);r=r.concat(A)}return this.vertices=r,this}_update(){if(this._flagVertices){this._flagLength&&this._updateLength(void 0,!0);const e=Math.min(this._beginning,this._ending),r=Math.max(this._beginning,this._ending),a=ji(this,e*this._length),h=ji(this,r*this._length),c=il(a),d=sl(h);let _=0,x;this._renderer.vertices=[],this._renderer.collection=[];for(let p=0;p<this._collection.length;p++)p>=c&&p<=d&&(x=this._collection[p],this._renderer.collection.push(x),this._renderer.vertices[_*2+0]=x.x,this._renderer.vertices[_*2+1]=x.y,_++)}return super._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagSize=this._flagSizeAttenuation=!1,super.flagReset.call(this),this}},Vs=_i;k(Vs,"Properties",["fill","stroke","linewidth","opacity","visible","size","sizeAttenuation","beginning","ending"]);var tn={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(s){this._linewidth=s,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(s){this._opacity=s,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(s){this._visible=s,this._flagVisible=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(s){this._size=s,this._flagSize=!0}},sizeAttenuation:{enumerable:!0,get:function(){return this._sizeAttenuation},set:function(s){this._sizeAttenuation=s,this._flagSizeAttenuation=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(s){(this._fill instanceof Ht||this._fill instanceof Pt||this._fill instanceof It||this._fill instanceof Tt)&&this._fill.unbind(F.Types.change,this._renderer.flagFill),this._fill=s,this._flagFill=!0,(this._fill instanceof Ht||this._fill instanceof Pt||this._fill instanceof It||this._fill instanceof Tt)&&this._fill.bind(F.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(s){(this._stroke instanceof Ht||this._stroke instanceof Pt||this._stroke instanceof It||this._stroke instanceof Tt)&&this._stroke.unbind(F.Types.change,this._renderer.flagStroke),this._stroke=s,this._flagStroke=!0,(this._stroke instanceof Ht||this._stroke instanceof Pt||this._stroke instanceof It||this._stroke instanceof Tt)&&this._stroke.bind(F.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(s){this._beginning=s,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(s){this._ending=s,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(s){const e=this._renderer.bindVertices,r=this._renderer.unbindVertices;this._collection&&this._collection.unbind(F.Types.insert,e).unbind(F.Types.remove,r),s instanceof ze?this._collection=s:this._collection=new ze(s||[]),this._collection.bind(F.Types.insert,e).bind(F.Types.remove,r),e(this._collection)}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(s){typeof s.offset!="number"&&(s.offset=this.dashes&&this._dashes.offset||0),this._dashes=s}}},rl=Math.cos,nl=Math.sin,Ji=class extends kt{constructor(e,r,a,h){h=Math.max(h||0,3);super();w(this,"_flagWidth",!1);w(this,"_flagHeight",!1);w(this,"_flagSides",!1);w(this,"_radius",0);w(this,"_width",0);w(this,"_height",0);w(this,"_sides",0);for(let c in en)Object.defineProperty(this,c,en[c]);this.closed=!0,this.automatic=!1,typeof a=="number"&&(this.radius=a),typeof h=="number"&&(this.sides=h),this._update(),typeof e=="number"&&(this.translation.x=e),typeof r=="number"&&(this.translation.y=r)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagSides){const e=this._sides,r=e+1;let a=this.vertices.length;a>e&&(this.vertices.splice(e-1,a-e),a=e);for(let h=0;h<r;h++){const c=(h+.5)/e,d=I*c+Math.PI/2,_=this._width*rl(d)/2,x=this._height*nl(d)/2;h>=a?this.vertices.push(new tt(_,x)):this.vertices[h].set(_,x),this.vertices[h].command=h===0?v.move:v.line}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagSides=!1,super.flagReset.call(this),this}clone(e){const r=new Ji(0,0,0,this.sides);r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,r.skewX=this.skewX,r.skewY=this.skewY,r.width=this.width,r.height=this.height,this.matrix.manual&&r.matrix.copy(this.matrix);for(let a=0;a<kt.Properties.length;a++){const h=kt.Properties[a];r[h]=this[h]}return e&&e.add(r),r}toObject(){const e=super.toObject.call(this);for(let r=0;r<Ji.Properties.length;r++){const a=Ji.Properties[r];e[a]=this[a]}return e}},Ds=Ji;k(Ds,"Properties",["width","height","sides"]);var en={radius:{enumerable:!0,get:function(){return this._radius},set:function(s){this._radius=s,this.width=s*2,this.height=s*2}},width:{enumerable:!0,get:function(){return this._width},set:function(s){this._width=s,this._flagWidth=!0,this._radius=Math.max(this.width,this.height)/2}},height:{enumerable:!0,get:function(){return this._height},set:function(s){this._height=s,this._flagHeight=!0,this._radius=Math.max(this.width,this.height)/2}},sides:{enumerable:!0,get:function(){return this._sides},set:function(s){this._sides=s,this._flagSides=!0}}},al=Math.cos,ll=Math.sin,Zi=class extends kt{constructor(e,r,a,h,c){arguments.length<=3&&(h=a,a=h/2),(typeof c!="number"||c<=0)&&(c=5);super();w(this,"_flagInnerRadius",!1);w(this,"_flagOuterRadius",!1);w(this,"_flagSides",!1);w(this,"_innerRadius",0);w(this,"_outerRadius",0);w(this,"_sides",0);for(let d in sn)Object.defineProperty(this,d,sn[d]);this.closed=!0,this.automatic=!1,typeof a=="number"&&(this.innerRadius=a),typeof h=="number"&&(this.outerRadius=h),typeof c=="number"&&(this.sides=c),this._update(),typeof e=="number"&&(this.translation.x=e),typeof r=="number"&&(this.translation.y=r)}_update(){if(this._flagVertices||this._flagInnerRadius||this._flagOuterRadius||this._flagSides){const e=this._sides*2,r=e+1;let a=this.vertices.length;a>e&&(this.vertices.splice(e-1,a-e),a=e);for(let h=0;h<r;h++){const c=(h+.5)/e,d=I*c,_=(h%2?this._outerRadius:this._innerRadius)/2,x=_*al(d),p=_*ll(d);h>=a?this.vertices.push(new tt(x,p)):this.vertices[h].set(x,p),this.vertices[h].command=h===0?v.move:v.line}}return super._update.call(this),this}flagReset(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,super.flagReset.call(this),this}clone(e){const r=this.innerRadius,a=this.outerRadius,h=this.sides,c=new Zi(0,0,r,a,h);c.translation.copy(this.translation),c.rotation=this.rotation,c.scale=this.scale,c.skewX=this.skewX,c.skewY=this.skewY,this.matrix.manual&&c.matrix.copy(this.matrix);for(let d=0;d<kt.Properties.length;d++){const _=kt.Properties[d];c[_]=this[_]}return e&&e.add(c),c}toObject(){const e=super.toObject.call(this);for(let r=0;r<Zi.Properties.length;r++){const a=Zi.Properties[r];e[a]=this[a]}return e}},Us=Zi;k(Us,"Properties",["innerRadius","outerRadius","sides"]);var sn={innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(s){this._innerRadius=s,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(s){this._outerRadius=s,this._flagOuterRadius=!0}},sides:{enumerable:!0,get:function(){return this._sides},set:function(s){this._sides=s,this._flagSides=!0}}},ht={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},baselines:{top:"hanging",middle:"middle",bottom:"ideographic",baseline:"alphabetic"},createElement:function(s,e){const r=s,a=document.createElementNS(ht.ns,r);return r==="svg"&&(e=rt.defaults(e||{},{version:ht.version})),e&&Object.keys(e).length>0&&ht.setAttributes(a,e),a},setAttributes:function(s,e){const r=Object.keys(e);for(let a=0;a<r.length;a++)/href/.test(r[a])?s.setAttributeNS(ht.xlink,r[a],e[r[a]]):s.setAttribute(r[a],e[r[a]]);return this},removeAttributes:function(s,e){for(let r in e)s.removeAttribute(r);return this},toString:function(s,e){let r=s.length,a=r-1,h,c="";for(let d=0;d<r;d++){const _=s[d],x=e?et(d-1,r):Math.max(d-1,0),p=s[x];let A,R,C,O,E,j,D,N,P,H,$,q,J,at,gt,ut=st(_.x),ot=st(_.y);switch(_.command){case v.close:A=v.close;break;case v.arc:$=_.rx,q=_.ry,J=_.xAxisRotation,at=_.largeArcFlag,gt=_.sweepFlag,A=v.arc+" "+$+" "+q+" "+J+" "+at+" "+gt+" "+ut+" "+ot;break;case v.curve:D=p.controls&&p.controls.right||V.zero,N=_.controls&&_.controls.left||V.zero,p.relative?(C=st(D.x+p.x),O=st(D.y+p.y)):(C=st(D.x),O=st(D.y)),_.relative?(E=st(N.x+_.x),j=st(N.y+_.y)):(E=st(N.x),j=st(N.y)),A=(d===0?v.move:v.curve)+" "+C+" "+O+" "+E+" "+j+" "+ut+" "+ot;break;case v.move:h=_,A=v.move+" "+ut+" "+ot;break;default:A=_.command+" "+ut+" "+ot}d>=a&&e&&(_.command===v.curve&&(R=h,P=_.controls&&_.controls.right||_,H=R.controls&&R.controls.left||R,_.relative?(C=st(P.x+_.x),O=st(P.y+_.y)):(C=st(P.x),O=st(P.y)),R.relative?(E=st(H.x+R.x),j=st(H.y+R.y)):(E=st(H.x),j=st(H.y)),ut=st(R.x),ot=st(R.y),A+=" C "+C+" "+O+" "+E+" "+j+" "+ut+" "+ot),_.command!==v.close&&(A+=" Z")),c+=A+" "}return c},pointsToString:function(s,e){let r="";const a=e*.5;for(let h=0;h<s.length;h++){const c=s[h].x,d=s[h].y-a;r+=v.move+" "+c+" "+d+" ",r+="a "+a+" "+a+" 0 1 0 0.001 0 Z"}return r},getClip:function(s,e){let r=s._renderer.clip;return r||(r=s._renderer.clip=ht.createElement("clipPath",{"clip-rule":"nonzero"})),r.parentNode===null&&e.defs.appendChild(r),r},defs:{update:function(s){const{defs:e}=s;if(e._flagUpdate){const r=Array.prototype.slice.call(e.children,0);for(let a=0;a<r.length;a++){const h=r[a],c=h.id,d=`[fill="url(#${c})"],[stroke="url(#${c})"],[clip-path="url(#${c})"]`;s.querySelector(d)||e.removeChild(h)}e._flagUpdate=!1}}},group:{appendChild:function(s){const e=s._renderer.elem;if(!e)return;const r=e.nodeName;!r||/(radial|linear)gradient/i.test(r)||s._clip||this.elem.appendChild(e)},removeChild:function(s){const e=s._renderer.elem;!e||e.parentNode!=this.elem||!e.nodeName||s._clip||this.elem.removeChild(e)},orderChild:function(s){this.elem.appendChild(s._renderer.elem)},renderChild:function(s){ht[s._renderer.type].render.call(s,this)},render:function(s){if(!this._visible&&!this._flagVisible||this._opacity===0&&!this._flagOpacity)return this;this._update(),this._renderer.elem||(this._renderer.elem=ht.createElement("g",{id:this.id}),s.appendChild(this._renderer.elem));const e=this._matrix.manual||this._flagMatrix,r={domElement:s,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(let a=0;a<this.children.length;a++){const h=this.children[a];ht[h._renderer.type].render.call(h,s)}return this._flagId&&this._renderer.elem.setAttribute("id",this._id),this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagVisible&&this._renderer.elem.setAttribute("display",this._visible?"inline":"none"),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(ht.group.appendChild,r),this._flagSubtractions&&this.subtractions.forEach(ht.group.removeChild,r),this._flagOrder&&this.children.forEach(ht.group.orderChild,r),this._flagMask&&(this._mask?(ht[this._mask._renderer.type].render.call(this._mask,s),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.dataset&&Object.assign(this._renderer.elem.dataset,this.dataset),this.flagReset()}},path:{render:function(s){if(this._opacity===0&&!this._flagOpacity)return this;this._update();const e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(e.id=this._id),this._flagVertices){const a=ht.toString(this._renderer.vertices,this._closed);e.d=a}if(this._fill&&this._fill._renderer&&(this._renderer.hasFillEffect=!0,this._fill._update(),ht[this._fill._renderer.type].render.call(this._fill,s,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&typeof this._fill.id>"u"&&(s.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer&&(this._renderer.hasStrokeEffect=!0,this._stroke._update(),ht[this._stroke._renderer.type].render.call(this._stroke,s,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&typeof this._stroke.id>"u"&&(s.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?ht.setAttributes(this._renderer.elem,e):(e.id=this._id,this._renderer.elem=ht.createElement("path",e),s.appendChild(this._renderer.elem)),this._flagClip){const a=ht.getClip(this,s),h=this._renderer.elem;this._clip?(h.removeAttribute("id"),a.setAttribute("id",this.id),a.appendChild(h)):(a.removeAttribute("id"),h.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(h))}return this._flagMask&&(this._mask?(ht[this._mask._renderer.type].render.call(this._mask,s),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},points:{render:function(s){if(this._opacity===0&&!this._flagOpacity)return this;this._update();const e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(e.id=this._id),this._flagVertices||this._flagSize||this._flagSizeAttenuation){let a=this._size;if(!this._sizeAttenuation){const c=this.worldMatrix.elements,d=X(c[0],c[3],c[1],c[4],c[2],c[5]);a/=Math.max(d.scaleX,d.scaleY)}const h=ht.pointsToString(this._renderer.collection,a);e.d=h}return this._fill&&this._fill._renderer&&(this._renderer.hasFillEffect=!0,this._fill._update(),ht[this._fill._renderer.type].render.call(this._fill,s,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&typeof this._fill.id>"u"&&(s.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer&&(this._renderer.hasStrokeEffect=!0,this._stroke._update(),ht[this._stroke._renderer.type].render.call(this._stroke,s,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&typeof this._stroke.id>"u"&&(s.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?ht.setAttributes(this._renderer.elem,e):(e.id=this._id,this._renderer.elem=ht.createElement("path",e),s.appendChild(this._renderer.elem)),this.flagReset()}},text:{render:function(s){this._update();const e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(e.id=this._id),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=ht.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["dominant-baseline"]=ht.baselines[this._baseline]||this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._flagDirection&&(e.direction=this._direction),this._fill&&this._fill._renderer&&(this._renderer.hasFillEffect=!0,this._fill._update(),ht[this._fill._renderer.type].render.call(this._fill,s,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&typeof this._fill.id>"u"&&(s.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer&&(this._renderer.hasStrokeEffect=!0,this._stroke._update(),ht[this._stroke._renderer.type].render.call(this._stroke,s,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&typeof this._stroke.id>"u"&&(s.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?ht.setAttributes(this._renderer.elem,e):(e.id=this._id,this._renderer.elem=ht.createElement("text",e),s.appendChild(this._renderer.elem)),this._flagClip){const a=ht.getClip(this,s),h=this._renderer.elem;this._clip?(h.removeAttribute("id"),a.setAttribute("id",this.id),a.appendChild(h)):(a.removeAttribute("id"),h.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(h))}return this._flagMask&&(this._mask?(ht[this._mask._renderer.type].render.call(this._mask,s),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(s,e){e||this._update();const r={};if(this._flagId&&(r.id=this._id),this._flagEndPoints&&(r.x1=this.left._x,r.y1=this.left._y,r.x2=this.right._x,r.y2=this.right._y),this._flagSpread&&(r.spreadMethod=this._spread),this._flagUnits&&(r.gradientUnits=this._units),this._renderer.elem?ht.setAttributes(this._renderer.elem,r):(r.id=this._id,this._renderer.elem=ht.createElement("linearGradient",r)),this._renderer.elem.parentNode===null&&s.defs.appendChild(this._renderer.elem),this._flagStops){const a=this._renderer.elem.childNodes.length!==this.stops.length;if(a)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let h=0;h<this.stops.length;h++){const c=this.stops[h],d={};c._flagOffset&&(d.offset=100*c._offset+"%"),c._flagColor&&(d["stop-color"]=c._color),c._flagOpacity&&(d["stop-opacity"]=c._opacity),c._renderer.elem?ht.setAttributes(c._renderer.elem,d):c._renderer.elem=ht.createElement("stop",d),a&&this._renderer.elem.appendChild(c._renderer.elem),c.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(s,e){e||this._update();const r={};if(this._flagId&&(r.id=this._id),this._flagCenter&&(r.cx=this.center._x,r.cy=this.center._y),this._flagFocal&&(r.fx=this.focal._x,r.fy=this.focal._y),this._flagRadius&&(r.r=this._radius),this._flagSpread&&(r.spreadMethod=this._spread),this._flagUnits&&(r.gradientUnits=this._units),this._renderer.elem?ht.setAttributes(this._renderer.elem,r):(r.id=this._id,this._renderer.elem=ht.createElement("radialGradient",r)),this._renderer.elem.parentNode===null&&s.defs.appendChild(this._renderer.elem),this._flagStops){const a=this._renderer.elem.childNodes.length!==this.stops.length;if(a)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let h=0;h<this.stops.length;h++){const c=this.stops[h],d={};c._flagOffset&&(d.offset=100*c._offset+"%"),c._flagColor&&(d["stop-color"]=c._color),c._flagOpacity&&(d["stop-opacity"]=c._opacity),c._renderer.elem?ht.setAttributes(c._renderer.elem,d):c._renderer.elem=ht.createElement("stop",d),a&&this._renderer.elem.appendChild(c._renderer.elem),c.flagReset()}}return this.flagReset()}},texture:{render:function(s,e){e||this._update();const r={},a={x:0,y:0},h=this.image;if(this._flagId&&(r.id=this._id),this._flagLoaded&&this.loaded)switch(h.nodeName.toLowerCase()){case"canvas":a.href=a["xlink:href"]=h.toDataURL("image/png");break;case"img":case"image":a.href=a["xlink:href"]=this.src;break}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(r.x=this._offset.x,r.y=this._offset.y,h&&(r.x-=h.width/2,r.y-=h.height/2,this._scale instanceof V?(r.x*=this._scale.x,r.y*=this._scale.y):(r.x*=this._scale,r.y*=this._scale)),r.x>0&&(r.x*=-1),r.y>0&&(r.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(r.width=0,r.height=0,h)){switch(r.width=h.width,r.height=h.height,this._repeat){case"no-repeat":r.width+=1,r.height+=1;break}this._scale instanceof V?(r.width*=this._scale.x,r.height*=this._scale.y):(r.width*=this._scale,r.height*=this._scale),a.width=r.width,a.height=r.height}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?ht.setAttributes(this._renderer.image,a):this._renderer.image=ht.createElement("image",a)),this._renderer.elem?Object.keys(r).length!==0&&ht.setAttributes(this._renderer.elem,r):(r.id=this._id,r.patternUnits="userSpaceOnUse",this._renderer.elem=ht.createElement("pattern",r)),this._renderer.elem.parentNode===null&&s.defs.appendChild(this._renderer.elem),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},rn=class extends F{constructor(s){super(),this.domElement=s.domElement||ht.createElement("svg"),this.scene=new Yt,this.scene.parent=this,this.defs=ht.createElement("defs"),this.defs._flagUpdate=!1,this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"}setSize(s,e){return this.width=s,this.height=e,ht.setAttributes(this.domElement,{width:s,height:e}),this.trigger(F.Types.resize,s,e)}render(){return ht.group.render.call(this.scene,this.domElement),ht.defs.update(this.domElement),this}};k(rn,"Utils",ht);var ye={create:function(s,e,r){const a=s.createShader(s[r]);if(s.shaderSource(a,e),s.compileShader(a),!s.getShaderParameter(a,s.COMPILE_STATUS)){const c=s.getShaderInfoLog(a);throw s.deleteShader(a),new le("unable to compile shader "+a+": "+c)}return a},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},path:{vertex:`
      precision mediump float;
      attribute vec2 a_position;

      uniform mat3 u_matrix;
      uniform vec2 u_resolution;
      uniform vec4 u_rect;

      varying vec2 v_textureCoords;

      void main() {
        vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;
        vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;
        vec2 normal = projected / u_resolution;
        vec2 clipspace = (normal * 2.0) - 1.0;

        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);
        v_textureCoords = a_position;
      }
    `,fragment:`
      precision mediump float;

      uniform sampler2D u_image;
      varying vec2 v_textureCoords;

      void main() {
        vec4 texel = texture2D(u_image, v_textureCoords);
        if (texel.a == 0.0) {
          discard;
        }
        gl_FragColor = texel;
      }
    `},points:{vertex:`
      precision mediump float;
      attribute vec2 a_position;

      uniform float u_size;
      uniform mat3 u_matrix;
      uniform vec2 u_resolution;

      varying vec2 v_textureCoords;

      void main() {
        vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;
        vec2 normal = projected / u_resolution;
        vec2 clipspace = (normal * 2.0) - 1.0;

        gl_PointSize = u_size;
        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);
        v_textureCoords = a_position;
      }
    `,fragment:`
      precision mediump float;

      uniform sampler2D u_image;

      void main() {
        vec4 texel = texture2D(u_image, gl_PointCoord);
        if (texel.a == 0.0) {
          discard;
        }
        gl_FragColor = texel;
      }
    `}},Qi=$e.Multiply,ol=[1,0,0,0,1,0,0,0,1],Ue=new it(9),hl=ei.Utils,nn=new V,Ws=new it([0,0,1,0,0,1,0,1,1,0,1,1]),dt={precision:.9,isHidden:/(undefined|none|transparent)/i,canvas:B.document?B.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new $e,group:{removeChild:function(s,e){if(s.children)for(let r=0;r<s.children.length;r++)dt.group.removeChild(s.children[r],e);s._renderer.texture&&(e.deleteTexture(s._renderer.texture),delete s._renderer.texture),s._renderer.positionBuffer&&(e.deleteBuffer(s._renderer.positionBuffer),delete s._renderer.positionBuffer)},render:function(s,e){if(!this._visible)return;this._update();const r=this.parent,a=r._matrix&&r._matrix.manual||r._flagMatrix,h=this._matrix.manual||this._flagMatrix;(a||h)&&(this._renderer.matrix||(this._renderer.matrix=new it(9)),this._matrix.toTransformArray(!0,Ue),Qi(Ue,r._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof V||(this._renderer.scale=new V),this._scale instanceof V?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(r._renderer.type)||(this._renderer.scale.x*=r._renderer.scale.x,this._renderer.scale.y*=r._renderer.scale.y),a&&(this._flagMatrix=!0)),this._mask&&(s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST),s.stencilFunc(s.ALWAYS,1,0),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.colorMask(!1,!1,!1,!1),dt[this._mask._renderer.type].render.call(this._mask,s,e,this),s.stencilFunc(s.EQUAL,1,255),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.colorMask(!0,!0,!0,!0)),this._flagOpacity=r._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(r&&r._renderer?r._renderer.opacity:1);let c;if(this._flagSubtractions)for(c=0;c<this.subtractions.length;c++)dt.group.removeChild(this.subtractions[c],s);for(c=0;c<this.children.length;c++){const d=this.children[c];dt[d._renderer.type].render.call(d,s,e)}return this._mask&&s.disable(s.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(s,e){let r,a,h,c,d,_,x,p,A,R,C,O,E,j;const D=e._renderer.vertices,N=this.canvas,P=this.ctx,H=s.renderer.ratio,$=nn.copy(e._renderer.scale).multiply(H),q=e._stroke,J=e._linewidth,at=e._fill,gt=e._renderer.opacity||e._opacity,ut=e._cap,ot=e._join,vt=e._miter,bt=e._closed,Mt=e.dashes,At=D.length,qt=At-1;N.width=Math.max(Math.ceil(e._renderer.rect.width*$.x),1),N.height=Math.max(Math.ceil(e._renderer.rect.height*$.y),1);const se=e._renderer.rect.centroid,Xt=se.x,oe=se.y;P.clearRect(0,0,N.width,N.height),at&&(typeof at=="string"?P.fillStyle=at:(dt[at._renderer.type].render.call(at,P,e),P.fillStyle=at._renderer.effect)),q&&(typeof q=="string"?P.strokeStyle=q:(dt[q._renderer.type].render.call(q,P,e),P.strokeStyle=q._renderer.effect),J&&(P.lineWidth=J),vt&&(P.miterLimit=vt),ot&&(P.lineJoin=ot),!bt&&ut&&(P.lineCap=ut)),typeof gt=="number"&&(P.globalAlpha=gt),Mt&&Mt.length>0&&(P.lineDashOffset=Mt.offset||0,P.setLineDash(Mt));let te,Pe,We,mi,yi,bi,xi,vi;P.save(),P.scale($.x,$.y),P.translate(Xt,oe),P.beginPath();for(let Se=0;Se<D.length;Se++){const Ot=D[Se];switch(O=Ot.x,E=Ot.y,Ot.command){case v.close:P.closePath();break;case v.arc:Pe=Ot.rx,We=Ot.ry,mi=Ot.xAxisRotation,yi=Ot.largeArcFlag,bi=Ot.sweepFlag,r=bt?et(Se-1,At):Math.max(Se-1,0),a=D[r],xi=a.x,vi=a.y,hl.renderSvgArcCommand(P,xi,vi,Pe,We,yi,bi,mi,O,E);break;case v.curve:r=bt?et(Se-1,At):Math.max(Se-1,0),a=D[r],p=a.controls&&a.controls.right||V.zero,A=Ot.controls&&Ot.controls.left||V.zero,a._relative?(_=p.x+a.x,x=p.y+a.y):(_=p.x,x=p.y),Ot._relative?(c=A.x+Ot.x,d=A.y+Ot.y):(c=A.x,d=A.y),P.bezierCurveTo(_,x,c,d,O,E),Se>=qt&&bt&&(h=te,R=Ot.controls&&Ot.controls.right||V.zero,C=h.controls&&h.controls.left||V.zero,Ot._relative?(_=R.x+Ot.x,x=R.y+Ot.y):(_=R.x,x=R.y),h._relative?(c=C.x+h.x,d=C.y+h.y):(c=C.x,d=C.y),O=h.x,E=h.y,P.bezierCurveTo(_,x,c,d,O,E));break;case v.line:P.lineTo(O,E);break;case v.move:te=Ot,P.moveTo(O,E);break}}bt&&P.closePath(),dt.isHidden.test(at)||(j=at._renderer&&at._renderer.offset,j&&(P.save(),P.translate(-at._renderer.offset.x,-at._renderer.offset.y),P.scale(at._renderer.scale.x,at._renderer.scale.y)),P.fill(),j&&P.restore()),dt.isHidden.test(q)||(j=q._renderer&&q._renderer.offset,j&&(P.save(),P.translate(-q._renderer.offset.x,-q._renderer.offset.y),P.scale(q._renderer.scale.x,q._renderer.scale.y),P.lineWidth=J/q._renderer.scale.x),P.stroke(),j&&P.restore()),P.restore()},getBoundingClientRect:function(s,e,r){let a=1/0,h=-1/0,c=1/0,d=-1/0,_,x;s.forEach(function(p){const A=p.x,R=p.y,C=p.controls;let O,E,j,D,N,P;c=Math.min(R,c),a=Math.min(A,a),h=Math.max(A,h),d=Math.max(R,d),p.controls&&(N=C.left,P=C.right,!(!N||!P)&&(O=p._relative?N.x+A:N.x,E=p._relative?N.y+R:N.y,j=p._relative?P.x+A:P.x,D=p._relative?P.y+R:P.y,!(!O||!E||!j||!D)&&(c=Math.min(E,D,c),a=Math.min(O,j,a),h=Math.max(O,j,h),d=Math.max(E,D,d))))}),typeof e=="number"&&(c-=e,a-=e,h+=e,d+=e),_=h-a,x=d-c,r.top=c,r.left=a,r.right=h,r.bottom=d,r.width=_,r.height=x,r.centroid||(r.centroid={}),r.centroid.x=-a,r.centroid.y=-c},render:function(s,e,r){if(!this._visible||!this._opacity)return this;this._update();const a=r||this.parent,h=e[this._renderer.type],c=a._matrix.manual||a._flagMatrix,d=this._matrix.manual||this._flagMatrix,_=this._renderer.parent!==a,x=this._flagVertices||this._flagFill||this._fill instanceof Pt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof It&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Tt&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Pt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof It&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Tt&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||a._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((c||d||_)&&(this._renderer.matrix||(this._renderer.matrix=new it(9)),this._matrix.toTransformArray(!0,Ue),Qi(Ue,a._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof V||(this._renderer.scale=new V),this._scale instanceof V?(this._renderer.scale.x=this._scale.x*a._renderer.scale.x,this._renderer.scale.y=this._scale.y*a._renderer.scale.y):(this._renderer.scale.x=this._scale*a._renderer.scale.x,this._renderer.scale.y=this._scale*a._renderer.scale.y),_&&(this._renderer.parent=a)),this._mask&&(s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST),s.stencilFunc(s.ALWAYS,1,0),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.colorMask(!1,!1,!1,!1),dt[this._mask._renderer.type].render.call(this._mask,s,e,this),s.stencilFunc(s.EQUAL,1,255),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.colorMask(!0,!0,!0,!0)),x?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*a._renderer.opacity,dt.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),dt.updateTexture.call(dt,s,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!r||!this._renderer.texture)return this;e.current!==h&&(s.useProgram(h),s.bindBuffer(s.ARRAY_BUFFER,e.buffers.position),s.vertexAttribPointer(h.position,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(h.position),s.bufferData(s.ARRAY_BUFFER,Ws,s.STATIC_DRAW),e.resolution.flagged||s.uniform2f(s.getUniformLocation(h,"u_resolution"),e.resolution.width,e.resolution.height),e.current=h),e.resolution.flagged&&s.uniform2f(s.getUniformLocation(h,"u_resolution"),e.resolution.width,e.resolution.height),s.bindTexture(s.TEXTURE_2D,this._renderer.texture);const p=this._renderer.rect;return s.uniformMatrix3fv(h.matrix,!1,this._renderer.matrix),s.uniform4f(h.rect,p.left,p.top,p.right,p.bottom),s.drawArrays(s.TRIANGLES,0,6),this._mask&&s.disable(s.STENCIL_TEST),this.flagReset()}},points:{updateCanvas:function(s,e){let r;const a=this.canvas,h=this.ctx,c=s.renderer.ratio,d=e._stroke,_=e._linewidth,x=e._fill,p=e._renderer.opacity||e._opacity,A=e.dashes,R=e._size*c;let C=R;dt.isHidden.test(d)||(C+=_),a.width=ft(C),a.height=a.width;const O=C/a.width,E=a.width/2,j=a.height/2;h.clearRect(0,0,a.width,a.height),x&&(typeof x=="string"?h.fillStyle=x:(dt[x._renderer.type].render.call(x,h,e),h.fillStyle=x._renderer.effect)),d&&(typeof d=="string"?h.strokeStyle=d:(dt[d._renderer.type].render.call(d,h,e),h.strokeStyle=d._renderer.effect),_&&(h.lineWidth=_/O)),typeof p=="number"&&(h.globalAlpha=p),A&&A.length>0&&(h.lineDashOffset=A.offset||0,h.setLineDash(A)),h.save(),h.translate(E,j),h.scale(dt.precision,dt.precision),h.beginPath(),h.arc(0,0,R/O*.5,0,I),h.restore(),closed&&h.closePath(),dt.isHidden.test(x)||(r=x._renderer&&x._renderer.offset,r&&(h.save(),h.translate(-x._renderer.offset.x,-x._renderer.offset.y),h.scale(x._renderer.scale.x,x._renderer.scale.y)),h.fill(),r&&h.restore()),dt.isHidden.test(d)||(r=d._renderer&&d._renderer.offset,r&&(h.save(),h.translate(-d._renderer.offset.x,-d._renderer.offset.y),h.scale(d._renderer.scale.x,d._renderer.scale.y),h.lineWidth=_/d._renderer.scale.x),h.stroke(),r&&h.restore())},render:function(s,e,r){if(!this._visible||!this._opacity)return this;this._update();let a=this._size;const h=r||this.parent,c=e[this._renderer.type],d=this._sizeAttenuation,_=this._stroke,x=this._linewidth,p=h._matrix.manual||h._flagMatrix,A=this._matrix.manual||this._flagMatrix,R=this._renderer.parent!==h,C=this._renderer.vertices,O=this._renderer.collection.length,E=this._flagVertices,j=this._flagFill||this._fill instanceof Pt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof It&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Tt&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Pt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof It&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Tt&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||h._flagOpacity||this._flagVisible||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((p||A||R)&&(this._renderer.matrix||(this._renderer.matrix=new it(9)),this._matrix.toTransformArray(!0,Ue),Qi(Ue,h._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof V||(this._renderer.scale=new V),this._scale instanceof V?(this._renderer.scale.x=this._scale.x*h._renderer.scale.x,this._renderer.scale.y=this._scale.y*h._renderer.scale.y):(this._renderer.scale.x=this._scale*h._renderer.scale.x,this._renderer.scale.y=this._scale*h._renderer.scale.y),R&&(this._renderer.parent=h)),E){const D=this._renderer.positionBuffer;D&&s.deleteBuffer(D),this._renderer.positionBuffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this._renderer.positionBuffer),s.vertexAttribPointer(c.position,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(c.position),s.bufferData(s.ARRAY_BUFFER,C,s.STATIC_DRAW)}return j?(this._renderer.opacity=this._opacity*h._renderer.opacity,dt.updateTexture.call(dt,s,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!r||!this._renderer.texture?this:(dt.isHidden.test(_)||(a+=x),a/=dt.precision,d&&(a*=Math.max(this._renderer.scale.x,this._renderer.scale.y)),e.current!==c&&(s.useProgram(c),e.resolution.flagged||s.uniform2f(s.getUniformLocation(c,"u_resolution"),e.resolution.width,e.resolution.height),e.current=c),e.resolution.flagged&&s.uniform2f(s.getUniformLocation(c,"u_resolution"),e.resolution.width,e.resolution.height),s.bindTexture(s.TEXTURE_2D,this._renderer.texture),s.uniformMatrix3fv(c.matrix,!1,this._renderer.matrix),s.uniform1f(c.size,a*e.resolution.ratio),s.drawArrays(s.POINTS,0,O),this.flagReset())}},text:{updateCanvas:function(s,e){const r=this.canvas,a=this.ctx,h=s.renderer.ratio,c=nn.copy(e._renderer.scale).multiply(h),d=e._stroke,_=e._linewidth,x=e._fill,p=e._renderer.opacity||e._opacity,A=e.dashes,R=e._decoration,C=e._direction;r.width=Math.max(Math.ceil(e._renderer.rect.width*c.x),1),r.height=Math.max(Math.ceil(e._renderer.rect.height*c.y),1);const O=e._renderer.rect.centroid,E=O.x,j=O.y;let D,N,P,H,$,q,J,at,gt,ut,ot;const vt=x._renderer&&x._renderer.offset&&d._renderer&&d._renderer.offset;if(a.clearRect(0,0,r.width,r.height),vt||(a.font=[e._style,e._weight,e._size+"px/"+e._leading+"px",e._family].join(" ")),a.textAlign="center",a.textBaseline="middle",a.textDirection=C,x&&(typeof x=="string"?a.fillStyle=x:(dt[x._renderer.type].render.call(x,a,e),a.fillStyle=x._renderer.effect)),d&&(typeof d=="string"?a.strokeStyle=d:(dt[d._renderer.type].render.call(d,a,e),a.strokeStyle=d._renderer.effect),_&&(a.lineWidth=_)),typeof p=="number"&&(a.globalAlpha=p),A&&A.length>0&&(a.lineDashOffset=A.offset||0,a.setLineDash(A)),a.save(),a.scale(c.x,c.y),a.translate(E,j),dt.isHidden.test(x)||(x._renderer&&x._renderer.offset?(q=x._renderer.scale.x,J=x._renderer.scale.y,a.save(),a.translate(-x._renderer.offset.x,-x._renderer.offset.y),a.scale(q,J),D=e._size/x._renderer.scale.y,N=e._leading/x._renderer.scale.y,a.font=[e._style,e._weight,D+"px/",N+"px",e._family].join(" "),P=x._renderer.offset.x/x._renderer.scale.x,H=x._renderer.offset.y/x._renderer.scale.y,a.fillText(e.value,P,H),a.restore()):a.fillText(e.value,0,0)),dt.isHidden.test(d)||(d._renderer&&d._renderer.offset?(q=d._renderer.scale.x,J=d._renderer.scale.y,a.save(),a.translate(-d._renderer.offset.x,-d._renderer.offset.y),a.scale(q,J),D=e._size/d._renderer.scale.y,N=e._leading/d._renderer.scale.y,a.font=[e._style,e._weight,D+"px/",N+"px",e._family].join(" "),P=d._renderer.offset.x/d._renderer.scale.x,H=d._renderer.offset.y/d._renderer.scale.y,$=_/d._renderer.scale.x,a.lineWidth=$,a.strokeText(e.value,P,H),a.restore()):a.strokeText(e.value,0,0)),/(underline|strikethrough)/i.test(R)){const bt=a.measureText(e.value);switch(R){case"underline":gt=bt.actualBoundingBoxDescent,ot=bt.actualBoundingBoxDescent;break;case"strikethrough":gt=0,ot=0;break}at=-bt.width/2,ut=bt.width/2,a.lineWidth=Math.max(Math.floor(e._size/15),1),a.strokeStyle=a.fillStyle,a.beginPath(),a.moveTo(at,gt),a.lineTo(ut,ot),a.stroke()}a.restore()},getBoundingClientRect:function(s,e){const r=dt.ctx;r.font=[s._style,s._weight,s._size+"px/"+s._leading+"px",s._family].join(" "),r.textAlign="center",r.textBaseline=ei.Utils.baselines[s._baseline]||s._baseline;const a=r.measureText(s._value);let h=a.width,c=1.15*(a.actualBoundingBoxAscent+a.actualBoundingBoxDescent);this._linewidth&&!dt.isHidden.test(this._stroke)&&(h+=this._linewidth*2,c+=this._linewidth*2);const d=h/2,_=c/2;switch(dt.alignments[s._alignment]||s._alignment){case dt.alignments.left:s.direction==="ltr"?(e.left=0,e.right=h):(e.left=-h,e.right=0);break;case dt.alignments.right:s.direction==="ltr"?(e.left=-h,e.right=0):(e.left=0,e.right=h);break;default:e.left=-d,e.right=d}switch(s._baseline){case"bottom":e.top=-c,e.bottom=0;break;case"top":e.top=0,e.bottom=c;break;case"baseline":e.top=-_*1.5,e.bottom=_*.5;break;default:e.top=-_,e.bottom=_}e.width=h,e.height=c,e.centroid||(e.centroid={}),e.centroid.x=d,e.centroid.y=_},render:function(s,e,r){if(!this._visible||!this._opacity)return this;this._update();const a=r||this.parent,h=e[this._renderer.type],c=a._matrix.manual||a._flagMatrix,d=this._matrix.manual||this._flagMatrix,_=this._renderer.parent!==a,x=this._flagVertices||this._flagFill||this._fill instanceof Pt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof It&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Tt&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Pt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof It&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Tt&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||a._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((c||d||_)&&(this._renderer.matrix||(this._renderer.matrix=new it(9)),this._matrix.toTransformArray(!0,Ue),Qi(Ue,a._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof V||(this._renderer.scale=new V),this._scale instanceof V?(this._renderer.scale.x=this._scale.x*a._renderer.scale.x,this._renderer.scale.y=this._scale.y*a._renderer.scale.y):(this._renderer.scale.x=this._scale*a._renderer.scale.x,this._renderer.scale.y=this._scale*a._renderer.scale.y),_&&(this._renderer.parent=a)),this._mask&&(s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST),s.stencilFunc(s.ALWAYS,1,0),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.colorMask(!1,!1,!1,!1),dt[this._mask._renderer.type].render.call(this._mask,s,e,this),s.stencilFunc(s.EQUAL,1,255),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.colorMask(!0,!0,!0,!0)),x?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*a._renderer.opacity,dt.text.getBoundingClientRect(this,this._renderer.rect),dt.updateTexture.call(dt,s,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!r||!this._renderer.texture)return this;e.current!==h&&(s.useProgram(h),s.bindBuffer(s.ARRAY_BUFFER,e.buffers.position),s.vertexAttribPointer(h.position,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(h.position),s.bufferData(s.ARRAY_BUFFER,Ws,s.STATIC_DRAW),e.resolution.flagged||s.uniform2f(s.getUniformLocation(h,"u_resolution"),e.resolution.width,e.resolution.height),e.current=h),e.resolution.flagged&&s.uniform2f(s.getUniformLocation(h,"u_resolution"),e.resolution.width,e.resolution.height),s.bindTexture(s.TEXTURE_2D,this._renderer.texture);const p=this._renderer.rect;return s.uniformMatrix3fv(h.matrix,!1,this._renderer.matrix),s.uniform4f(h.rect,p.left,p.top,p.right,p.bottom),s.drawArrays(s.TRIANGLES,0,6),this._mask&&s.disable(s.STENCIL_TEST),this.flagReset()}},"linear-gradient":{render:function(s,e){if(!(!s.canvas.getContext("2d")||!e)){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let r,a=this.left._x,h=this.left._y,c=this.right._x,d=this.right._y;/objectBoundingBox/i.test(this._units)&&(r=e.getBoundingClientRect(!0),a=(a-.5)*r.width,h=(h-.5)*r.height,c=(c-.5)*r.width,d=(d-.5)*r.height),this._renderer.effect=s.createLinearGradient(a,h,c,d);for(let _=0;_<this.stops.length;_++){const x=this.stops[_];this._renderer.effect.addColorStop(x._offset,x._color)}}return this.flagReset()}}},"radial-gradient":{render:function(s,e){if(!(!s.canvas.getContext("2d")||!e)){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let r,a=this.center._x,h=this.center._y,c=this.focal._x,d=this.focal._y,_=this._radius;/objectBoundingBox/i.test(this._units)&&(r=e.getBoundingClientRect(!0),a=(a-.5)*r.width*.5,h=(h-.5)*r.height*.5,c=(c-.5)*r.width*.5,d=(d-.5)*r.height*.5,_*=Math.min(r.width,r.height)),this._renderer.effect=s.createRadialGradient(a,h,0,c,d,_);for(let x=0;x<this.stops.length;x++){const p=this.stops[x];this._renderer.effect.addColorStop(p._offset,p._color)}}return this.flagReset()}}},texture:{render:function(s,e){if(!s.canvas.getContext("2d"))return;this._update();const r=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=s.createPattern(r,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof V||(this._renderer.offset=new V),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,r&&(this._renderer.offset.x+=r.width/2,this._renderer.offset.y+=r.height/2,this._scale instanceof V?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof V||(this._renderer.scale=new V),this._scale instanceof V?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},updateTexture:function(s,e){if(this[e._renderer.type].updateCanvas.call(dt,s,e),this.canvas.width<=0||this.canvas.height<=0){e._renderer.texture&&s.deleteTexture(e._renderer.texture),delete e._renderer.texture;return}e._renderer.texture||(e._renderer.texture=s.createTexture()),s.bindTexture(s.TEXTURE_2D,e._renderer.texture),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,this.canvas),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR)},program:{create:function(s,e){let r,a,h;if(r=s.createProgram(),rt.each(e,function(c){s.attachShader(r,c)}),s.linkProgram(r),a=s.getProgramParameter(r,s.LINK_STATUS),!a)throw h=s.getProgramInfoLog(r),s.deleteProgram(r),new le("unable to link program: "+h);return r}},extensions:{init:function(s){const e={},r=["EXT_texture_filter_anisotropic","WEBGL_compressed_texture_s3tc","OES_texture_float_linear","WEBGL_multisampled_render_to_texture"];for(let a=0;a<r.length;a++){const h=r[a];e[h]=dt.extensions.get(s,h)}return e},get:function(s,e){return s.getExtension(e)||s.getExtension(`MOZ_${e}`)||s.getExtension(`WEBKIT_${e}`)}},TextureRegistry:new Ni};dt.ctx=dt.canvas.getContext("2d");var an=class extends F{constructor(s){super();let e,r,a,h;if(this.domElement=s.domElement||document.createElement("canvas"),typeof s.offscreenElement<"u"&&(dt.canvas=s.offscreenElement,dt.ctx=dt.canvas.getContext("2d")),this.scene=new Yt,this.scene.parent=this,this._renderer={type:"renderer",matrix:new it(ol),scale:1,opacity:1},this._flagMatrix=!0,s=rt.defaults(s||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=s.overdraw,e=this.ctx=this.domElement.getContext("webgl",s)||this.domElement.getContext("experimental-webgl",s),!this.ctx)throw new le("unable to create a webgl context. Try using another renderer.");a=ye.create(e,ye.path.vertex,ye.types.vertex),h=ye.create(e,ye.path.fragment,ye.types.fragment),this.programs={current:null,buffers:{position:e.createBuffer()},resolution:{width:0,height:0,ratio:1,flagged:!1}},r=this.programs.path=dt.program.create(e,[a,h]),this.programs.text=this.programs.path,e.extensions=dt.extensions.init(e),e.renderer=this,r.position=e.getAttribLocation(r,"a_position"),r.matrix=e.getUniformLocation(r,"u_matrix"),r.rect=e.getUniformLocation(r,"u_rect");const c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.vertexAttribPointer(r.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r.position),e.bufferData(e.ARRAY_BUFFER,Ws,e.STATIC_DRAW),a=ye.create(e,ye.points.vertex,ye.types.vertex),h=ye.create(e,ye.points.fragment,ye.types.fragment),r=this.programs.points=dt.program.create(e,[a,h]),r.position=e.getAttribLocation(r,"a_position"),r.matrix=e.getUniformLocation(r,"u_matrix"),r.size=e.getUniformLocation(r,"u_size"),e.enable(e.BLEND),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}setSize(s,e,r){let a,h;const c=this.ctx;return this.width=s,this.height=e,this.ratio=typeof r>"u"?Ts(c):r,this.domElement.width=s*this.ratio,this.domElement.height=e*this.ratio,rt.isObject(this.domElement.style)&&rt.extend(this.domElement.style,{width:s+"px",height:e+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,a=s*this.ratio,h=e*this.ratio,c.viewport(0,0,a,h),this.programs.resolution.width=a,this.programs.resolution.height=h,this.programs.resolution.ratio=this.ratio,this.programs.resolution.flagged=!0,this.trigger(F.Types.resize,s,e,r)}render(){const s=this.ctx;return this.overdraw||s.clear(s.COLOR_BUFFER_BIT),dt.group.render.call(this.scene,s,this.programs),this._flagMatrix=!1,this.programs.resolution.flagged=!0,this}};k(an,"Utils",dt);var cl=rt.extend({Error:le,getRatio:Ts,read:Bt,xhr:Kr},rt,ne,Rt,L),gi=class{constructor(s){w(this,"_events",new F);w(this,"type","");w(this,"renderer",null);w(this,"scene",null);w(this,"width",0);w(this,"height",0);w(this,"frameCount",0);w(this,"timeDelta",0);w(this,"playing",!1);const e=rt.defaults(s||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:gi.Types.svg,autostart:!1});if(rt.each(e,function(r,a){/fullscreen/i.test(a)||/autostart/i.test(a)||(this[a]=r)},this),rt.isElement(e.domElement)){const r=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+r)||(this.type=gi.Types[r])}this.renderer=new gi[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=fl.bind(this),this.fit.domElement=window,this.fit.attached=!0,rt.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),rt.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),ae.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=ul.bind(this),rt.extend(this.renderer.domElement.style,{display:"block"})):rt.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(F.Types.resize,dl.bind(this)),this.scene=this.renderer.scene,gi.Instances.push(this),e.autostart&&pi.init()}get _bound(){return this._events._bound}set _bound(s){this._events._bound=s}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.addEventListener.apply(this,arguments)}bind(){return this._events.addEventListener.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.removeEventListener.apply(this,arguments)}unbind(){return this._events.removeEventListener.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.dispatchEvent.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}appendTo(s){return s.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=s,this.fit.attached=!1),this.update()),this}play(){return this.playing=!0,pi.init(),this.trigger(F.Types.play)}pause(){return this.playing=!1,this.trigger(F.Types.pause)}setPlaying(s){this.playing=s}release(s){let e,r,a;if(!rt.isObject(s))return this.release(this.scene);if(typeof s.unbind=="function"&&s.unbind(),s.vertices)for(typeof s.vertices.unbind=="function"&&s.vertices.unbind(),e=0;e<s.vertices.length;e++)r=s.vertices[e],typeof r.unbind=="function"&&r.unbind(),r.controls&&(r.controls.left&&typeof r.controls.left.unbind=="function"&&r.controls.left.unbind(),r.controls.right&&typeof r.controls.right.unbind=="function"&&r.controls.right.unbind());if(s.children){for(e=0;e<s.children.length;e++)a=s.children[e],this.release(a);typeof s.children.unbind=="function"&&s.children.unbind()}return s}update(){const s=!!this._lastFrame,e=rt.performance.now();s&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&this.fit.domElement&&!this.fit.attached&&(ae.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());const r=this.width,a=this.height,h=this.renderer;return(r!==h.width||a!==h.height)&&h.setSize(r,a,this.ratio),this.trigger(F.Types.update,this.frameCount,this.timeDelta),this.render()}render(){return this.renderer.render(),this.trigger(F.Types.render,this.frameCount++)}add(s){return s instanceof Array||(s=Array.prototype.slice.call(arguments)),this.scene.add(s),this}remove(s){return s instanceof Array||(s=Array.prototype.slice.call(arguments)),this.scene.remove(s),this}clear(){return this.scene.remove(this.scene.children),this}makeLine(s,e,r,a){const h=new Bs(s,e,r,a);return this.scene.add(h),h}makeArrow(s,e,r,a,h){const c=typeof h=="number"?h:10,d=Math.atan2(a-e,r-s),_=[new tt(s,e,void 0,void 0,void 0,void 0,v.move),new tt(r,a,void 0,void 0,void 0,void 0,v.line),new tt(r-c*Math.cos(d-Math.PI/4),a-c*Math.sin(d-Math.PI/4),void 0,void 0,void 0,void 0,v.line),new tt(r,a,void 0,void 0,void 0,void 0,v.move),new tt(r-c*Math.cos(d+Math.PI/4),a-c*Math.sin(d+Math.PI/4),void 0,void 0,void 0,void 0,v.line)],x=new kt(_,!1,!1,!0);return x.noFill(),x.cap="round",x.join="round",this.scene.add(x),x}makeRectangle(s,e,r,a){const h=new Ke(s,e,r,a);return this.scene.add(h),h}makeRoundedRectangle(s,e,r,a,h){const c=new Gi(s,e,r,a,h);return this.scene.add(c),c}makeCircle(s,e,r,a){const h=new Xi(s,e,r,a);return this.scene.add(h),h}makeEllipse(s,e,r,a,h){const c=new Hi(s,e,r,a,h);return this.scene.add(c),c}makeStar(s,e,r,a,h){const c=new Us(s,e,r,a,h);return this.scene.add(c),c}makeCurve(s){const e=arguments.length;if(!Array.isArray(s)){s=[];for(let c=0;c<e;c+=2){const d=arguments[c];if(typeof d!="number")break;const _=arguments[c+1];s.push(new tt(d,_))}}const r=arguments[e-1],a=new kt(s,!(typeof r=="boolean"&&r),!0),h=a.getBoundingClientRect();return a.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(a),a}makePolygon(s,e,r,a){const h=new Ds(s,e,r,a);return this.scene.add(h),h}makeArcSegment(s,e,r,a,h,c,d){const _=new zs(s,e,r,a,h,c,d);return this.scene.add(_),_}makePoints(s){const e=arguments.length;let r=s;if(!Array.isArray(s)){r=[];for(let h=0;h<e;h+=2){const c=arguments[h];if(typeof c!="number")break;const d=arguments[h+1];r.push(new V(c,d))}}const a=new Vs(r);return this.scene.add(a),a}makePath(s){const e=arguments.length;let r=s;if(!Array.isArray(s)){r=[];for(let d=0;d<e;d+=2){const _=arguments[d];if(typeof _!="number")break;const x=arguments[d+1];r.push(new tt(_,x))}}const a=arguments[e-1],h=new kt(r,!(typeof a=="boolean"&&a)),c=h.getBoundingClientRect();return typeof c.top=="number"&&typeof c.left=="number"&&typeof c.right=="number"&&typeof c.bottom=="number"&&h.center().translation.set(c.left+c.width/2,c.top+c.height/2),this.scene.add(h),h}makeText(s,e,r,a){const h=new Ae(s,e,r,a);return this.add(h),h}makeLinearGradient(s,e,r,a){const h=Array.prototype.slice.call(arguments,4),c=new Pt(s,e,r,a,h);return this.add(c),c}makeRadialGradient(s,e,r){const a=Array.prototype.slice.call(arguments,3),h=new It(s,e,r,a);return this.add(h),h}makeSprite(s,e,r,a,h,c,d){const _=new Ui(s,e,r,a,h,c);return d&&_.play(),this.add(_),_}makeImageSequence(s,e,r,a,h){const c=new $i(s,e,r,a);return h&&c.play(),this.add(c),c}makeTexture(s,e){return new Tt(s,e)}makeGroup(s){s instanceof Array||(s=Array.prototype.slice.call(arguments));const e=new Yt;return this.scene.add(e),e.add(s),e}interpret(s,e,r){const a=s.tagName.toLowerCase();if(r=typeof r<"u"?r:!0,!(a in Bt))return null;const h=Bt[a].call(this,s);return r?this.add(e&&h instanceof Yt?h.children:h):h.parent&&h.remove(),h}load(s,e){const r=new Yt;let a,h,c;const d=(function(_){for(ae.temp.innerHTML=_,h=0;h<ae.temp.children.length;h++)a=ae.temp.children[h],c=this.interpret(a,!1,!1),c!==null&&r.add(c);if(typeof e=="function"){const x=ae.temp.children.length<=1?ae.temp.children[0]:ae.temp.children;e(r,x)}}).bind(this);return/\.svg$/i.test(s)?(Kr(s,d),r):(d(s),r)}},pt=gi;k(pt,"nextFrameID",Ct.nextFrameID),k(pt,"Types",Ct.Types),k(pt,"Version",Ct.Version),k(pt,"PublishDate",Ct.PublishDate),k(pt,"Identifier",Ct.Identifier),k(pt,"Resolution",Ct.Resolution),k(pt,"AutoCalculateImportedMatrices",Ct.AutoCalculateImportedMatrices),k(pt,"Instances",Ct.Instances),k(pt,"uniqueId",Ct.uniqueId),k(pt,"Anchor",tt),k(pt,"Collection",ze),k(pt,"Events",F),k(pt,"Group",Yt),k(pt,"Matrix",$e),k(pt,"Path",kt),k(pt,"Registry",Ni),k(pt,"Shape",je),k(pt,"Text",Ae),k(pt,"Vector",V),k(pt,"Gradient",Ht),k(pt,"ImageSequence",$i),k(pt,"LinearGradient",Pt),k(pt,"RadialGradient",It),k(pt,"Sprite",Ui),k(pt,"Stop",De),k(pt,"Texture",Tt),k(pt,"ArcSegment",zs),k(pt,"Circle",Xi),k(pt,"Ellipse",Hi),k(pt,"Line",Bs),k(pt,"Points",Vs),k(pt,"Polygon",Ds),k(pt,"Rectangle",Ke),k(pt,"RoundedRectangle",Gi),k(pt,"Star",Us),k(pt,"CanvasRenderer",ei),k(pt,"SVGRenderer",rn),k(pt,"WebGLRenderer",an),k(pt,"Commands",v),k(pt,"Utils",cl);function fl(){const s=document.body.getBoundingClientRect(),e=this.width=s.width,r=this.height=s.height;this.renderer.setSize(e,r,this.ratio)}function ul(){const s=this.renderer.domElement.parentElement;if(!s){console.warn("Two.js: Attempting to fit to parent, but no parent found.");return}const e=s.getBoundingClientRect(),r=this.width=e.width,a=this.height=e.height;this.renderer.setSize(r,a,this.ratio)}function dl(s,e){this.width=s,this.height=e,this.trigger(F.Types.resize,s,e)}var pi=ae.getRequestAnimationFrame();function ln(){for(let s=0;s<pt.Instances.length;s++){const e=pt.Instances[s];e.playing&&e.update()}pt.nextFrameID=pi(ln)}return pi.init=function(){ln(),pi.init=function(){}},S(T)})().default;(function(){t.exports=n})()})(yo);
